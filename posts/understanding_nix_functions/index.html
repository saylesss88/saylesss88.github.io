<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Understanding_nix_functions | NixOS Blog</title>
<link rel=icon href=favicon.svg sizes=any type=image/svg+xml><meta property="og:url" content="https://saylesss88.github.io/posts/understanding_nix_functions/"><meta property="og:site_name" content="NixOS Blog"><meta property="og:title" content="Understanding_nix_functions"><meta property="og:description" content="Understanding Nix Functions Functions are a fundamental concept in Nix and are prevalent throughout Nix code. Grasping how they work is crucial for understanding and writing Nix expressions.
The Single-Argument Nature of Nix Functions A key concept to understand is that in Nix, every function conceptually takes exactly one argument. What might appear as multi-argument functions are actually achieved through a technique called currying, where a series of nested single-argument functions are used."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-14T19:17:32-04:00"><meta property="article:modified_time" content="2025-05-14T19:17:32-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Understanding_nix_functions"><meta name=twitter:description content="Understanding Nix Functions Functions are a fundamental concept in Nix and are prevalent throughout Nix code. Grasping how they work is crucial for understanding and writing Nix expressions.
The Single-Argument Nature of Nix Functions A key concept to understand is that in Nix, every function conceptually takes exactly one argument. What might appear as multi-argument functions are actually achieved through a technique called currying, where a series of nested single-argument functions are used."><link rel=stylesheet href=/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H+ZeT/jBpieRZ8=" crossorigin=anonymous><link rel=stylesheet href=/css/bundle.min.e139b0e3b3aff8f0e8e0272554b671a06c857a42278b36c539d96c69ddee2ca2.css integrity="sha256-4Tmw47Ov+PDo4CclVLZxoGyFekInizbFOdlsad3uLKI=" crossorigin=anonymous><script src=/js/bundle.995e4ec99401021e081ec256bee66154ef7f4e5136809432513b2e6d014b4b1d.js integrity="sha256-mV5OyZQBAh4IHsJWvuZhVO9/TlE2gJQyUTsubQFLSx0=" crossorigin=anonymous></script><script defer src=/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js integrity="sha256-ZFlLEl97eL30+oMWlVkiu+uxzWuu8/FmVL/KIDCfGPg="></script><script defer src=/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js integrity="sha256-HZgPhN8R8+t8jF8X9UHUmgYRYI3xed10+n8GIl61as4="></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://saylesss88.github.io/ style=color:inherit>NixOS Blog</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div></div><a href=https://saylesss88.github.io//index.xml><img src=/images/rss.png alt="RSS Feed" width=24>
</a><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="dark-icon" viewBox="0 0 24 24" fill="none"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://saylesss88.github.io/><span itemprop=name>Home</span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://saylesss88.github.io/posts/><span itemprop=name>Posts</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span></ol><h1>Understanding_nix_functions</h1><time class=dim datetime=2025-05-14T19:17:32-04:00>May 14, 2025</time></div><section class=page-section><h1 id=understanding-nix-functions>Understanding Nix Functions</h1><figure><img src=/images/nixLogo.png alt=NixFlakeLogo width=500></figure><p>Functions are a fundamental concept in Nix and are prevalent throughout Nix code. Grasping how they work is crucial for understanding and writing Nix expressions.</p><h2 id=the-single-argument-nature-of-nix-functions>The Single-Argument Nature of Nix Functions</h2><p>A key concept to understand is that in Nix, every function conceptually takes <strong>exactly one argument</strong>. What might appear as multi-argument functions are actually achieved through a technique called <strong>currying</strong>, where a series of nested single-argument functions are used.</p><h2 id=identifying-function-structure-the-colon>Identifying Function Structure The Colon</h2><p>The colon (<code>:</code>) acts as a clear separator within a function definition:</p><ul><li><strong>Left of the Colon:</strong> This is the function&rsquo;s <strong>argument</strong>. It&rsquo;s a placeholder name for a value that will be provided when the function is called.</li><li><strong>Right of the Colon:</strong> This is the <strong>function body</strong>. It&rsquo;s the expression that will be evaluated when the function is invoked.</li></ul><p><strong>Think of function arguments as naming values that aren&rsquo;t known in advance.</strong> These names are placeholders that get filled with specific values when the function is used.</p><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>greet <span style=color:#f92672>=</span> personName: <span style=color:#e6db74>&#34;Hello, </span><span style=color:#e6db74>${</span>personName<span style=color:#e6db74>}</span><span style=color:#e6db74>!&#34;</span>;
</span></span></code></pre></div><ul><li><p>Here, <code>personName</code> is the <strong>argument</strong> (the placeholder).</p></li><li><p><code>"Hello, ${personName}!"</code>, is the <strong>function body</strong> (the expression that
uses the placeholder).</p></li></ul><p>When you call the function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>greet <span style=color:#e6db74>&#34;Anonymous&#34;</span>  <span style=color:#75715e># Evaluates to &#34;Hello, Anonymous!&#34;</span>
</span></span></code></pre></div><p>The value <code>"Anonymous"</code> is substituted for the <code>personName</code> placeholder within
the function body.</p><h2 id=function-declarations-single-and-multiple-arguments>Function Declarations Single and &ldquo;Multiple&rdquo; Arguments</h2><p><strong>Single-Argument Functions</strong></p><p>The simplest form of a Nix function takes a single argument:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>inc <span style=color:#f92672>=</span> x: x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>inc <span style=color:#ae81ff>5</span>  <span style=color:#75715e># Evaluates to 6</span>
</span></span></code></pre></div><ul><li><p><code>x</code> is the argument.</p></li><li><p><code>x + 1</code> is the function body.</p></li></ul><p><strong>Simulating Multiple Arguments: Currying</strong></p><p>To create functions that appear to take multiple arguments, Nix uses currying.
This involves nesting single-argument functions, where each function takes one
argument and returns another function that takes the next argument, and so on.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>concat <span style=color:#f92672>=</span> x: y: x <span style=color:#f92672>+</span> y;
</span></span><span style=display:flex><span>concat <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>6</span>    <span style=color:#75715e># Evaluates to 12</span>
</span></span></code></pre></div><p>Nix interprets the colons as separators for this chain of single-argument
functions.</p><p><strong>Understanding the Chain:</strong></p><p>Consider the <code>greeting</code> function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>greeting <span style=color:#f92672>=</span> prefix: name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>!&#34;</span>;
</span></span></code></pre></div><p>This is effectively a chain:</p><ol><li><strong>Outer Function</strong>: <code>prefix: (name: "${prefix}, ${name}!")</code></li></ol><ul><li><p>Takes one argument: <code>prefix</code>.</p></li><li><p>Its body is another function definition: name: <code>"${prefix}, ${name}!"</code>.</p></li></ul><p>2 <strong>Inner Function:</strong> <code>name: "${prefix}, ${name}!"</code></p><ul><li><p>Takes one argument: <code>name</code>.</p></li><li><p>Its body uses both its own argument (<code>name</code>) and the argument from the
outer function&rsquo;s scope (prefix).</p></li></ul><p><strong>Step-by-Step Evaluation:</strong></p><p>When you call <code>greeting "Hello" "Alice"</code>:</p><ol><li><code>greeting "Hello"</code>:</li></ol><ul><li><p>The <code>greeting</code> function is called with <code>"Hello"</code> as the <code>prefix</code>.</p></li><li><p>The outer function returns the inner function:
<code>name: "Hello, ${name}!"</code> (where <code>prefix</code> is now fixed as `&ldquo;Hello&rdquo;`` in its
scope).</p></li></ul><ol start=2><li><code>(greeting "Hello") "Alice"</code>:</li></ol><ul><li><p>The resulting inner function is then called with <code>"Alice"</code> as the <code>name</code>.</p></li><li><p>The inner function evaluates its body: <code>"Hello, ${"Alice"}!"</code>, resulting in
<code>"Hello, Alice!"</code>.</p></li></ul><p><strong>Key Insight</strong>: Every colon in a function definition separates a single
argument from its function body, even if that body is another function
definition.</p><p><strong>Partial Application: Using Functions Incrementally</strong></p><p>Because of currying, you can apply arguments to a Nix function one at a time.
This is called partial application. When you provide only some of the expected
arguments, you get a new function that &ldquo;remembers&rdquo; the provided arguments and
waits for the rest.</p><p><strong>Example:</strong></p><p>Using our <code>greeting</code> function again:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>greeting <span style=color:#f92672>=</span> prefix: name: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>!&#34;</span>;
</span></span></code></pre></div><p>If we only provide the prefix:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>helloGreeting <span style=color:#f92672>=</span> greeting <span style=color:#e6db74>&#34;Hello&#34;</span>;
</span></span></code></pre></div><ul><li><code>helloGreeting</code> is now a new function. It has already received the <code>prefix</code>
argument (<code>"Hello"</code>) and is waiting for the <code>name</code> argument.</li></ul><p>Calling <code>helloGreeting</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>helloGreeting <span style=color:#e6db74>&#34;Sally&#34;</span> <span style=color:#75715e># Evaluates to &#34;Hello, Sally!&#34;</span>
</span></span></code></pre></div><p><strong>Benefits of Partial Application:</strong></p><ul><li><p><strong>Creating Specialized Functions</strong>: You can create more specific functions
from general ones by fixing some of their parameters.</p></li><li><p><strong>Adapting to Higher-Order Functions</strong>: Many functions that operate on other
functions (like <code>map</code> and <code>filter</code>) expect functions with a certain number of
arguments. Partial application allows you to adapt existing functions to fit
these requirements.</p></li></ul><h3 id=the-function-nature-of-nixos-and-home-manager-modules>The Function Nature of NixOS and Home Manager Modules</h3><p>It&rsquo;s crucial to understand that most NixOS and Home Manager modules are
fundamentally <strong>functions</strong>.</p><ul><li>These module functions typically accept a single argument: an
<strong>attribute set</strong>.</li></ul><p><strong>Example</strong>:</p><p>A simplified Nginx service module:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>{ config<span style=color:#f92672>,</span> lib<span style=color:#f92672>,</span> pkgs<span style=color:#f92672>,</span> <span style=color:#f92672>...</span> }: {
</span></span><span style=display:flex><span>services<span style=color:#f92672>.</span>nginx<span style=color:#f92672>.</span>enable <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>services<span style=color:#f92672>.</span>nginx<span style=color:#f92672>.</span>package <span style=color:#f92672>=</span> pkgs<span style=color:#f92672>.</span>nginx;
</span></span><span style=display:flex><span>services<span style=color:#f92672>.</span>nginx<span style=color:#f92672>.</span>settings<span style=color:#f92672>.</span><span style=color:#e6db74>&#34;http-port&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;8080&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><p>The entire module definition is a function that takes one argument:
<code>{ config, lib, pkgs, ... }</code>.</p></li><li><p>When this module is included in your configuration, the NixOS module system
calls this function with a specific attribute set. This attribute set contains
the current system configuration (<code>config</code>), the Nix standard library (<code>lib</code>),
the available packages (<code>pkgs</code>), and other relevant information. The module
then uses these values to define parts of your system.</p></li></ul><h3 id=resources>Resources</h3><ul><li><p><a href=https://nix.dev/tutorials/nix-language.html>nix.dev Nix Lang Basics</a></p></li><li><p><a href=https://nixos.org/guides/nix-pills/05-functions-and-imports.html>nix pills Functions and Imports</a></p></li><li><p><a href=https://zero-to-nix.com/concepts/nix-language/>zero-to-nix Nix Lang</a></p></li><li><p><a href="https://nixcloud.io/tour/?id=functions%2Fintroduction">A tour of Nix &ldquo;Functions&rdquo;</a></p></li><li><p><a href=https://learnxinyminutes.com/nix/>learn Nix in y minutes</a></p></li><li><p><a href=https://noogle.dev/>noogle function library</a></p></li></ul></section></main><footer id=main-footer><div class=footer><a href=#>Scroll to Top</a><div class=footer-copyright><div class=dim>© 2025</div><div>Made with ❤️ and powered by <a href=https://github.com/math-queiroz/rusty-typewriter target=_blank>Rusty Typewriter</a> theme for <a href=https://gohugo.io/ target=_blank>Hugo</a></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>787 words</span>
<span>5 - 7 minutes read</span></div><h3>Table Of Contents</h3><nav id=TableOfContents><ul><li><a href=#the-single-argument-nature-of-nix-functions>The Single-Argument Nature of Nix Functions</a></li><li><a href=#identifying-function-structure-the-colon>Identifying Function Structure The Colon</a></li><li><a href=#function-declarations-single-and-multiple-arguments>Function Declarations Single and &ldquo;Multiple&rdquo; Arguments</a><ul><li><a href=#the-function-nature-of-nixos-and-home-manager-modules>The Function Nature of NixOS and Home Manager Modules</a></li><li><a href=#resources>Resources</a></li></ul></li></ul></nav></aside></div></div></body></html>