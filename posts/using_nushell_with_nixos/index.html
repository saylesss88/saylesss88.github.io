<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Using_nushell_with_nixos | NixOS Blog</title>
<link rel=icon href=favicon.svg sizes=any type=image/svg+xml><meta property="og:url" content="https://saylesss88.github.io/posts/using_nushell_with_nixos/"><meta property="og:site_name" content="NixOS Blog"><meta property="og:title" content="Using_nushell_with_nixos"><meta property="og:description" content="Nushell and NixOS I recently switched default shells from zsh to nushell, this post is about some of the challenges and advantages of using nushell with NixOS.
Nushell borrows concepts from many shells and languages and is itself both a programming language and a shell. Because of this, it has it’s own way of working with files, directories, websites, and more.
The Challenges There are many similarities so it can be easy to forget that some Bash (and POSIX in general) style constructs just won’t work in Nushell. Considering that NixOS seems to have been designed for bash, even Zsh isn’t fully compatable you may want to think twice before you choose Nushell as your default."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-16T19:54:01-04:00"><meta property="article:modified_time" content="2025-05-16T19:54:01-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using_nushell_with_nixos"><meta name=twitter:description content="Nushell and NixOS I recently switched default shells from zsh to nushell, this post is about some of the challenges and advantages of using nushell with NixOS.
Nushell borrows concepts from many shells and languages and is itself both a programming language and a shell. Because of this, it has it’s own way of working with files, directories, websites, and more.
The Challenges There are many similarities so it can be easy to forget that some Bash (and POSIX in general) style constructs just won’t work in Nushell. Considering that NixOS seems to have been designed for bash, even Zsh isn’t fully compatable you may want to think twice before you choose Nushell as your default."><link rel=stylesheet href=/css/root.min.0e732b812b9751962e01a7c4798a1211cd5f8ac8abec7f99793fe306989e459f.css integrity="sha256-DnMrgSuXUZYuAafEeYoSEc1fisir7H+ZeT/jBpieRZ8=" crossorigin=anonymous><link rel=stylesheet href=/css/bundle.min.e139b0e3b3aff8f0e8e0272554b671a06c857a42278b36c539d96c69ddee2ca2.css integrity="sha256-4Tmw47Ov+PDo4CclVLZxoGyFekInizbFOdlsad3uLKI=" crossorigin=anonymous><script src=/js/bundle.995e4ec99401021e081ec256bee66154ef7f4e5136809432513b2e6d014b4b1d.js integrity="sha256-mV5OyZQBAh4IHsJWvuZhVO9/TlE2gJQyUTsubQFLSx0=" crossorigin=anonymous></script><script defer src=/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js integrity="sha256-ZFlLEl97eL30+oMWlVkiu+uxzWuu8/FmVL/KIDCfGPg="></script><script defer src=/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js integrity="sha256-HZgPhN8R8+t8jF8X9UHUmgYRYI3xed10+n8GIl61as4="></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://saylesss88.github.io/ style=color:inherit>NixOS Blog</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div></div><a href=https://saylesss88.github.io//index.xml><img src=/images/rss.png alt="RSS Feed" width=24>
</a><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="dark-icon" viewBox="0 0 24 24" fill="none"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://saylesss88.github.io/><span itemprop=name>Home</span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://saylesss88.github.io/posts/><span itemprop=name>Posts</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span></ol><h1>Using_nushell_with_nixos</h1><time class=dim datetime=2025-05-16T19:54:01-04:00>May 16, 2025</time></div><section class=page-section><h1 id=nushell-and-nixos>Nushell and NixOS</h1><ul><li><p>I recently switched default shells from zsh to nushell, this post is about some
of the challenges and advantages of using nushell with NixOS.</p></li><li><p>Nushell borrows concepts from many shells and languages and is itself both a
programming language and a shell. Because of this, it has it&rsquo;s own way of
working with files, directories, websites, and more.</p></li></ul><h2 id=the-challenges>The Challenges</h2><ul><li><p>There are many similarities so it can be easy to forget that some Bash (and
POSIX in general) style constructs just won&rsquo;t work in Nushell. Considering
that NixOS seems to have been designed for bash, even Zsh isn&rsquo;t fully
compatable you may want to think twice before you choose Nushell as your
default.</p></li><li><p>The documentation is incomplete, it&rsquo;s not as mature as other shells
including fish.</p></li><li><p><code>&&</code> doesn&rsquo;t work use <code>;</code> instead.</p></li><li><p><code>></code> is used as the greater-than operator for comparisons:</p></li></ul><pre tabindex=0><code class=language-nu data-lang=nu>&#34;hello&#34; | save output.txt
</code></pre><p>is equivalent to the following in bash:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;hello&#34;</span> &gt; output.txt
</span></span></code></pre></div><ul><li>If you notice above the nushell command doesn&rsquo;t require an <code>echo</code> prefix, this
is because Nushell has <strong>Implicit Return</strong>:</li></ul><pre tabindex=0><code class=language-nu data-lang=nu>&#34;Hello, World&#34; == (echo &#34;Hello, World&#34;)
# =&gt; true
</code></pre><ul><li><p>The above example shows that the string, <code>"Hello, World"</code> is equivalent to the
output value from <code>echo "Hello, World"</code></p></li><li><p><strong>Every Command Returns a Value</strong>:</p></li></ul><pre tabindex=0><code class=language-nu data-lang=nu>let p = 7
print $p  # 7
$p * 6    # 42
</code></pre><p><strong>Key Differences Between Nushell & Bash</strong></p><table><thead><tr><th><strong>Feature</strong></th><th><strong>Bash (Dynamic)</strong></th><th><strong>Nushell (Static)</strong></th></tr></thead><tbody><tr><td>Code Execution</td><td>Line-by-line</td><td>Whole script parsed first</td></tr><tr><td>Error Detection</td><td>Runtime errors only</td><td>Catches errors before running</td></tr><tr><td>Support for <code>eval</code></td><td>✅ Allowed</td><td>❌ Not supported</td></tr><tr><td>Custom Parsing</td><td>Limited</td><td>Built-in semantic analysis</td></tr><tr><td>IDE Features</td><td>Basic syntax highlighting</td><td>Advanced integration, linting, and formatting</td></tr></tbody></table><h2 id=cool-features>Cool Features</h2><ul><li><code>ls</code> command:</li></ul><figure><img src=/images/nu2.png alt="nu ls command" width=1000></figure><ul><li><p><code>atuin</code>:<figure><img src=/images/nu3.png alt=atuin width=1000></figure></p></li><li><p><code>Ctrl+t</code> Commands:<figure><img src=/images/nu4.png alt=atuin width=1000></figure></p></li><li><p><code>Carapace</code> Completion:<figure><img src=/images/nu9.png alt=carapace width=1000></figure></p></li><li><p><code>Carapace</code> man example:<figure><img src=/images/nu7.png alt=carapace_man width=1000></figure></p></li><li><p>The following command allows you to choose which input to update interactively
with fzf.</p></li></ul><pre tabindex=0><code class=language-nu data-lang=nu># upgrade system packages
# `nix-upgrade` or `nix-upgrade -i`
def nix-upgrade [
  flake_path: string = &#34;/home/jr/flake&#34;, # path that contains a flake.nix
  --interactive (-i) # select packages to upgrade interactively
]: nothing -&gt; nothing {
  let working_path = $flake_path | path expand
  if not ($working_path | path exists) {
    echo &#34;path does not exist: $working_path&#34;
    exit 1
  }
  let pwd = $env.PWD
  cd $working_path
  if $interactive {
    let selections = nix flake metadata . --json
    | from json
    | get locks.nodes
    | columns
    | str join &#34;\n&#34;
    | fzf --multi --tmux center,20%
    | lines
    # Debug: Print selections to verify
    print $&#34;Selections: ($selections)&#34;
    # Check if selections is empty
    if ($selections | is-empty) {
      print &#34;No selections made.&#34;
      cd $pwd
      return
    }
    # Use spread operator to pass list items as separate arguments
    nix flake update ...$selections
  } else {
    nix flake update
  }
  cd $pwd
  nh os switch $working_path
}
</code></pre><figure><img src=/images/nu5.png alt=carapace width=1000></figure></section></main><footer id=main-footer><div class=footer><a href=#>Scroll to Top</a><div class=footer-copyright><div class=dim>© 2025</div><div>Made with ❤️ and powered by <a href=https://github.com/math-queiroz/rusty-typewriter target=_blank>Rusty Typewriter</a> theme for <a href=https://gohugo.io/ target=_blank>Hugo</a></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>452 words</span>
<span>3 - 4 minutes read</span></div><h3>Table Of Contents</h3><nav id=TableOfContents><ul><li><a href=#the-challenges>The Challenges</a></li><li><a href=#cool-features>Cool Features</a></li></ul></nav></aside></div></div></body></html>