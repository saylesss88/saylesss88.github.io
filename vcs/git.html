<!DOCTYPE HTML>
<html lang="en" class="coal sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Git - nix-book</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-cf514edd.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/extra-2c23569a.css">
        <link rel="stylesheet" href="../theme/rss-button-b32b2d12.css">
        <link rel="stylesheet" href="../theme/css/kanagawa-code-0be3dd7a.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "coal";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "../searchindex-cd1b67ff.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-8923fb06.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">nix-book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/saylesss88/nix-book.git" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <script>window.CONTENT_COLLECTIONS = {"collections":{"blog":[{"author":"saylesss88","collection":"blog","date":"2026-01-11T00:00:00+00:00","description":null,"draft":false,"path":"nixos_containers.md","preview_html":"<p><img src=\"images/boxes.cleaned.png\" alt=\"boxes\" /></p><p>NixOS containers are lightweight <code>systemd-nspawn</code> containers managed\ndeclaratively through your NixOS configuration. They allow you to run separate,\nminimal NixOS instances on the same machine, each with its own services,\npackages, and (optionally) network stack.</p><p>❗ NixOS’ containers do not provide full security out of the box (just like\ndocker). They do give you a separate chroot, but a privileged user (root) in a\ncontainer can escape the container and become root on the host system.\n–<a href=\"https://blog.beardhatcode.be/2020/12/Declarative-Nixos-Containers.html\">beardhatcode Declarative-Nixos-Containers</a></p>","tags":["nixos","containers"],"title":"NixOS Containers"},{"author":"saylesss88","collection":"blog","date":"2025-12-31T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/rust_crate_to_nixpkgs.md","preview_html":"<p>NOTE: This example assumes you’re packaging a crate that’s already on\ncrates.io, or you’re packaging an existing Rust project for nixpkgs.</p><p>Nixpkgs is a big repository, so it helps to start with a focused workflow:\ncreate a branch, add a package under <code>pkgs/by-name/</code>, build it, then open a PR.</p><pre><code class=\"language-bash\">git clone git@github.com:your-user/nixpkgs.git\ncd nixpkgs\ngit remote add upstream git@github.com:NixOS/nixpkgs.git\n</code></pre>\n<p>(SSH avoids HTTPS helper issues)</p>","tags":["packaging","rust","nixpkgs"],"title":"Packaging a Rust crate for Nixpkgs"},{"author":"saylesss88","collection":"blog","date":"2025-12-08T00:00:00+00:00","description":"JJ Version Control","draft":false,"path":"vcs/jujutsu.md","preview_html":"<p><img src=\"../images/jujutsu.png\" alt=\"JJ Logo\" /></p><p>⚠️ <strong>Security Reminder</strong>: Never commit secrets (passwords, API keys, tokens,\netc.) in plain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like <code>sops-nix</code> or <code>agenix</code>\nto keep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>Jujutsu (jj) is a modern, Git-compatible version control system designed to\nsimplify and improve the developer experience. It offers a new approach to\ndistributed version control, focusing on a more intuitive workflow, powerful\nundo capabilities, and a branchless model that reduces common pitfalls of Git.</p>","tags":["vcs","jj"],"title":"Jujutsu (JJ)"},{"author":"saylesss88","collection":"blog","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"flakes/helix_flake.md","preview_html":"<p><img src=\"../images/helix.png\" alt=\"Helix Logo\" />–<a href=\"https://helix-editor.com/\">helix-editor.com</a></p><p>As we’ve seen from previous examples, the helix editor repository includes a few\n<code>.nix</code> files including a <code>flake.nix</code>. Their flake uses a lot of idiomatic Nix\ncode and advanced features. First I will break down their <code>flake.nix</code> and\n<code>default.nix</code> to understand why they do certain things. And finally, we will\nchange the build to “debug” mode demonstrating how easily you can modify the\nbehavior of a package defined within a Nix flake without changing the original\nsource code or the upstream flake directly.</p><pre><code class=\"language-bash\">git clone https://github.com/helix-editor/helix.git\ncd helix\n</code></pre>\n<p>When you enter ","tags":["nixos","flakes","helix"],"title":"Understanding the Helix Flake"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"intro_to_nushell_on_NixOS.md","preview_html":"<p><img src=\"images/nu.png\" alt=\"Nu\" /></p><p><strong>TL;DR</strong>:I recently switched default shells from zsh to nushell, this post is\nabout some of the challenges and advantages of using nushell with NixOS.</p><p>While the average user might not immediately see significant advantages, those\nwho frequently work with structured data formats like JSON, YAML, and CSV –\nsuch as developers interacting with APIs, system administrators managing\nconfigurations, and data professionals – will likely find Nushell’s native\ndata handling and powerful pipeline capabilities a plus. Additionally, users\nwho value a more consistent and safer scripting experience might appreciate\nNushell’s language-first design and features like strong typing.</p>","tags":["nushell","shells"],"title":"Intro to Nushell"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"functions/functions_and_modules.md","preview_html":"<p>When you start exploring NixOS configurations or tools like Home Manager, you’ll\nencounter a concept called Nix Modules. Modules are also functions, but they\nbehave differently regarding their arguments, which can be a source of\nconfusion.</p><p><strong>What are NixOS Modules</strong>?</p><p>Nix Modules are a powerful system built on top of basic Nix functions, primarily\nused for declarative system configurations (like NixOS, Home Manager, NixOps,\netc.). They allow you to define parts of your system configuration in separate\nfiles that are then composed together.</p>","tags":["nixos","functions"],"title":"Functions and NixOS Modules"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_outputs.md","preview_html":"<p>Flake outputs are what the flake produces when built. Flakes can have multiple\noutputs simultaneously such as:</p><p><strong>Packages</strong>: Self-contained bundles that are built using derivations and\nprovide either some kind of software or dependencies of software.</p><p><a href=\"https://saylesss88.github.io/NixOS_Modules_Explained_3.html\">NixOS modules</a></p>","tags":["nixos","flakes","outputs"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_inputs.md","preview_html":"<p>The attribute <code>inputs</code> specifies the dependencies of a flake, as an attrset\nmapping input names to flake references.</p><p>If a repository provides a <code>flake.nix</code> you can include it as an input in your\n<code>flake.nix</code>.</p><p>For example, I like yazi as my file explorer and have been using helix as my\neditor. To be able to get yazi to work with helix I needed the latest versions\nof both yazi and helix. One way to get the latest versions was to add their\nflakes as inputs to my flake:</p>","tags":["nixos","flakes"],"title":"Flake Inputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_examples.md","preview_html":"<p>This chapter provides practical examples to illustrate the concepts discussed in\n“Nix Flakes Explained.”</p><p>NixOS modules and configurations offer us a powerful and composable way to\ndefine and share system configurations. Imagine we have several independent\n“players,” each with their own unique set of configurations or modules. How do\nwe combine these individual contributions into a single, cohesive system without\ndirectly altering each player’s original flake?</p><p>This example demonstrates how flakes can extend and compose each other, allowing\nyou to layer configurations on top of existing ones. This is particularly useful\nwhen you want to:</p>","tags":["nixos","flakes"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-27T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Pull_Requests.md","preview_html":"<p><img src=\"images/gruv16.png\" alt=\"gruv16\" /></p><p><strong>Pull requests</strong> communicate changes to a branch in a repository. Once a pull\nrequest is opened, you can review changes with collaborators and add follow-up\ncommits.</p><p>A <strong>pull request</strong> is a proposal to merge a set of changes from one branch\ninto another. In a pull request, collaborators can review and discuss the\nproposed set of changes before they integrate the changes into the main\ncodebase.</p>","tags":["nixos","nixpkgs"],"title":"Nix Pull Requests"},{"author":"saylesss88","collection":"blog","date":"2025-11-24T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unenc_impermanence.md","preview_html":"<p>Figure 1: Impermanence Logo: Image of the Impermanence logo. Sourced from the</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p>This guide is for an unencrypted setup, there are a few links at the end for\nencrypted setups. This guide follows the previous\n<a href=\"https://saylesss88.github.io/installation/unencrypted_setups.html\">minimal install guide</a>\nbut you should be able to adjust it carefully to meet your needs.</p>","tags":["nixos","btrfs","impermanence"],"title":"Impermanence (Unencrypted BTRFS)"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Working_with_Nixpkgs_Locally.md","preview_html":"<p><img src=\"images/server_rack.cleaned.png\" alt=\"server_rack\" /></p><p>Nixpkgs, the package repository for NixOS, is a powerful resource for building\nand customizing software.</p><p>Working with a local copy enhances development, debugging, and contribution\nworkflows.</p>","tags":["nixos","nixpkgs"],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"functions/practical_functions.md","preview_html":"<p><img src=\"images/coding6.png\" alt=\"coding6\" /></p><p><a href=\"https://gitlab.com/api/v4/projects/4207231/packages/generic/graphviz-releases/2.49.3/graphviz-2.49.3.tar.gz\">graphviz</a></p><p><a href=\"https://ftp.gnu.org/gnu/hello/hello-2.12.1.tar.gz\">hello</a></p>","tags":["nixos","functions"],"title":"Practical Nix Functions"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"flakes/overlays.md","preview_html":"<p><img src=\"../images/pokego.png\" alt=\"Pokego Logo\" />–<a href=\"https://github.com/rubiin/pokego\">pokego repo</a></p><p>Overlays are Nix functions that accept two arguments, <code>final</code> and <code>prev</code> and\nreturn a set of packages. Overlays are similar to <code>packageOverrides</code> as a way to\ncustomize Nixpkgs, <code>packageOverrides</code> acts as an overlay with only the <code>prev</code>\nargument. Therefore, <code>packageOverrides</code> is appropriate for basic use, but\noverlays are more powerful and easier to distribute.</p><p>Example:</p>","tags":["nixos","overlays","outputs"],"title":"Extending Flakes with Overlays"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Top-Level_Attributes.md","preview_html":"<p>This explanation is based on insights from Infinisil, a prominent figure in the\nNix community, to help clarify the concept of top-level attributes within NixOS\nmodules.</p><p>In a NixOS system, everything is built from a single “system derivation.” The\ncommand <code>nix-build '&lt;nixpkgs/nixos&gt;' -A system</code> initiates this build process.</p><p>The <code>-A system</code> part tells Nix to focus on the <code>system</code> attribute defined in the\n<code>'&lt;nixpkgs/nixos&gt;'</code> file (which is essentially <code>./default.nix</code> within the\nNixpkgs repository).</p>","tags":["nixos","modules"],"title":"Top-Level Attributes"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Nix_Functions.md","preview_html":"<p><img src=\"images/trees2.cleaned.png\" alt=\"trees2\" /></p><p><strong>Functions</strong> are the building blocks of Nix, appearing everywhere in Nix\nexpressions and configurations. Mastering them is essential for writing\neffective Nix code and understanding tools like NixOS and Home Manager. This\nchapter explores how Nix functions work, focusing on their <strong>single-argument\nnature</strong>, <strong>currying</strong>, <strong>partial application</strong>, and their role in <strong>modules</strong>.</p><p>A <strong>Nix Function</strong> is a rule that takes an input (called an <strong>argument</strong>) and\nproduces an <strong>output</strong> based on that input. Unlike many programming languages,\nNix functions are designed to take exactly one argument at a time. This unique\napproach, co","tags":["nix","functions"],"title":"Understanding Nix Functions"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Flakes_Explained.md","preview_html":"<p><img src=\"images/trees3.cleaned.png\" alt=\"trees3\" /></p><p>If you’re completely new, take a look at\n<a href=\"https://nixos.wiki/wiki/flakes#Installing_flakes\">this</a> to get flakes on your\nsystem.</p><p>For the Nix Flake man page type <code>man nix3 flake</code> and for a specific feature,\ntype something like <code>man nix3 flake-lock</code>.</p>","tags":["nix","flakes"],"title":"Nix Flakes Explained"}],"notes":[{"author":"saylesss88","collection":"notes","date":"2025-11-30T00:00:00+00:00","description":"Git","draft":false,"path":"vcs/git.md","preview_html":"<p>⚠️ <strong>Important</strong>: Never commit secrets (passwords, API keys, tokens, etc.) in\nplain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like sops-nix or agenix to\nkeep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>It’s also important to understand that <strong>all files in the <code>/nix/store</code> are\nworld-readable by default</strong> This has important security implications for anyone\nmanaging sensitive data on a NixOS system.</p><p>What Does “World-Readable” Mean?</p>","tags":["vcs","git"],"title":"Git"},{"author":"saylesss88","collection":"notes","date":"2025-11-29T00:00:00+00:00","description":null,"draft":false,"path":"Intro_to_Nix_Derivations.md","preview_html":"<p><img src=\"images/gruv10.png\" alt=\"gruv10\" /></p><p>Nix’s build instructions, known as <strong>derivations</strong>, are defined using the Nix\nLanguage. These derivations can describe anything from individual software\npackages to complete system configurations. The Nix package manager then\ndeterministically “realizes” (builds) these derivations, ensuring consistency\nbecause they rely solely on a predefined set of inputs.</p><p>Most things in NixOS are built around derivations. Your NixOS system is\ndescribed by such a single system derivation. When you want to apply a new\nconfiguration, <code>nixos-rebuild</code> handles the process:</p>","tags":["notes","derivations"],"title":"Intro to Derivations"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Comparing_Flakes_and_Traditional_Nix.md","preview_html":"<p>A key benefit of Nix Flakes is their <em>default</em> enforcement of <strong>pure\nevaluation</strong>.</p><p>In Nix, an <strong>impure operation</strong> depends on something <em>outside</em> its explicit\ninputs. Examples include:</p><p>Impurity leads to unpredictable builds that may differ across systems or time.</p>","tags":["flakes","nix"],"title":"Comparing Flakes and Traditional Nix"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/local_package.md","preview_html":"<p>This chapter demonstrates the fundamental pattern for creating a package. Every\npackage recipe is a file that declares a function. This function takes the\npackages dependencies as argument.</p><p>In this example we’ll make a simple package with <code>coreutils</code> and build it.\nDemonstrating the process of building and testing a local package.</p><p>This chapter will assume you have already have a cloned fork of Nixpkgs. I\nchoose to clone mine to the <code>~/src/</code> directory.</p>","tags":["nixos","nixpkgs"],"title":"Building Local Packages"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/fork_clone_contribute.md","preview_html":"<p>In the <a href=\"https://github.com/NixOS/nixpkgs\">Nixpkgs</a> Repository.</p><p>Click Fork, then Create a new Fork.</p><p>Uncheck the box “Only fork the <code>master</code> branch”, for development we will need\nmore branches.</p>","tags":["git","vcs","nixpkgs"],"title":"Fork, Clone, Contribute"}],"posts":[{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168318696+00:00","description":"\n","draft":false,"path":"index.md","preview_html":"","tags":[],"title":"index"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168318696+00:00","description":"\n","draft":false,"path":"nix/nix_language.md","preview_html":"","tags":[],"title":"nix_language"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168195203+00:00","description":"\n","draft":false,"path":"nix/nix_package_manager.md","preview_html":"","tags":[],"title":"nix_package_manager"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167428073+00:00","description":"\n","draft":false,"path":"installation/README.md","preview_html":"","tags":[],"title":"README"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167309018+00:00","description":"\n","draft":false,"path":"nix/encrypted_zfs.md","preview_html":"","tags":[],"title":"encrypted_zfs"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167259965+00:00","description":"\n","draft":false,"path":"nix/zfs_impermanence.md","preview_html":"","tags":[],"title":"zfs_impermanence"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167176938+00:00","description":"\n","draft":false,"path":"nix/hardening_NixOS.md","preview_html":"","tags":[],"title":"hardening_NixOS"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167132554+00:00","description":"\n","draft":false,"path":"nix/hardening_networking.md","preview_html":"","tags":[],"title":"hardening_networking"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167090715+00:00","description":"\n","draft":false,"path":"nix/browsing_security.md","preview_html":"","tags":[],"title":"browsing_security"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167049738+00:00","description":"\n","draft":false,"path":"nix/gpg-agent.md","preview_html":"","tags":[],"title":"gpg-agent"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167006516+00:00","description":"\n","draft":false,"path":"nix/README.md","preview_html":"","tags":[],"title":"README"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166954848+00:00","description":"\n","draft":false,"path":"nix/whonix_kvm.md","preview_html":"","tags":[],"title":"whonix_kvm"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166871982+00:00","description":"\n","draft":false,"path":"installation/enc/lanzaboote.md","preview_html":"","tags":[],"title":"lanzaboote"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166871982+00:00","description":"\n","draft":false,"path":"nix/secureboot_libvirt.md","preview_html":"","tags":[],"title":"secureboot_libvirt"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166659009+00:00","description":"\n","draft":false,"path":"nix/kvm.md","preview_html":"","tags":[],"title":"kvm"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166522020+00:00","description":"\n","draft":false,"path":"nix/cachix_devour.md","preview_html":"","tags":[],"title":"cachix_devour"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166452829+00:00","description":"\n","draft":false,"path":"vcs/README.md","preview_html":"","tags":[],"title":"README"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Debugging_and_Tracing_NixOS_Modules.md","preview_html":"<p>This chapter covers debugging NixOS modules, focusing on tracing module options\nand evaluating merges.</p><p><img src=\"images/coding4.png\" alt=\"404\" /></p><p><a href=\"https://saylesss88.github.io/posts/nix_modules_explained/\">nix-modules-explained</a></p>","tags":[],"title":"Debugging NixOS modules"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unencrypted_setups.md","preview_html":"<p>Figure 1: BTRFS Logo: Image of the BTRFS logo. Sourced from the BTRFS repo BTRFS\nlogo</p><p>Why I Chose BTRFS I chose BTRFS because I was already familiar with it from\nusing it with Arch Linux and I found it to be very easy to use. From what I’ve\nread, there are licensing issues between the Linux Kernel and ZFS which means\nthat ZFS is not part of the Linux Kernel; it’s maintained by the OpenZFS project\nand available as a separate kernel module. This can cause issues and make you\nthink more about your filesystem than I personally want to at this point.</p><p>A <strong>Btrfs subvolume</strong> is essentially a distinct section within a Btrfs\nfilesystem that maintains its own set of files and directories, along with a\nseparate inode numbering system. Unlike block-level partitions (such as ","tags":[],"title":"Unencrypted Install (BTRFS)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/USB_keyfile.md","preview_html":"<p>This allows you to use a USB stick for your keyfile, with a backup in case you\nwant or need it. There is a setting <code>fallbackToPassword</code> that protects you in\ncase something fails with the USB key.</p><p>First, I’ll show how to set up a dedicated USB stick for a keyfile. (i.e., one\nthat is only used for this). After that I will show the process of adding the\nkeyfile to a USB stick with existing data on it that you don’t want to lose.</p><p><strong>Generate the keyfile</strong></p>","tags":[],"title":"USB Keyfile Unlock"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets—like API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it’s also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":[],"title":"Secrets Management (Sops-Nix)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/encrypted_impermanence.md","preview_html":"<p>❗ Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><p>As a system operates, it gradually accumulates state on its root partition. This\nstate is stored in various directories such as <code>/etc</code> and <code>/var</code>, capturing all\nthe configuration changes, logs, and o","tags":[],"title":"Impermanence (Encrypted)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/enc_install.md","preview_html":"<p>NixOS supports file systems that are encrypted using LUKS (Linux Unified Key\nSetup). This guide walks you through an encrypted NixOS installation using Disko\nfor disk management and Btrfs for subvolumes. It is designed for users who want\nfull disk encryption and a modern filesystem layout. If you prefer an\nunencrypted setup, you can skip the LUKS and encryption steps, but this guide\nfocuses on security and flexibility.</p><p>If you choose to set up impermanence, ensure it matches your install. Encrypted\nSetup with Encrypted Impermanence and Unencrypted Setup with Unencrypted\nImpermanence.</p><p>❗ NOTE: This is a bit convoluted, there are a few paths you can follow. If\nyou choose to use the starter repo (<a href=\"https://github.com/saylesss88/my-flake\">https://github.com/saylesss88/my-fl","tags":[],"title":"Encrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/overlay.md","preview_html":"<p>The following is done with a local clone of Nixpkgs located at <code>~/src/nixpkgs</code>.</p><p>In this example, we will create an overlay to override the version of\n<code>btrfs-progs</code>. In the root directory of our local clone of Nixpkgs\n(i.e.<code>~/src/nixpkgs</code>) we can run the following command to locate <code>btrfs-progs</code>\nwithin Nixpkgs:</p><pre><code class=\"language-bash\">fd 'btrfs-progs' .\n./pkgs/by-name/bt/btrfs-progs/\n</code></pre>\n<p>Open the <code>package.nix</code> in the above directory and copy the <code>src</code> block within\nthe <code>stdenv.mkDerivation</code> block like so:</p>","tags":[],"title":"Version overrides with Overlays"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Package_Definitions_Explained.md","preview_html":"<p><img src=\"images/coding2.png\" alt=\"coding2\" /></p><p>In Nix, the concept of a <strong>package</strong> can refer to two things:</p><p>A collection of files and data that constitute a piece of software or an\nartifact.</p>","tags":[],"title":"Package Definitions Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"NixOS_Modules_Explained.md","preview_html":"<p><img src=\"images/buildings1.png\" alt=\"buildings\" /></p><p><strong>TL;DR</strong>: In this chapter, we will break down the Nix module system used by\nboth NixOS and Home-Manager. We will discuss using home-manager as a module and\nthe flexibility that modules give us. We will touch on options and break down\nthe <code>vim</code> module from the Nixpkgs collection. Finally we will display how to\ntest modules with the repl.</p><p>Your <code>configuration.nix</code> is a module. For the Nixpkgs collection most modules\nare in <code>nixos/modules</code>.</p>","tags":[],"title":"Nix Module System Explained"}]},"entries":[{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168318696+00:00","description":"\n","draft":false,"path":"index.md","preview_html":"","tags":[],"title":"index"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168318696+00:00","description":"\n","draft":false,"path":"nix/nix_language.md","preview_html":"","tags":[],"title":"nix_language"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.168195203+00:00","description":"\n","draft":false,"path":"nix/nix_package_manager.md","preview_html":"","tags":[],"title":"nix_package_manager"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167428073+00:00","description":"\n","draft":false,"path":"installation/README.md","preview_html":"","tags":[],"title":"README"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167309018+00:00","description":"\n","draft":false,"path":"nix/encrypted_zfs.md","preview_html":"","tags":[],"title":"encrypted_zfs"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167259965+00:00","description":"\n","draft":false,"path":"nix/zfs_impermanence.md","preview_html":"","tags":[],"title":"zfs_impermanence"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167176938+00:00","description":"\n","draft":false,"path":"nix/hardening_NixOS.md","preview_html":"","tags":[],"title":"hardening_NixOS"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167132554+00:00","description":"\n","draft":false,"path":"nix/hardening_networking.md","preview_html":"","tags":[],"title":"hardening_networking"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167090715+00:00","description":"\n","draft":false,"path":"nix/browsing_security.md","preview_html":"","tags":[],"title":"browsing_security"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167049738+00:00","description":"\n","draft":false,"path":"nix/gpg-agent.md","preview_html":"","tags":[],"title":"gpg-agent"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.167006516+00:00","description":"\n","draft":false,"path":"nix/README.md","preview_html":"","tags":[],"title":"README"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166954848+00:00","description":"\n","draft":false,"path":"nix/whonix_kvm.md","preview_html":"","tags":[],"title":"whonix_kvm"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166871982+00:00","description":"\n","draft":false,"path":"installation/enc/lanzaboote.md","preview_html":"","tags":[],"title":"lanzaboote"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166871982+00:00","description":"\n","draft":false,"path":"nix/secureboot_libvirt.md","preview_html":"","tags":[],"title":"secureboot_libvirt"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166659009+00:00","description":"\n","draft":false,"path":"nix/kvm.md","preview_html":"","tags":[],"title":"kvm"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166522020+00:00","description":"\n","draft":false,"path":"nix/cachix_devour.md","preview_html":"","tags":[],"title":"cachix_devour"},{"author":null,"collection":null,"date":"2026-01-20T12:11:31.166452829+00:00","description":"\n","draft":false,"path":"vcs/README.md","preview_html":"","tags":[],"title":"README"},{"author":"saylesss88","collection":"blog","date":"2026-01-11T00:00:00+00:00","description":null,"draft":false,"path":"nixos_containers.md","preview_html":"<p><img src=\"images/boxes.cleaned.png\" alt=\"boxes\" /></p><p>NixOS containers are lightweight <code>systemd-nspawn</code> containers managed\ndeclaratively through your NixOS configuration. They allow you to run separate,\nminimal NixOS instances on the same machine, each with its own services,\npackages, and (optionally) network stack.</p><p>❗ NixOS’ containers do not provide full security out of the box (just like\ndocker). They do give you a separate chroot, but a privileged user (root) in a\ncontainer can escape the container and become root on the host system.\n–<a href=\"https://blog.beardhatcode.be/2020/12/Declarative-Nixos-Containers.html\">beardhatcode Declarative-Nixos-Containers</a></p>","tags":["nixos","containers"],"title":"NixOS Containers"},{"author":"saylesss88","collection":"blog","date":"2025-12-31T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/rust_crate_to_nixpkgs.md","preview_html":"<p>NOTE: This example assumes you’re packaging a crate that’s already on\ncrates.io, or you’re packaging an existing Rust project for nixpkgs.</p><p>Nixpkgs is a big repository, so it helps to start with a focused workflow:\ncreate a branch, add a package under <code>pkgs/by-name/</code>, build it, then open a PR.</p><pre><code class=\"language-bash\">git clone git@github.com:your-user/nixpkgs.git\ncd nixpkgs\ngit remote add upstream git@github.com:NixOS/nixpkgs.git\n</code></pre>\n<p>(SSH avoids HTTPS helper issues)</p>","tags":["packaging","rust","nixpkgs"],"title":"Packaging a Rust crate for Nixpkgs"},{"author":"saylesss88","collection":"blog","date":"2025-12-08T00:00:00+00:00","description":"JJ Version Control","draft":false,"path":"vcs/jujutsu.md","preview_html":"<p><img src=\"../images/jujutsu.png\" alt=\"JJ Logo\" /></p><p>⚠️ <strong>Security Reminder</strong>: Never commit secrets (passwords, API keys, tokens,\netc.) in plain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like <code>sops-nix</code> or <code>agenix</code>\nto keep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>Jujutsu (jj) is a modern, Git-compatible version control system designed to\nsimplify and improve the developer experience. It offers a new approach to\ndistributed version control, focusing on a more intuitive workflow, powerful\nundo capabilities, and a branchless model that reduces common pitfalls of Git.</p>","tags":["vcs","jj"],"title":"Jujutsu (JJ)"},{"author":"saylesss88","collection":"blog","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"flakes/helix_flake.md","preview_html":"<p><img src=\"../images/helix.png\" alt=\"Helix Logo\" />–<a href=\"https://helix-editor.com/\">helix-editor.com</a></p><p>As we’ve seen from previous examples, the helix editor repository includes a few\n<code>.nix</code> files including a <code>flake.nix</code>. Their flake uses a lot of idiomatic Nix\ncode and advanced features. First I will break down their <code>flake.nix</code> and\n<code>default.nix</code> to understand why they do certain things. And finally, we will\nchange the build to “debug” mode demonstrating how easily you can modify the\nbehavior of a package defined within a Nix flake without changing the original\nsource code or the upstream flake directly.</p><pre><code class=\"language-bash\">git clone https://github.com/helix-editor/helix.git\ncd helix\n</code></pre>\n<p>When you enter ","tags":["nixos","flakes","helix"],"title":"Understanding the Helix Flake"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"intro_to_nushell_on_NixOS.md","preview_html":"<p><img src=\"images/nu.png\" alt=\"Nu\" /></p><p><strong>TL;DR</strong>:I recently switched default shells from zsh to nushell, this post is\nabout some of the challenges and advantages of using nushell with NixOS.</p><p>While the average user might not immediately see significant advantages, those\nwho frequently work with structured data formats like JSON, YAML, and CSV –\nsuch as developers interacting with APIs, system administrators managing\nconfigurations, and data professionals – will likely find Nushell’s native\ndata handling and powerful pipeline capabilities a plus. Additionally, users\nwho value a more consistent and safer scripting experience might appreciate\nNushell’s language-first design and features like strong typing.</p>","tags":["nushell","shells"],"title":"Intro to Nushell"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"functions/functions_and_modules.md","preview_html":"<p>When you start exploring NixOS configurations or tools like Home Manager, you’ll\nencounter a concept called Nix Modules. Modules are also functions, but they\nbehave differently regarding their arguments, which can be a source of\nconfusion.</p><p><strong>What are NixOS Modules</strong>?</p><p>Nix Modules are a powerful system built on top of basic Nix functions, primarily\nused for declarative system configurations (like NixOS, Home Manager, NixOps,\netc.). They allow you to define parts of your system configuration in separate\nfiles that are then composed together.</p>","tags":["nixos","functions"],"title":"Functions and NixOS Modules"},{"author":"saylesss88","collection":"notes","date":"2025-11-30T00:00:00+00:00","description":"Git","draft":false,"path":"vcs/git.md","preview_html":"<p>⚠️ <strong>Important</strong>: Never commit secrets (passwords, API keys, tokens, etc.) in\nplain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like sops-nix or agenix to\nkeep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>It’s also important to understand that <strong>all files in the <code>/nix/store</code> are\nworld-readable by default</strong> This has important security implications for anyone\nmanaging sensitive data on a NixOS system.</p><p>What Does “World-Readable” Mean?</p>","tags":["vcs","git"],"title":"Git"},{"author":"saylesss88","collection":"notes","date":"2025-11-29T00:00:00+00:00","description":null,"draft":false,"path":"Intro_to_Nix_Derivations.md","preview_html":"<p><img src=\"images/gruv10.png\" alt=\"gruv10\" /></p><p>Nix’s build instructions, known as <strong>derivations</strong>, are defined using the Nix\nLanguage. These derivations can describe anything from individual software\npackages to complete system configurations. The Nix package manager then\ndeterministically “realizes” (builds) these derivations, ensuring consistency\nbecause they rely solely on a predefined set of inputs.</p><p>Most things in NixOS are built around derivations. Your NixOS system is\ndescribed by such a single system derivation. When you want to apply a new\nconfiguration, <code>nixos-rebuild</code> handles the process:</p>","tags":["notes","derivations"],"title":"Intro to Derivations"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_outputs.md","preview_html":"<p>Flake outputs are what the flake produces when built. Flakes can have multiple\noutputs simultaneously such as:</p><p><strong>Packages</strong>: Self-contained bundles that are built using derivations and\nprovide either some kind of software or dependencies of software.</p><p><a href=\"https://saylesss88.github.io/NixOS_Modules_Explained_3.html\">NixOS modules</a></p>","tags":["nixos","flakes","outputs"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_inputs.md","preview_html":"<p>The attribute <code>inputs</code> specifies the dependencies of a flake, as an attrset\nmapping input names to flake references.</p><p>If a repository provides a <code>flake.nix</code> you can include it as an input in your\n<code>flake.nix</code>.</p><p>For example, I like yazi as my file explorer and have been using helix as my\neditor. To be able to get yazi to work with helix I needed the latest versions\nof both yazi and helix. One way to get the latest versions was to add their\nflakes as inputs to my flake:</p>","tags":["nixos","flakes"],"title":"Flake Inputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_examples.md","preview_html":"<p>This chapter provides practical examples to illustrate the concepts discussed in\n“Nix Flakes Explained.”</p><p>NixOS modules and configurations offer us a powerful and composable way to\ndefine and share system configurations. Imagine we have several independent\n“players,” each with their own unique set of configurations or modules. How do\nwe combine these individual contributions into a single, cohesive system without\ndirectly altering each player’s original flake?</p><p>This example demonstrates how flakes can extend and compose each other, allowing\nyou to layer configurations on top of existing ones. This is particularly useful\nwhen you want to:</p>","tags":["nixos","flakes"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-27T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Pull_Requests.md","preview_html":"<p><img src=\"images/gruv16.png\" alt=\"gruv16\" /></p><p><strong>Pull requests</strong> communicate changes to a branch in a repository. Once a pull\nrequest is opened, you can review changes with collaborators and add follow-up\ncommits.</p><p>A <strong>pull request</strong> is a proposal to merge a set of changes from one branch\ninto another. In a pull request, collaborators can review and discuss the\nproposed set of changes before they integrate the changes into the main\ncodebase.</p>","tags":["nixos","nixpkgs"],"title":"Nix Pull Requests"},{"author":"saylesss88","collection":"blog","date":"2025-11-24T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unenc_impermanence.md","preview_html":"<p>Figure 1: Impermanence Logo: Image of the Impermanence logo. Sourced from the</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p>This guide is for an unencrypted setup, there are a few links at the end for\nencrypted setups. This guide follows the previous\n<a href=\"https://saylesss88.github.io/installation/unencrypted_setups.html\">minimal install guide</a>\nbut you should be able to adjust it carefully to meet your needs.</p>","tags":["nixos","btrfs","impermanence"],"title":"Impermanence (Unencrypted BTRFS)"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Working_with_Nixpkgs_Locally.md","preview_html":"<p><img src=\"images/server_rack.cleaned.png\" alt=\"server_rack\" /></p><p>Nixpkgs, the package repository for NixOS, is a powerful resource for building\nand customizing software.</p><p>Working with a local copy enhances development, debugging, and contribution\nworkflows.</p>","tags":["nixos","nixpkgs"],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Debugging_and_Tracing_NixOS_Modules.md","preview_html":"<p>This chapter covers debugging NixOS modules, focusing on tracing module options\nand evaluating merges.</p><p><img src=\"images/coding4.png\" alt=\"404\" /></p><p><a href=\"https://saylesss88.github.io/posts/nix_modules_explained/\">nix-modules-explained</a></p>","tags":[],"title":"Debugging NixOS modules"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Comparing_Flakes_and_Traditional_Nix.md","preview_html":"<p>A key benefit of Nix Flakes is their <em>default</em> enforcement of <strong>pure\nevaluation</strong>.</p><p>In Nix, an <strong>impure operation</strong> depends on something <em>outside</em> its explicit\ninputs. Examples include:</p><p>Impurity leads to unpredictable builds that may differ across systems or time.</p>","tags":["flakes","nix"],"title":"Comparing Flakes and Traditional Nix"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"functions/practical_functions.md","preview_html":"<p><img src=\"images/coding6.png\" alt=\"coding6\" /></p><p><a href=\"https://gitlab.com/api/v4/projects/4207231/packages/generic/graphviz-releases/2.49.3/graphviz-2.49.3.tar.gz\">graphviz</a></p><p><a href=\"https://ftp.gnu.org/gnu/hello/hello-2.12.1.tar.gz\">hello</a></p>","tags":["nixos","functions"],"title":"Practical Nix Functions"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"flakes/overlays.md","preview_html":"<p><img src=\"../images/pokego.png\" alt=\"Pokego Logo\" />–<a href=\"https://github.com/rubiin/pokego\">pokego repo</a></p><p>Overlays are Nix functions that accept two arguments, <code>final</code> and <code>prev</code> and\nreturn a set of packages. Overlays are similar to <code>packageOverrides</code> as a way to\ncustomize Nixpkgs, <code>packageOverrides</code> acts as an overlay with only the <code>prev</code>\nargument. Therefore, <code>packageOverrides</code> is appropriate for basic use, but\noverlays are more powerful and easier to distribute.</p><p>Example:</p>","tags":["nixos","overlays","outputs"],"title":"Extending Flakes with Overlays"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unencrypted_setups.md","preview_html":"<p>Figure 1: BTRFS Logo: Image of the BTRFS logo. Sourced from the BTRFS repo BTRFS\nlogo</p><p>Why I Chose BTRFS I chose BTRFS because I was already familiar with it from\nusing it with Arch Linux and I found it to be very easy to use. From what I’ve\nread, there are licensing issues between the Linux Kernel and ZFS which means\nthat ZFS is not part of the Linux Kernel; it’s maintained by the OpenZFS project\nand available as a separate kernel module. This can cause issues and make you\nthink more about your filesystem than I personally want to at this point.</p><p>A <strong>Btrfs subvolume</strong> is essentially a distinct section within a Btrfs\nfilesystem that maintains its own set of files and directories, along with a\nseparate inode numbering system. Unlike block-level partitions (such as ","tags":[],"title":"Unencrypted Install (BTRFS)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/USB_keyfile.md","preview_html":"<p>This allows you to use a USB stick for your keyfile, with a backup in case you\nwant or need it. There is a setting <code>fallbackToPassword</code> that protects you in\ncase something fails with the USB key.</p><p>First, I’ll show how to set up a dedicated USB stick for a keyfile. (i.e., one\nthat is only used for this). After that I will show the process of adding the\nkeyfile to a USB stick with existing data on it that you don’t want to lose.</p><p><strong>Generate the keyfile</strong></p>","tags":[],"title":"USB Keyfile Unlock"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets—like API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it’s also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":[],"title":"Secrets Management (Sops-Nix)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/encrypted_impermanence.md","preview_html":"<p>❗ Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><p>As a system operates, it gradually accumulates state on its root partition. This\nstate is stored in various directories such as <code>/etc</code> and <code>/var</code>, capturing all\nthe configuration changes, logs, and o","tags":[],"title":"Impermanence (Encrypted)"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/enc_install.md","preview_html":"<p>NixOS supports file systems that are encrypted using LUKS (Linux Unified Key\nSetup). This guide walks you through an encrypted NixOS installation using Disko\nfor disk management and Btrfs for subvolumes. It is designed for users who want\nfull disk encryption and a modern filesystem layout. If you prefer an\nunencrypted setup, you can skip the LUKS and encryption steps, but this guide\nfocuses on security and flexibility.</p><p>If you choose to set up impermanence, ensure it matches your install. Encrypted\nSetup with Encrypted Impermanence and Unencrypted Setup with Unencrypted\nImpermanence.</p><p>❗ NOTE: This is a bit convoluted, there are a few paths you can follow. If\nyou choose to use the starter repo (<a href=\"https://github.com/saylesss88/my-flake\">https://github.com/saylesss88/my-fl","tags":[],"title":"Encrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/overlay.md","preview_html":"<p>The following is done with a local clone of Nixpkgs located at <code>~/src/nixpkgs</code>.</p><p>In this example, we will create an overlay to override the version of\n<code>btrfs-progs</code>. In the root directory of our local clone of Nixpkgs\n(i.e.<code>~/src/nixpkgs</code>) we can run the following command to locate <code>btrfs-progs</code>\nwithin Nixpkgs:</p><pre><code class=\"language-bash\">fd 'btrfs-progs' .\n./pkgs/by-name/bt/btrfs-progs/\n</code></pre>\n<p>Open the <code>package.nix</code> in the above directory and copy the <code>src</code> block within\nthe <code>stdenv.mkDerivation</code> block like so:</p>","tags":[],"title":"Version overrides with Overlays"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/local_package.md","preview_html":"<p>This chapter demonstrates the fundamental pattern for creating a package. Every\npackage recipe is a file that declares a function. This function takes the\npackages dependencies as argument.</p><p>In this example we’ll make a simple package with <code>coreutils</code> and build it.\nDemonstrating the process of building and testing a local package.</p><p>This chapter will assume you have already have a cloned fork of Nixpkgs. I\nchoose to clone mine to the <code>~/src/</code> directory.</p>","tags":["nixos","nixpkgs"],"title":"Building Local Packages"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/fork_clone_contribute.md","preview_html":"<p>In the <a href=\"https://github.com/NixOS/nixpkgs\">Nixpkgs</a> Repository.</p><p>Click Fork, then Create a new Fork.</p><p>Uncheck the box “Only fork the <code>master</code> branch”, for development we will need\nmore branches.</p>","tags":["git","vcs","nixpkgs"],"title":"Fork, Clone, Contribute"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Top-Level_Attributes.md","preview_html":"<p>This explanation is based on insights from Infinisil, a prominent figure in the\nNix community, to help clarify the concept of top-level attributes within NixOS\nmodules.</p><p>In a NixOS system, everything is built from a single “system derivation.” The\ncommand <code>nix-build '&lt;nixpkgs/nixos&gt;' -A system</code> initiates this build process.</p><p>The <code>-A system</code> part tells Nix to focus on the <code>system</code> attribute defined in the\n<code>'&lt;nixpkgs/nixos&gt;'</code> file (which is essentially <code>./default.nix</code> within the\nNixpkgs repository).</p>","tags":["nixos","modules"],"title":"Top-Level Attributes"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Nix_Functions.md","preview_html":"<p><img src=\"images/trees2.cleaned.png\" alt=\"trees2\" /></p><p><strong>Functions</strong> are the building blocks of Nix, appearing everywhere in Nix\nexpressions and configurations. Mastering them is essential for writing\neffective Nix code and understanding tools like NixOS and Home Manager. This\nchapter explores how Nix functions work, focusing on their <strong>single-argument\nnature</strong>, <strong>currying</strong>, <strong>partial application</strong>, and their role in <strong>modules</strong>.</p><p>A <strong>Nix Function</strong> is a rule that takes an input (called an <strong>argument</strong>) and\nproduces an <strong>output</strong> based on that input. Unlike many programming languages,\nNix functions are designed to take exactly one argument at a time. This unique\napproach, co","tags":["nix","functions"],"title":"Understanding Nix Functions"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Package_Definitions_Explained.md","preview_html":"<p><img src=\"images/coding2.png\" alt=\"coding2\" /></p><p>In Nix, the concept of a <strong>package</strong> can refer to two things:</p><p>A collection of files and data that constitute a piece of software or an\nartifact.</p>","tags":[],"title":"Package Definitions Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"NixOS_Modules_Explained.md","preview_html":"<p><img src=\"images/buildings1.png\" alt=\"buildings\" /></p><p><strong>TL;DR</strong>: In this chapter, we will break down the Nix module system used by\nboth NixOS and Home-Manager. We will discuss using home-manager as a module and\nthe flexibility that modules give us. We will touch on options and break down\nthe <code>vim</code> module from the Nixpkgs collection. Finally we will display how to\ntest modules with the repl.</p><p>Your <code>configuration.nix</code> is a module. For the Nixpkgs collection most modules\nare in <code>nixos/modules</code>.</p>","tags":[],"title":"Nix Module System Explained"},{"author":"saylesss88","collection":"blog","date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Flakes_Explained.md","preview_html":"<p><img src=\"images/trees3.cleaned.png\" alt=\"trees3\" /></p><p>If you’re completely new, take a look at\n<a href=\"https://nixos.wiki/wiki/flakes#Installing_flakes\">this</a> to get flakes on your\nsystem.</p><p>For the Nix Flake man page type <code>man nix3 flake</code> and for a specific feature,\ntype something like <code>man nix3 flake-lock</code>.</p>","tags":["nix","flakes"],"title":"Nix Flakes Explained"}],"generated_at":"2026-01-20T12:36:50.430210514+00:00"};</script>
<h1 id="version-control-with-git"><a class="header" href="#version-control-with-git">Version Control with Git</a></h1>
<details>
<summary> ✔️ Click to Expand Table of Contents</summary>
<ul>
<li><a href="#limitations-of-nixos-rollbacks">Limitations of NixOS Rollbacks</a></li>
<li><a href="#how-git-helps">How Git Helps</a></li>
<li><a href="#git-tips">Git Tips</a></li>
<li><a href="#atomic-commits">Atomic Commits</a>
<ul>
<li><a href="#tips-for-keeping-commits-atomic-with-a-linear-history">Tips for Keeping Commits Atomic with a Linear History</a></li>
</ul>
</li>
<li><a href="#time-travel-in-git">Time Travel in Git</a>
<ul>
<li><a href="#a-basic-git-workflow">A Basic Git Workflow</a></li>
<li><a href="#basic-branching">Basic Branching</a></li>
</ul>
</li>
<li><a href="#nix-flake-update-example-with-branches">Nix flake update example with branches</a></li>
<li><a href="#rebasing-branches">Rebasing Branches</a></li>
<li><a href="#configure-git-declaratively">Configure Git Declaratively</a>
<ul>
<li><a href="#resources">Resources</a></li>
</ul>
</li>
</ul>
</details>
<!-- ![Git Logo](../images/git1.png) -->
<p>⚠️ <strong>Important</strong>: Never commit secrets (passwords, API keys, tokens, etc.) in
plain text to your Git repository. If you plan to publish your NixOS
configuration, always use a secrets management tool like sops-nix or agenix to
keep sensitive data safe. See the
<a href="https://saylesss88.github.io/installation/enc/sops-nix.html">Sops-Nix Guide</a>
for details.</p>
<p>It’s also important to understand that <strong>all files in the <code>/nix/store</code> are
world-readable by default</strong> This has important security implications for anyone
managing sensitive data on a NixOS system.</p>
<p>What Does “World-Readable” Mean?</p>
<ul>
<li>
<p>All files in /nix/store are readable by any user on the system.</p>
</li>
<li>
<p>This is by design, the nix store is intended to be shared, immutable store of
all packages and configuration files.</p>
</li>
<li>
<p>Permissions are typically set to <code>r-xr-xr-x</code>(read and execute for everyone)</p>
</li>
</ul>
<p><strong>Security Implications</strong></p>
<ul>
<li>
<p>Never store secrets or sensitive data in plane text in the Nix store.</p>
</li>
<li>
<p>If you include secrets directly in your configuration, they will end up in the
<code>/nix/store</code> and be accessible to any user or process on the system.</p>
</li>
<li>
<p>This applies to files, environment variables, and any data embedded in
derivations.</p>
</li>
</ul>
<p><strong>Best Practices</strong></p>
<ul>
<li>
<p>Always use a secrets management tool (like <code>sops-nix</code> or <code>agenix</code>) that
decrypts secrets at activation time and stores them outside the Nix store,
with restricted permissions.</p>
</li>
<li>
<p>Do not embed secrets directly in Nix expressions or configuration files that
will be build into the store.</p>
</li>
<li>
<p>Even hashed passwords can be vulnerable when stored in a public repository, be
conscious of what you store where.</p>
</li>
<li>
<p>If you’re unsure about what’s safe to share, start with a private repository.
This gives you time to learn about secrets management and review your
configuration before making anything public.</p>
</li>
</ul>
<p>First, I’ll briefly explain some of the limitations of NixOS Rollbacks and then
I’ll go into how Git compliments them.</p>
<h2 id="limitations-of-nixos-rollbacks"><a class="header" href="#limitations-of-nixos-rollbacks">Limitations of NixOS Rollbacks</a></h2>
<p>NixOS is famous for its ability to roll back to previous system generations,
either from the boot menu or with commands like <code>nixos-rebuild --rollback</code>.</p>
<p>When you perform rollbacks in NixOS, whether from the boot menu or using
commands like <code>nixos-rebuild --rollback</code> only the contents and symlinks managed
by the Nix store are affected. The rollback works by switching which system
generation is active, atomically updating symlinks to point to the previous
version of all packages, <code>systemd</code> units and services stored in <code>/nix/store</code>.</p>
<p>However, it’s important to understand what these rollbacks actually do and what
they don’t do. What NixOS Rollbacks Cover</p>
<ul>
<li>
<p>System generations: When you rebuild your system, NixOS creates a new
“generation” that you can boot into or roll back to. This includes all
packages, services, and system configuration managed by Nix.</p>
</li>
<li>
<p>Quick recovery: If an upgrade breaks your system, you can easily select an
older generation at boot and get back to a working state</p>
</li>
</ul>
<p><strong>Key Limitations</strong>:</p>
<ul>
<li>
<p><strong>Configuration files are not reverted</strong>: Rolling back only changes which
system generation is active, it does not revert your actual configuration
files (like <code>configuration.nix</code> or your flake files)</p>
</li>
<li>
<p><strong>User data and service data are not rolled back</strong>: Only files managed by Nix
are affected. Databases, user files, and other persistent data remain
unchanged, which can cause problems if, for example, a service migrates its
database schema during an upgrade</p>
</li>
<li>
<p><strong>Manual changes persist</strong>: Any manual edits to configuration files or system
state outside of Nix are not reverted by a rollback</p>
</li>
</ul>
<h2 id="how-git-helps"><a class="header" href="#how-git-helps">How Git Helps</a></h2>
<!-- ![Git Logo 2](../images/git3.png) -->
<ul>
<li>
<p>The <a href="https://docs.github.com/en/github-cli/github-cli/quickstart">gh-cli</a>,
simplifies quite a few things for working with GitHub from the command line.</p>
</li>
<li>
<p><strong>Tracks every configuration change</strong>: By version-controlling your NixOS
configs with Git, you can easily see what changed, when, and why.</p>
</li>
<li>
<p><strong>True config rollback</strong>: If a configuration change causes issues, you can use
<code>git checkout</code> or <code>git revert</code> to restore your config files to a previous good
state, then rebuild your system</p>
</li>
<li>
<p><strong>Safer experimentation</strong>: You can confidently try new settings or upgrades,
knowing you can roll back both your system state (with NixOS generations) and
your config files (with Git).</p>
</li>
<li>
<p><strong>Collaboration and backup</strong>: Git lets you share your setup, collaborate with
others, and restore your configuration if your machine is lost or damaged.</p>
</li>
</ul>
<p>In summary: NixOS rollbacks are powerful for system state, but they don’t manage
your configuration file history. Git fills this gap, giving you full control and
traceability over your NixOS configs making your system both robust and truly
reproducible. Version control is a fundamental tool for anyone working with
NixOS, whether you’re customizing your desktop, managing servers, or sharing
your configuration with others. Git is the most popular version control system
and is used by the NixOS community to track, share, and back up system
configurations.</p>
<p><strong>Why use Git with NixOS?</strong></p>
<ul>
<li>
<p><strong>Track every change</strong>: Git lets you record every modification to your
configuration files, so you can always see what changed, when, and why.</p>
</li>
<li>
<p><strong>Experiment safely</strong>: Try new settings or packages without fear—if something
breaks, you can easily roll back to a previous working state.</p>
</li>
<li>
<p><strong>Sync across machines</strong>: With Git, you can keep your NixOS setups in sync
between your laptop, desktop, or servers, and collaborate with others.</p>
</li>
<li>
<p><strong>Disaster recovery</strong>: Accidentally delete your config? With Git, you can
restore it from your repository in minutes.</p>
</li>
</ul>
<p>Installing Git on NixOS</p>
<p>You can install Git by adding it to your system packages in your
configuration.nix or via Home Manager:</p>
<h2 id="git-tips"><a class="header" href="#git-tips">Git Tips</a></h2>
<!-- ![Octocat](../images/octocat.png) -->
<p>If you develop good git practices on your own repositories it will make it
easier to contribute with others as well as get help from others.</p>
<h2 id="atomic-commits"><a class="header" href="#atomic-commits">Atomic Commits</a></h2>
<p><strong>Atomic commits</strong> are a best practice in Git where each commit represents a
single, focused, and complete change to the codebase. The main characteristics
of atomic commits are:</p>
<ul>
<li>
<p><strong>One purpose</strong>: Each commit should address only one logical change or task.</p>
</li>
<li>
<p><strong>Complete</strong>: The commit should leave the codebase in a working state.</p>
</li>
<li>
<p><strong>Descriptive</strong>: The commit message should be able to clearly summarize the
change in a single sentence.</p>
</li>
</ul>
<p><strong>Why Atomic Commits Matter</strong></p>
<ul>
<li>
<p><strong>Easier debugging</strong>: You can use tools like <code>git bisect</code> to quickly find
which commit introduced a bug, since each commit is isolated.</p>
</li>
<li>
<p><strong>Simpler reverts</strong>: You can revert without affecting unrelated changes.</p>
</li>
<li>
<p><strong>Better collaboration</strong>: Code reviews and merges are more manageable when
changes are small and focused.</p>
</li>
</ul>
<p>When you lump together a bunch of changes into a single commit it can lead to
quite a few undesirable consequences. They make it harder to track down bugs,
it’s more difficult to revert undesired changes without reverting desired ones,
make larger tickets harder to manage.</p>
<p><strong>Every time a logical component is completed, commit it</strong>. Smaller commits make
it easier for other devs and yourself to understand the changes and roll them
back if necessary. This also makes it easier to share your code with others to
get help when needed and makes merge conflicts less frequent and complex.</p>
<p><strong>Finish the component, then commit it</strong>: There’s really no reason to commit
unfinished work, use <code>git stash</code> for unfinished work and <code>git commit</code> for when
the logical component is complete. Use common sense and break complex components
into logical chunks that can be finished quickly to allow yourself to commit
more often.</p>
<p><strong>Write Good Commit Messages</strong>: Begin with a summary of your changes, add a line
of whitespace between the summary and the body of your message. Make it clear
why this change was necessary. Use consistent language with generated messages
from commands like <code>git merge</code> which is imperative and present tense
(<code>&lt;&lt;change&gt;&gt;</code>, not <code>&lt;&lt;changed&gt;&gt;</code> or <code>&lt;&lt;changes&gt;&gt;</code>).</p>
<h3 id="tips-for-keeping-commits-atomic-with-a-linear-history"><a class="header" href="#tips-for-keeping-commits-atomic-with-a-linear-history">Tips for Keeping Commits Atomic with a Linear History</a></h3>
<p>Squashing limits the benefits of atomic commits as it combines them all into a
single commit as if you didn’t take the time to write them all out atomically.</p>
<p>🧠 Why Rebasing Wins for Linear History</p>
<ul>
<li>
<p>No Merge Bubbles: Rebasing avoids those extra merge commits that clutter
<code>git log --graph</code>. You get a clean, readable timeline.</p>
</li>
<li>
<p>Atomic Commit Integrity: Each commit stands alone and tells a story. Rebasing
preserves that narrative without diluting it with merge noise.</p>
</li>
<li>
<p>Better Blame &amp; Bisect: Tools like git blame and git bisect work best when
history is linear and logical.</p>
</li>
<li>
<p>Time-Travel Simplicity: Cherry-picking or reverting is easier when commits
aren’t tangled in merge commits.</p>
</li>
</ul>
<p>By default, when you run <code>git pull</code> git merges the commits into your local repo.
To change this to a rebase you can set the following:</p>
<pre><code class="language-bash">git config --global pull.rebase true
git config --global rebase.autoStash true
git config --global fetch.prune true  # auto delets remote-tracking branches that no longer exist
git config --global pull.ff only          # blocks merge pulls
</code></pre>
<p>Note: With pull.ff only pulls will fail if they would have had to merge. This
could happen if your local branch has diverged from the remote (e.g., someone
pushed new commits and you also committed locally) <code>git pull</code> will throw an
error like:</p>
<pre><code class="language-bash">fatal: Not possible to fast-forward, aborting.
</code></pre>
<p><strong>How to fix it</strong></p>
<p>You basically do what Git won’t auto-do:</p>
<pre><code class="language-bash">git fetch origin
git rebase origin/main
</code></pre>
<p>This rewinds your local commits, applies remote commits, and replays yours on
top, keeping the history linear.</p>
<p>If you don’t care about your local changes and want to discard them you can use
the following command:</p>
<pre><code class="language-bash">git reset --hard origin/main
</code></pre>
<p>This just makes your branch identical to the remote, no rebase required. This
prevents rogue merge commits, preserving atomic commits and linear logs.</p>
<p>You could set an alias for this with:</p>
<pre><code class="language-bash">git config --global alias.grs '!git fetch origin &amp;&amp; git rebase origin/main'
</code></pre>
<p>To check whether a setting is active or now you can use:</p>
<pre><code class="language-bash">git config --get rebase.autoStash
true
</code></pre>
<p>To set these options with home-manager:</p>
<pre><code class="language-nix"># ... snip ...
    extraConfig = lib.mkOption {
      type = lib.types.attrs;
      default = {
        commit.gpgsign = true;
        gpg.format = "ssh";
        user.signingkey = "/etc/ssh/ssh_host_ed25519_key.pub";
        extraConfig = {
          pull = {
            rebase = true;
            ff = "only";
        };
        };
        rebase = {
          autoStash = true; # Auto stashes and unstashes local changes during rebase
        };
        fetch = {
          prune = true; # Automatically deletes remote-tracking branches that no longer exist
        };
# ... snip ...
</code></pre>
<h2 id="time-travel-in-git"><a class="header" href="#time-travel-in-git">Time Travel in Git</a></h2>
<details>
<summary> ✔️ Click to Expand Time Travel Section </summary>
<p><strong>View an old commit</strong>:</p>
<pre><code class="language-bash">git checkout &lt;commit_hash&gt;
</code></pre>
<p>This puts you in a “detached HEAD” state, letting you explore code as it was at
that commit. To return, checkout your branch again.</p>
<p><strong>Go back and keep history (revert)</strong>:</p>
<pre><code class="language-bash">git revert &lt;commit_hash&gt;
</code></pre>
<p><strong>Go back and rewrite history (reset)</strong>:</p>
<ul>
<li>Soft reset (keep changes staged):</li>
</ul>
<pre><code class="language-bash">git reset --soft &lt;commit_hash&gt;
</code></pre>
<ul>
<li>Mixed reset (keep changes in working directory):</li>
</ul>
<pre><code class="language-bash">git reset &lt;commit_hash&gt;
</code></pre>
<ul>
<li>Hard reset (discard all changes after the commit):</li>
</ul>
<pre><code class="language-bash">git reset --hard &lt;commit_hash&gt;
</code></pre>
<p>Use the above command with caution, it can delete commits from history.</p>
<ul>
<li>Relative time travel:</li>
</ul>
<pre><code class="language-bash">git reset --hard HEAD@{5.minutes.ago}
</code></pre>
<p>or</p>
<pre><code class="language-bash">git reset --hard HEAD@{yesterday}
</code></pre>
<p><strong>Create a branch from the past</strong>:</p>
<pre><code class="language-bash">git checkout -b &lt;new-brach&gt; &lt;commit_hash&gt;
</code></pre>
<p>This starts a new branch from any previous commit, preserving current changes.</p>
</details>
<p>Some repositories have guidelines, such as Nixpkgs:</p>
<details>
<summary> ✔️ Click to Expand Nixpkgs Commit Conventions </summary>
<p><strong>Commit conventions</strong></p>
<ul>
<li>
<p>Create a commit for each logical unit.</p>
</li>
<li>
<p>Check for unnecessary whitespace with <code>git diff --check</code> before committing.</p>
</li>
<li>
<p>If you have commits pkg-name: oh, forgot to insert whitespace: squash commits
in this case. Use <code>git rebase -i</code>. See Squashing Commits for additional
information.</p>
</li>
<li>
<p>For consistency, there should not be a period at the end of the commit
message’s summary line (the first line of the commit message).</p>
</li>
<li>
<p>When adding yourself as maintainer in the same pull request, make a separate
commit with the message maintainers: <code>add &lt;handle&gt;</code>. Add the commit before
those making changes to the package or module. See Nixpkgs Maintainers for
details.</p>
<p>Make sure you read about any commit conventions specific to the area you’re
touching. See: Commit conventions for changes to <code>pkgs</code>. Commit conventions
for changes to <code>lib</code>. Commit conventions for changes to <code>nixos</code>. Commit
conventions for changes to <code>doc</code>, the Nixpkgs manual.</p>
</li>
</ul>
<p><strong>Writing good commit messages</strong></p>
<p>In addition to writing properly formatted commit messages, it’s important to
include relevant information so other developers can later understand why a
change was made. While this information usually can be found by digging code,
mailing list/Discourse archives, pull request discussions or upstream changes,
it may require a lot of work.</p>
<p>Package version upgrades usually allow for simpler commit messages, including
attribute name, old and new version, as well as a reference to the relevant
release notes/changelog. Every once in a while a package upgrade requires more
extensive changes, and that subsequently warrants a more verbose message.</p>
<p>Pull requests should not be squash merged in order to keep complete commit
messages and GPG signatures intact and must not be when the change doesn’t make
sense as a single commit.</p>
</details>
<p>A <strong>Git workflow</strong> is a recipe or recommendation for how to use Git to
accomplish work in a consistent and productive manner. Having a defined workflow
lets you leverage Git effectively and consistently. This is especially important
when working on a team.</p>
<p><strong>Origin</strong> is the <em>default name</em> (alias) for the <strong>remote repository</strong> that your
<strong>local repository</strong> is connected to, usually the one you cloned from.</p>
<p><strong>Remote Repositories</strong> are versions of your project that are hosted on the
internet or network somewhere.</p>
<ul>
<li>
<p>When you run <code>git push origin main</code>, you’re telling Git to push your changes
to the remote repo called <code>origin</code>.</p>
</li>
<li>
<p>You can see which URL <code>origin</code> points to with <code>git remote -v</code>.</p>
</li>
<li>
<p>You can have multiple remotes (like <code>origin</code>, <code>upstream</code>, etc.) each pointing
to a different remote repo. Each of which is generally either read-only or
read/write for you. Collaborating involves managing these remotes and pushing
and pulling data to and from them when you need to share work.</p>
</li>
</ul>
<blockquote>
<p>❗ You can have a remote repo on your local machine. The word “remote” doesn’t
imply that the repository is somewhere else, only that it’s elsewhere.</p>
</blockquote>
<ul>
<li>The name <code>origin</code> is just a convention, it’s not special. It is automatically
set when you clone a repo.</li>
</ul>
<!-- ![git local remote](../images/git_local-remote.png) -->
<p><strong>Local</strong> is your local copy of the repository, git tracks the differences
between <strong>local</strong> and <strong>remote</strong> which is a repo hosted elsewhere (e.g., GitHub
GitLab etc.)</p>
<p>The <strong>Upstream</strong> in Git typically refers to the original repository from which
your local repository or fork was derived. The <strong>Upstream</strong> is the remote repo
that serves as the main source of truth, often the original project you forked
from. You typically fetch changes from upstream to update your local repo with
the latest updates from the original project, but you don’t push to upstream
unless you have write access.</p>
<h3 id="a-basic-git-workflow"><a class="header" href="#a-basic-git-workflow">A Basic Git Workflow</a></h3>
<!-- ![Git logo 3](../images/git2.png) -->
<ol>
<li>Initialize your Repository:</li>
</ol>
<p>If you haven’t already created a Git repo in your NixOS config directory (for
example, in your flake or <code>/etc/nixos</code>):</p>
<pre><code class="language-bash">cd ~/flake
git init
git add .
git commit -m "Initial commit: NixOS Configuration"
</code></pre>
<p>Taking this initial snapshot with Git is a best practice—it captures the exact
state of your working configuration before you make any changes.</p>
<ul>
<li>
<p>The command <code>git add .</code> stages all files in the directory (and its
subdirectories) for commit, meaning Git will keep track of them in your
project history.</p>
</li>
<li>
<p>The command <code>git commit -m "message"</code> then saves a snapshot of these staged
files, along with your descriptive message, into the repository.</p>
<ul>
<li>Think of a commit as a “save point” in your project. You can always go back
to this point if you need to, making it easy to experiment or recover from
mistakes. This two-step process, staging with <code>git add</code> and saving with
<code>git commit</code> is at the heart of how Git tracks and manages changes over
time.</li>
</ul>
</li>
</ul>
<!-- ![git commit add](../images/git-add-commit.png) -->
<ol start="2">
<li>Make and Track Changes:</li>
</ol>
<p>Now that you’ve saved a snapshot of your working configuration, you’re free to
experiment and try new things, even if they might break your setup.</p>
<p>Suppose you want to try a new desktop environment, like Xfce. You edit your
<code>configuration.nix</code> to add:</p>
<pre><code class="language-nix">services.xserver.desktopManager.xfce.enable = true;
</code></pre>
<p>You run:</p>
<pre><code class="language-bash">sudo nixos-rebuild switch # if configuration.nix is in /etc/nixos/
</code></pre>
<p>But something goes wrong: the system boots, but your desktop is broken or won’t
start. You decide to roll back using the boot menu or:</p>
<pre><code class="language-bash">sudo nixos-rebuild switch --rollback
</code></pre>
<p><strong>What happens?</strong></p>
<ul>
<li>
<p>Your system reverts to the previous working generation in <code>/nix/store</code></p>
</li>
<li>
<p>But: Your <code>configuration.nix</code> file is still changed, it still has the line
enabling Xfce. If you rebuild again, you’ll get the same broken system,
because your config itself wasn’t rolled back.</p>
</li>
</ul>
<p><strong>How does Git Help on Failure?</strong></p>
<p>Git gives you quite a few options and ways to inspect what has been done.</p>
<ul>
<li>
<p>Use <code>git status</code> to see what’s changed, and <code>git checkout -- &lt;file&gt;</code> to
restore any file to its last committed state.</p>
</li>
<li>
<p>Review your changes with <code>git diff</code> to see exactly what you modified before
deciding whether to keep or revert those changes.</p>
</li>
<li>
<p>Reset everything with <code>git reset --hard HEAD</code>, this will discard all local
changes and return to your last commit.</p>
</li>
</ul>
<p>With Git you can simply run:</p>
<pre><code class="language-bash">git checkout HEAD~1 configuration.nix
# or, if you committed before the change:
git revert &lt;commit-hash&gt;
</code></pre>
<p>Show the full hash of the latest commit:</p>
<pre><code class="language-bash">git rev-parse HEAD
f53fef375d89496c0174e70ce94993d43335098e
</code></pre>
<p>Short hash:</p>
<pre><code class="language-bash">git log --pretty=format:'%h' -n 1
f53fef3
git revert f53fef3
</code></pre>
<p>Show a list of Recent commits:</p>
<pre><code class="language-bash">git log
# a list of all commits, with hashes, author, date, and message
git log --oneline
git log --oneline
f53fef3 (HEAD -&gt; main) thunar
b34ea22 thunar
801cbcf thunar
5e72ba5 sops
8b67c59 sops
1a353cb sops
</code></pre>
<p>You can copy the commit hash from any of these and use it in commands like
<code>git checkout &lt;hash&gt;</code> or <code>git revert &lt;hash&gt;</code>.</p>
<p><strong>Commit successful experiments</strong></p>
<ul>
<li>If your changes work, stage, and commit them:</li>
</ul>
<pre><code class="language-bash">git add .
# or more specifically the file you changed or created
git add configuration.nix
git commit -m "Describe the new feature or fix"
</code></pre>
<h3 id="basic-branching"><a class="header" href="#basic-branching">Basic Branching</a></h3>
<p>With Git you’re always on a branch and the default branch is <code>master</code>. Many
change it to <code>main</code> because of the suggestion Git gives you. I think people are
too easily offended these days, just keep this in mind that <code>main</code> and <code>master</code>
refer to the main development branch.</p>
<p>You can get a listing of your current branches with:</p>
<pre><code class="language-bash">git branch
* (no branch)
  main
</code></pre>
<p>The <code>*</code> is next to the current branch and is where the <code>HEAD</code> is currently
pointing. It says <code>(no branch)</code> because I’m currently in detached <code>HEAD</code> where
<code>HEAD</code> points to no branch. The reason for this is because I’ve been trying out
Jujutsu VCS and that’s JJ’s default setting, a detached <code>HEAD</code>.</p>
<p>Git actually gives you a warning about working in a detached <code>HEAD</code>:</p>
<pre><code class="language-bash">You are in 'detached HEAD' state. You can make experimental
changes and commit them, and you can discard any commits you make
in this state without impacting any branch by switching back.

If you want to create a new branch to retain commits you create,
you can do so now (using 'git switch -c &lt;new-branch-name&gt;') or
later (using 'git branch &lt;new-branch-name&gt; &lt;commit-id&gt;').

See 'git help switch' for details.
</code></pre>
<p>To attach the <code>HEAD</code> (i.e., have the pointer pointing to a branch), use the
<code>git checkout</code> command</p>
<pre><code class="language-bash">git checkout main
Switched to branch 'main'
</code></pre>
<pre><code class="language-bash">git branch
* main
# Ensure that you have the latest "tip" from the remote repository `origin`
git fetch origin main
From github.com:sayls8/flake
 * branch            main       -&gt; FETCH_HEAD
</code></pre>
<p>Although we’re working on our own repo and there is basically no chance of our
local branch diverging from our remote, it’s still good to get in the practice
of getting everything in sync before merging or rebasing etc.</p>
<p><code>git fetch</code> doesn’t update <code>main</code>, it just updates your references. To update
<code>main</code> you would use <code>git pull origin/main</code> or <code>git rebase origin/main</code></p>
<p>You can inspect your upstream branches with the following command:</p>
<pre><code class="language-bash">git remote show origin
* remote origin
  Fetch URL: git@github.com:saylesss88/flake.git
  Push  URL: git@github.com:saylesss88/flake.git
  HEAD branch: main
  Remote branch:
    main tracked
  Local ref configured for 'git push':
    main pushes to main (fast-forwardable)
</code></pre>
<p><code>* branch     main      -&gt; FETCH_HEAD</code>: This line signifies that the <code>main</code>
branch from the remote repository (likely <code>origin</code>) was successfully fetched,
and the commit ID of its current tip (its latest commit) is now stored in your
local <code>FETCH_HEAD</code> reference.</p>
<p>Now that we know our local <code>main</code> is up to date with our remote <code>origin/main</code> we
can safely create a new feature branch:</p>
<pre><code class="language-bash">git checkout -b feature/prose_wrap
Switched to a new branch 'feature/prose_wrap'
</code></pre>
<p>Right now the branch <code>feature/prose_wrap</code> is exactly the same as <code>main</code> and we
can safely make changes without affecting <code>main</code>. We can try crazy or even
“dangerous” things and always be able to revert to a working state with
<code>git checkout main</code>.</p>
<p>If our crazy idea works out, we can then merge our feature branch into <code>main</code>.</p>
<p>Ok the feature works, I’ve added and committed the change. Now it’s time to
point the <code>HEAD</code> to <code>main</code> and then either merge or rebase the feature branch
into <code>main</code>:</p>
<pre><code class="language-bash">git checkout main
git fetch origin main
git merge feature/prose_wrap
Updating c8bd54c..b281f79
Fast-forward
 home/editors/helix/default.nix | 69 +++++++++++++++++++++++++++++++--------------------------------------
 1 file changed, 31 insertions(+), 38 deletions(-)
</code></pre>
<ul>
<li>“fast-forward” means that our <code>feature/prose_wrap</code> branch was directly ahead
of the last commit on <code>main</code>. When you merge one commit with another commit
that can be reached by following the first commits history, remember the
feature branch is exactly the same as <code>main</code> until I made another commit. If
the branches diverged more and the history can’t be followed, Git will perform
a 3-way merge where it creates a new “merge commit” that combines the 2
changes.</li>
</ul>
<p>If you have a bunch of branches and forget which have been merged yet use:</p>
<pre><code class="language-bash">git branch --merged
feature/prose_wrap
* main
# OR to see branches that haven't been merged use:
git branch --no-merged
</code></pre>
<p>It’s now safe to delete the feature branch:</p>
<pre><code class="language-bash">git branch -d feature/prose_wrap
Deleted branch feature/prose_wrap (was b281f79)
</code></pre>
<blockquote>
<p>❗ TIP: If your feature branch has a lot of sloppy commits that won’t be of
much benefit to anyone, squash them first then merge. The workflow would look
something like this:</p>
<pre><code class="language-bash"> # Make sure you're on the main branch
 git checkout main

 # Merge the feature branch with squash
 git merge --squash feature/prose_wrap
</code></pre>
<ul>
<li>This combines all the commits in your branch and adds them to your <code>main</code>
staging area, it doesn’t move HEAD or create a merge commit for you. To
apply the changes into one big commit, finalize it with:</li>
</ul>
<pre><code class="language-bash"> git commit -m "Add prose wrapping feature"
</code></pre>
<p>This is often referred to as the “squash commit”.</p>
</blockquote>
<p>Branching means to diverge from the main line of development and continue to do
work without risking messing up your main branch. There are a few commits on
your main branch so to visualize this it would look something like this, image
is from <a href="https://git-scm.com/book/en/v2">Pro Git</a>:</p>
<!-- ![Git Branch 1](../images/git-branch3.png) -->
<h2 id="nix-flake-update-example-with-branches"><a class="header" href="#nix-flake-update-example-with-branches">Nix flake update example with branches</a></h2>
<p>Let’s say you haven’t ran <code>nix flake update</code> in a while and you don’t want to
introduce errors to your working configuration. To do so we can first, make sure
we don’t lose any changes on our main branch:</p>
<pre><code class="language-bash">git add .
git commit -m "Staging changes before switching branches"
# I always like to make sure the configuration will build before pushing to git
sudo nixos-rebuild switch --flake .
# If everything builds and looks correct
git push origin main
</code></pre>
<p>OR, if you have incomplete changes that you don’t want to commit yet you can
stash them with <code>git stash</code>:</p>
<pre><code class="language-bash">git status
On branch main
Your branch is ahead of 'origin/main' by 1 commit.
  (use "git push" to publish your local commits)

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   home/git.nix

no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>
<p>Now we want to switch branches, without committing the incomplete changes to
<code>git.nix</code>:</p>
<pre><code class="language-bash">git stash
Saved working directory and index state WIP on main: 0e46d6b git: lol alias

git status
On branch main
Your branch is ahead of 'origin/main' by 1 commit.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean
</code></pre>
<blockquote>
<p>❗ <code>git stash</code> is equivalent to <code>git stash push</code></p>
</blockquote>
<p>To see which stashes you have stored, use <code>git sash list</code>:</p>
<pre><code class="language-bash">git stash list
stash@{0}: WIP on main: 0e46d6b git: lol alias
</code></pre>
<p>To apply the most recent stash:</p>
<pre><code class="language-bash">git stash apply
git add home/git.nix
On branch main
Your branch is ahead of 'origin/main' by 1 commit.
  (use "git push" to publish your local commits)

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   home/git.nix

# or for multiple stashes
git stash apply stash@{2}
</code></pre>
<p>Running <code>git stash apply</code> applies the changes that were in your stash but
doesn’t automatically restage them, to apply the changes and stage them in one
command:</p>
<pre><code class="language-bash">git stash apply --index
</code></pre>
<p>Now let’s create our branch so we can safely update:</p>
<pre><code class="language-bash">git checkout -b update-test
Switched to a new branch 'update-test'
</code></pre>
<p><code>-b</code> is to switch to the branch that was just created</p>
<p>Some may prefer a more descriptive branch name such as: <code>update/flake-inputs</code>, I
kept it short for the example. Or if your company uses an issue tracker,
including the ticket number in the branch name can be helpful:
<code>update/123-flake-inputs</code></p>
<p>The above command is equivalent to:</p>
<pre><code class="language-bash">git branch update-test
git checkout update-test
</code></pre>
<p><del>Now our branches would look something like this, note how both branches
currently point to the same commit:</del> I discovered that Git Book has pretty
restrictive licensing and will eventually find a replacement.</p>
<!-- ![Git Branch 2](../images/git-branch2.png) -->
<p>Now, lets run our update:</p>
<pre><code class="language-bash">nix flake update
sudo nixos-rebuild test --flake .
# If everything looks ok let's try applying the changes
sudo nixos-rebuild switch --flake .
# And if everything looks ok:
git add .
git commit -m "feat: Updated all flake inputs"
git push origin update-test
</code></pre>
<blockquote>
<p>❗ This is the same workflow for commiting a PR. After you first fork and
clone the repo you want to work on, you then create a new feature branch and
push to that branch on your fork. This allows you to create a PR comparing
your changes to their existing configuration.</p>
</blockquote>
<p><del>At this point our graph would look similar to the following</del>:</p>
<!-- ![Git Branch 3](../images/git-branch1.png) -->
<p>If we are satisfied, we can switch back to our <code>main</code> branch and merge
<code>update-test</code> into it:</p>
<pre><code class="language-bash">git checkout main
git merge origin/update-test
git branch -D update-test
sudo nixos-rebuild test --flake .
sudo nixos-rebuild switch --flake .
</code></pre>
<p>It’s good practice to delete a branch after you’ve merged and are done with it.</p>
<h2 id="rebasing-branches"><a class="header" href="#rebasing-branches">Rebasing Branches</a></h2>
<p>To combine two seperate branches into one unified history you typically use
<code>git merge</code> or <code>git rebase</code>.</p>
<p><code>git merge</code> takes two commit pointers and finds a common base commit between
them, it then creates a “merge commit” that combines the changes.</p>
<p><code>git rebase</code> is used to move a sequence of commits to a new base commit.</p>
<!-- ![Git rebase](../images/rebase.png) -->
<h2 id="configure-git-declaratively"><a class="header" href="#configure-git-declaratively">Configure Git Declaratively</a></h2>
<p>The following example is the <code>git.nix</code> from the hydenix project it shows some
custom options and a way to manage everything from a single location:</p>
<pre><code class="language-nix"># git.nix from hydenix: declarative Git configuration for Home Manager
{ lib, config, ... }:

let
  cfg = config.hydenix.hm.git;
in
{

  options.hydenix.hm.git = {
    enable = lib.mkOption {
      type = lib.types.bool;
      default = config.hydenix.hm.enable;
      description = "Enable git module";
    };

    name = lib.mkOption {
      type = lib.types.nullOr lib.types.str;
      default = null;
      description = "Git user name";
    };

    email = lib.mkOption {
      type = lib.types.nullOr lib.types.str;
      default = null;
      description = "Git user email";
    };
  };

  config = lib.mkIf cfg.enable {

    programs.git = {
      enable = true;
      userName = cfg.name;
      userEmail = cfg.email;
      extraConfig = {
        init.defaultBranch = "main";
        pull.rebase = false;
      };
    };
  };
}
</code></pre>
<blockquote>
<p>❗ You can easily change the name of the option, everything after <code>config.</code> is
custom. So you could change it to for example, <code>config.custom.git</code> and you
would enable it with <code>custom.git.enable = true;</code> in your <code>home.nix</code> or
equivalent.</p>
</blockquote>
<p>Then he has a <code>hm/default.nix</code> with the following to enable it.</p>
<pre><code class="language-nix">#...snip...

 # hydenix home-manager options go here
  hydenix.hm = {
    #! Important options
    enable = true;
      git = {
        enable = true; # enable git module
        name = null; # git user name eg "John Doe"
        email = null; # git user email eg "john.doe@example.com"
      };
    }

    # ... snip ...
</code></pre>
<p>You can enable git, and set your git username as well as git email right here.</p>
<h3 id="resources"><a class="header" href="#resources">Resources</a></h3>
<ul>
<li>
<p><a href="https://gist.github.com/luismts/495d982e8c5b1a0ced4a57cf3d93cf60">GitCommitBestPractices</a></p>
</li>
<li>
<p><a href="https://git-scm.com/book/en/v2">ProGit</a></p>
</li>
<li>
<p><a href="https://ohshitgit.com/">Oh shit Git</a></p>
</li>
</ul>
<footer id="kanagawa-support-footer" style="text-align:center; margin-top: 3rem; font-size: 0.85em; opacity: 0.75;">
  
<p><a href="https://github.com/saylesss88/mdbook-kanagawa-theme">Made with mdbook-kanagawa-theme</a></p>

</footer>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../vcs/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../vcs/jujutsu.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../vcs/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../vcs/jujutsu.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/extra-7e3b2a20.js"></script>
        <script src="../theme/rss-button-ba95f2f3.js"></script>
        <script src="../theme/nix_http-971fb95c.js"></script>



    </div>
    </body>
</html>
