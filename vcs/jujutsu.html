<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Version Control with JJ - nix-book</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <a href="#" class="top-link" id="back-to-top">↑</a>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">nix-book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="version-control-with-jj"><a class="header" href="#version-control-with-jj">Version Control with JJ</a></h1>
<details>
<summary> ✔️ Click to Expand Table of Contents</summary>
<ul>
<li><a href="#what-is-the-jujutsu-working-copy">What is the Jujutsu Working Copy</a></li>
<li><a href="#example-jj-module">Example JJ Module</a></li>
<li><a href="#issues-ive-noticed">Issues I've Noticed</a></li>
<li><a href="#heres-an-example-of-using-jj-in-an-existing-git-repo">Here's an example of using JJ in an existing Git repo</a></li>
<li><a href="#create-a-repo-without-an-existing-git-repo">Create a Repo without an existing Git Repo</a>
<ul>
<li><a href="#jj-and-git-side-by-side">JJ and Git Side by Side</a></li>
</ul>
</li>
<li><a href="#the-2-main-jj-workflows">The 2 main JJ Workflows</a>
<ul>
<li><a href="#the-squash-workflow">The Squash Workflow</a></li>
<li><a href="#the-edit-workflow">The Edit Workflow</a></li>
</ul>
</li>
<li><a href="#operation-log-and-undo">Operation Log and Undo</a></li>
<li><a href="#conflict-resolution">Conflict Resolution</a></li>
<li><a href="#revsets">Revsets</a></li>
<li><a href="#filesets">Filesets</a>
<ul>
<li><a href="#resources">Resources</a></li>
</ul>
</li>
</ul>
</details>
<p><img src="../images/jujutsu.png" alt="JJ Logo" /></p>
<p>You may want to check
<a href="https://steveklabnik.github.io/jujutsu-tutorial/">Steve's Jujutsu Tutorial</a>, he
does a great job of explaining how to use jj with practical examples. It is
recommended in the official JJ docs as a more up to date intro.</p>
<p>If you haven't taken the time to deep dive Git, it may be a good time to learn
about a new way of doing Version Control that is actually less complex and
easier to mentally map out in my opinion.</p>
<p>Jujutsu is a new front-end to Git, and it's a new design for distributed version
control. --jj init</p>
<p>You can use jujutsu (jj) with existing Git repositories with one command.
<code>jj git init --colocate</code> or <code>jj git init --git-repo /path/to/git_repository</code>.
The native repository format for jj is still a work in progress so people
typically use a <code>git</code> repository for backend.</p>
<p>Unlike <code>git</code>, <code>jj</code> has no index "staging area". It treats the working copy as an
actual commit. When you make changes to files, these changes are automatically
recorded to the working commit. There's no need to explicitly stage changes
because they are already part of the commit that represents your current working
state.</p>
<h2 id="what-is-the-jujutsu-working-copy"><a class="header" href="#what-is-the-jujutsu-working-copy">What is the Jujutsu Working Copy</a></h2>
<p>The <strong>working copy</strong> in Jujutsu is an actual <strong>commit</strong> that represents the
current state of the files you're working on. Unlike Git, where the working copy
is separate from commits and changes must be explicitly staged and committed, in
JJ the working copy is a live commit that automatically records changes as you
modify files.</p>
<p>Adding or removing files in the working copy implicitly tracks or untracks them
without needing explicit commands like <code>git add</code></p>
<p>The working copy commit acts as a snapshot of your current workspace. When you
run commands, Jujutsu first syncs the filesystem changes into this commit, then
performs the requested operation, and finally updates the working copy if needed</p>
<p>To finalize your current changes and start a new set of changes, you use the
<code>jj new</code> command, which creates a new working-copy commit on top of the current
one. This replaces the traditional Git workflow of staging and committing
changes separately</p>
<p>Conflicts in the working copy are represented by inserting conflict markers
directly into the files. Jujutsu tracks the conflicting parts and can
reconstruct the conflict state from these markers. You resolve conflicts by
editing these markers and then committing the resolution in the working copy</p>
<ul>
<li>This means that you don't need to worry about making a change, running
<code>git add .</code>, running <code>git commit -m "commit message"</code> because it's already
done for you. This is handy with flakes by preventing a "dirty working tree"
and can instantly be rebuilt after making a change.</li>
</ul>
<h2 id="example-jj-module"><a class="header" href="#example-jj-module">Example JJ Module</a></h2>
<ul>
<li>For <code>lazygit</code> fans, Nixpkgs has <code>lazyjj</code>. I've seen that it's recommended to
use jj with <code>meld</code>. I'll share my <code>jj.nix</code> here for an example:</li>
</ul>
<pre><code class="language-nix">{
  lib,
  config,
  pkgs,
  ...
}: let
  cfg = config.custom.jj;
in {
  options.custom.jj = {
    enable = lib.mkOption {
      type = lib.types.bool;
      default = true;
      description = "Enable the Jujutsu (jj) module";
    };

    userName = lib.mkOption {
      type = lib.types.nullOr lib.types.str;
      default = "saylss88";  # you can use `or` statements here also
      description = "Jujutsu user name";
    };

    userEmail = lib.mkOption {
      type = lib.types.nullOr lib.types.str;
      default = "sayls88@proton.me";
      description = "Jujutsu user email";
    };

    configFile = lib.mkOption {
      type = lib.types.lines;
      default = ''
        [ui]
        diff-editor = ["nvim", "-c", "DiffEditor $left $right $output"]
      '';
      description = "Content of the Jujutsu config.toml file";
    };

    packages = lib.mkOption {
      type = lib.types.listOf lib.types.package;
      default = with pkgs; [lazyjj meld];
      description = "Additional Jujutsu-related packages to install";
    };

    settings = lib.mkOption {
      type = lib.types.attrs;
      default = {
        ui = {
          default-command = ["status" "--no-pager"];
          diff-editor = ":builtin";
          merge-editor = ":builtin";
        };
      };
      description = "Jujutsu configuration settings";
    };
  };

  config = lib.mkIf cfg.enable {
    home.packages = cfg.packages;

    home.file.".jj/config.toml".text = cfg.configFile;

    programs.jujutsu = {
      enable = true;
      settings = lib.mergeAttrs cfg.settings {
        user = {
          name = cfg.userName;
          email = cfg.userEmail;
        };
      };
    };
  };
}
</code></pre>
<p>To be honest, I have only played around with jj and recently am giving it
another shot. I'm not sure currently if the meld settings are correct FYI. They
are filler names and email addresses also.</p>
<p>In my <code>home.nix</code> I have this to enable it:</p>
<pre><code class="language-nix">custom = {
    jj = {
        enable = true;
        userName = "sayls88";
        userEmail = "sayls88@proton.me";
    };
};
</code></pre>
<p>The <code>custom.jj</code> module allows me to override the username, email, and whether jj
is enabled from a single, centralized place within my Nix configuration. So only
if jj is enabled, <code>lazyjj</code> and <code>meld</code> will be installed.</p>
<h2 id="issues-ive-noticed"><a class="header" href="#issues-ive-noticed">Issues I've Noticed</a></h2>
<p>I have run into a few issues, such as every flake command reloading every single
input every time. <strong>What I mean by this is what you see when you run a flake
command for the first time, it adds all of your flakes inputs.</strong> I believe the
fix for this is deleting and regenerating your <code>flake.lock</code>. The same thing can
happen when you move your flake from one location to another.</p>
<p>That said, I recommend doing just that after running something like
<code>jj git init --colocate</code>. Delete your <code>flake.lock</code> and run <code>nix flake update</code>,
<code>nix flake lock --recreate-lock-file</code> still works but is being depreciated.</p>
<p>Sometimes the auto staging doesn't pick up the changes in your configuration so
rebuilding changes nothing, this has been more rare but happens occasionally.</p>
<h2 id="heres-an-example-of-using-jj-in-an-existing-git-repo"><a class="header" href="#heres-an-example-of-using-jj-in-an-existing-git-repo">Here's an example of using JJ in an existing Git repo</a></h2>
<p>Say I have my configuration flake in the <code>~/flakes/</code> directory that is an
existing Git repository. To use JJ as the front-end I could do something like:</p>
<pre><code class="language-bash">cd ~/flakes
jj git init --colocate
jj describe -m "first jj commit"
jj commit
</code></pre>
<p><strong>Bookmarks</strong> in jj are named pointers to specific revisions, similar to
branches in Git. When you first run <code>jj git init --git-branch .</code> in a git repo,
you will likely get a Hint saying "Run the following command to keep local
bookmarks updated on future pulls":</p>
<pre><code class="language-bash">jj bookmark track main@origin
</code></pre>
<p>This command tells jj to track the remote bookmark <code>main@origin</code> with a local
bookmark named <code>main</code>. It is similar to setting an upstream branch in Git. In
JJ, there's no concept of a "current branch" commits are first-class, and
bookmarks are optional pointers.</p>
<p><strong>Remote bookmarks</strong> are bookmarks that exist on a remote (like <code>origin</code>). jj
keeps track of the last-seen position of each remote bookmark (e.g.,
<code>main@origin</code>), similar to Git's remote-tracking branches</p>
<blockquote>
<p>NOTE: JJ is designed for a "branchless" workflow, so bookmarks are more
lightweight and flexible than Git branches.</p>
</blockquote>
<p>To push you use <code>jj git push</code>, (you must first set the bookmark as we did above)</p>
<pre><code class="language-bash">jj git push
# example output after pushing my flake repo
Rebased 1 descendant commits onto updated working copy
Changes to push to origin:
  Move forward bookmark main from b48d4e9b361f to 6fb5e4c02617
remote: Resolving deltas: 100% (25/25), completed with 12 local objects.
</code></pre>
<h2 id="create-a-repo-without-an-existing-git-repo"><a class="header" href="#create-a-repo-without-an-existing-git-repo">Create a Repo without an existing Git Repo</a></h2>
<p><strong>Or</strong> to do this in a directory that isn't already a git repo you can do
something like:</p>
<pre><code class="language-bash">cargo new hello-world --vcs=none
cd hello-world
jj git init
Initialized repo in "."
</code></pre>
<hr />
<h3 id="jj-and-git-side-by-side"><a class="header" href="#jj-and-git-side-by-side">JJ and Git Side by Side</a></h3>
<p>Or for example, with Git if you wanted to move to a different branch before
running <code>nix flake update</code> to see if it introduced errors before merging with
your main branch, you could do something like:</p>
<pre><code class="language-bash">git checkout -b update-test

nix flake update

sudo nixos-rebuild test --flake .
</code></pre>
<p>If you're satisfied you can merge:</p>
<pre><code class="language-bash">git checkout main
git add . # Stage the change
git commit -m "update"
git merge update-test
git branch -D update-test
sudo nixos-rebuild switch --flake .
</code></pre>
<p>With JJ a similar workflow could be:</p>
<pre><code class="language-bash">jj new  # Create a new child commit/start working on a new change
nix flake update
sudo nixos-rebuild test --flake .
jj squash #  equivalent to `git commit -a --amend`
jj describe -m "update" # Similar to git commit -m
sudo nixos-rebuild switch --flake .
</code></pre>
<ul>
<li>
<p>With <code>jj</code> you're creating a new commit rather than a new branch.</p>
</li>
<li>
<p>Amending vs. Squashing: Git's <code>git commit --amend</code> updates the last commit.
<code>jj squash</code> combines the current commit with its parent, effectively doing the
same thing in terms of history.</p>
</li>
<li>
<p>Merging: Git's merge command is explicit. In <code>jj</code>, the concept is similar, but
since there's no branch, you're "merging" by moving your working commit to
include these changes. The <code>jj squash</code> here acts like merging the changes into
the main line of development.</p>
</li>
<li>
<p>No need to delete branches: Since there are no branches in <code>jj</code>, there's no
equivalent to <code>git branch -D</code> to clean up. Instead commits that are no longer
needed can be "abandoned" with <code>jj abandon</code> if you want to clean up your
commit graph.</p>
</li>
<li>
<p><code>jj describe</code> without a flag just opens <code>$EDITOR</code> where you can write your
commit message save and exit.</p>
</li>
<li>
<p>In <code>git</code>, we finish a set of changes to our code by committing, but in <code>jj</code> we
start new work by creating a change, and <em>then</em> make changes to our code. It's
more useful to write an initial description of your intended changes, and then
refine it as you work, than it is creating a commit message after the fact.</p>
</li>
<li>
<p>I have heard that jj can struggle with big repositories such as Nixpkgs and
have noticed some issues here and there when using with NixOS. I'm hoping that
as the project matures, it gets better on this front.</p>
</li>
</ul>
<hr />
<h2 id="the-2-main-jj-workflows"><a class="header" href="#the-2-main-jj-workflows">The 2 main JJ Workflows</a></h2>
<h3 id="the-squash-workflow"><a class="header" href="#the-squash-workflow">The Squash Workflow</a></h3>
<p>This workflow is the most similar to Git and Git's index.</p>
<p>The workflow:</p>
<ol>
<li>
<p>Describe the work we want to do with <code>jj desc -m "message"</code></p>
</li>
<li>
<p>We create a new empty change on top of that one with <code>jj new</code></p>
</li>
<li>
<p>When we are done with a feature, we run <code>jj squash</code> to move the changes from
<code>@</code> into the change we described in step 1. <code>@</code> is where your working copy is
positioned currently.</p>
</li>
</ol>
<p>For example, let's say we just ran <code>jj git init --colocate</code> in our configuration
Flake directory making it a <code>jj</code> repo as well using git for backend.</p>
<pre><code class="language-bash">cd flake
jj git init --colocate
jj log
@  lnmmxwko saylesss87@proton.me 2025-06-27 10:14:57 1eac6aa0
│  (empty) (no description set)
○  qnknltto saylesss87@proton.me 2025-06-27 09:04:08 git_head() 5358483a
│  (empty) jj
</code></pre>
<p>The above log output shows that running <code>jj git init</code> creates an empty working
commit (<code>@</code>) on top of the <code>git_head()</code></p>
<pre><code class="language-bash">jj desc -m "Switch from nixVim to NVF"
jj new  # Create a new empty change
jj log
@  nmnmznmm saylesss87@proton.me 2025-06-27 10:16:30 52dd7ee0
│  (empty) (no description set)
○  lnmmxwko saylesss87@proton.me 2025-06-27 10:16:24 git_head() 3e8f9f3a
│  (empty) Switch from nixVim to NVF
○  qnknltto saylesss87@proton.me 2025-06-27 09:04:08 5358483a
│  (empty) jj
</code></pre>
<p>The above log shows that running <code>jj desc</code> changes the current (<code>@</code>) commits
description, and then <code>jj new</code> creates a new empty commit on top of it, moving
(<code>@</code>) to this new empty commit.</p>
<p>The "Switch from nixVim to NVF" commit is now the parent of (<code>@</code>).</p>
<p>Now, we'd make the necessary changes and to add them to the commit we just
described in the previous steps.</p>
<p>The changes are automatically "staged" so theres no need to <code>git add</code> them, so
we just make the changes and squash them.</p>
<pre><code class="language-bash">jj squash  # Squash the commit into its parent commit (i.e., our named commit)
jj log
@  zsxsolsq saylesss87@proton.me 2025-06-27 10:18:01 2c35d83f
│  (empty) (no description set)
○  lnmmxwko saylesss87@proton.me 2025-06-27 10:18:01 git_head() 485eaee9
│  (empty) Switch from nixVim to NVF
</code></pre>
<p>This shows <code>jj squashes</code> effect, it merges the changes from the current (<code>@</code>)
commit into its parent. The (<code>@</code>) then moves to this modified parent, and a new
empty commit is created on top, ready for the next set of changes.</p>
<pre><code class="language-bash">sudo nixos-rebuild switch --flake .
</code></pre>
<p>We're still in the nameless commit and can either continue working or run
<code>jj desc -m ""</code> again describing our new change, then <code>jj new</code> and <code>jj squash</code>
it's pretty simple. The nameless commit is used as an adhoc staging area.</p>
<hr />
<h3 id="the-edit-workflow"><a class="header" href="#the-edit-workflow">The Edit Workflow</a></h3>
<p>This workflow adds a few new commands <code>jj edit</code>, and <code>jj next</code>.</p>
<p>Heres the workflow:</p>
<ol>
<li>
<p>Create a new change to work on the new feature with <code>jj new</code></p>
</li>
<li>
<p>If everything works exactly as planned, we're done.</p>
</li>
<li>
<p>If we realize we want to break this big change up into multiple smaller ones,
we do it by making a new change before the current one, swapping to it, and
making the necessary change.</p>
</li>
<li>
<p>Lastly, we go back to the main change.</p>
</li>
</ol>
<p>The squash workflow leaves <code>@</code> at an empty undescribed change, with this
workflow, <code>@</code> will often be on the existing change.</p>
<p>If <code>@</code> wasn't at an empty change, we would start this workflow with:</p>
<pre><code class="language-bash">jj new -m "Switch from NVF to nixVim"
</code></pre>
<p>since our <code>@</code> is already at an empty change, we'll just describe it and get
started:</p>
<p>For this example, lets say we want to revert back to nixVim:</p>
<pre><code class="language-bash">jj desc -m "Switch from NVF to nixVim"
jj log
@  zsxsolsq saylesss87@proton.me 2025-06-27 10:18:47 606abaa7
│  (empty) Switch from NVF to nixVim
○  lnmmxwko saylesss87@proton.me 2025-06-27 10:18:01 git_head() 485eaee9
│  (empty) Switch from nixVim to NVF
○  qnknltto saylesss87@proton.me 2025-06-27 09:04:08 5358483a
│  (empty) jj
</code></pre>
<p>Again, this shows <code>jj desc</code> renaming the current empty <code>@</code> commit.</p>
<p>We make the changes, and it's pretty straightforward so we're done, every change
is automatically staged so we can just run <code>sudo nixos-rebuild switch --flake .</code>
now to apply the changes.</p>
<p>If we wanted to make more changes that aren't described we can use <code>jj new -B</code>
which is similar to <code>git add -a</code>.</p>
<pre><code class="language-bash">jj new -B @ -m "Adding LSP to nixVim"
Rebased 1 descendant commits
Working copy  (@) now at: lpnxxxpo bf929946 (empty) Adding LSP to nixVim
Parent commit (@-)      : lnmmxwko 485eaee9 (empty) Switch from nixVim to NVF
</code></pre>
<p>The <code>-B</code> tells jj to create the new change <em>before</em> the current one and it
creates a rebase. We created a change before the one we're on, it automatically
rebased our original change. This operation will <em>always</em> succeed with jj, we
will have our working copy at the commit we've just inserted.</p>
<p>You can see below that <code>@</code> moved down one commit:</p>
<pre><code class="language-bash">jj log
○  zsxsolsq saylesss87@proton.me 2025-06-27 10:22:03 ad0713b6
│  (empty) Switch from NVF to nixVim
@  lpnxxxpo saylesss87@proton.me 2025-06-27 10:22:03 bf929946
│  (empty) Adding LSP to nixVim
○  lnmmxwko saylesss87@proton.me 2025-06-27 10:18:01 git_head() 485eaee9
│  (empty) Switch from nixVim to NVF
○  qnknltto saylesss87@proton.me 2025-06-27 09:04:08 5358483a
│  (empty) jj
○  qnknltto sayls87@proton.me 2025-06-27 09:04:08 git_head()
</code></pre>
<p>The "Adding LSP to nixVim" commit is directly above "Switch from nixVim to NVF"
(the old <code>git_head()</code>)</p>
<p>The "Switch from NVF to nixVim" commit (which was your <code>@</code> before <code>jj new -B</code>)
is now above "Adding LSP to nixVim" in the log output, meaning "Adding LSP to
nixVim" is its new parent.</p>
<p><code>@</code> has moved to "Adding LSP to nixVim"</p>
<p><code>jj log</code> example output</p>
<hr />
<h2 id="operation-log-and-undo"><a class="header" href="#operation-log-and-undo">Operation Log and Undo</a></h2>
<p>JJ records every operation (commits, merges, rebases, etc.) in an operation log.
You can view and undo previous operations, making it easy to recover from
mistakes, a feature not present in Git’s core CLI</p>
<pre><code class="language-bash">jj op log
@  fbf6e626df22 jr@magic 15 minutes ago, lasted 9 milliseconds
│  new empty commit
│  args: jj new -B @ -m 'Adding LSP to nixVim'
○  bde40b7c17cf jr@magic 19 minutes ago, lasted 8 milliseconds
│  describe commit 2c35d83f75031dc582bf28b64d4af1c218177f90
│  args: jj desc -m 'Switch from NVF to nixVim'
○  3a2bfe1c0b0a jr@magic 19 minutes ago, lasted 8 milliseconds
│  squash commits into 3e8f9f3a6a58fef86906e16e9b4375afb43e73e3
│  args: jj squash
○  80abcb58dcb6 jr@magic 21 minutes ago, lasted 8 milliseconds
│  new empty commit
│  args: jj new
○  8c80314cbcd7 jr@magic 21 minutes ago, lasted 8 milliseconds
│  describe commit 1eac6aa0b88ba014785ee9c1c2ad6e2abc6206e9
│  args: jj desc -m 'Switch from nixVim to NVF'
○  44b5789cb4d1 jr@magic 22 minutes ago, lasted 6 milliseconds
│  track remote bookmark main@origin
│  args: jj bookmark track main@origin
○  dbefee04aa85 jr@magic 23 minutes ago, lasted 4 milliseconds
│  import git head
│  args: jj git init --git-repo .
</code></pre>
<pre><code class="language-bash">jj op undo &lt;operation-id&gt;
# or
jj op restore &lt;operation-id&gt;
</code></pre>
<hr />
<h2 id="conflict-resolution"><a class="header" href="#conflict-resolution">Conflict Resolution</a></h2>
<p>In JJ, conflicts live inside commits and can be resolved at any time, not just
during a merge. This makes rebasing and history editing safer and more flexible</p>
<p>JJ treats conflicts as first-class citizens: conflicts can exist inside commits,
not just in the working directory. This means if a merge or rebase introduces a
conflict, the conflicted state is saved in the commit itself, and you can
resolve it at any time there’s no need to resolve conflicts immediately or use
“<code>--continue</code>” commands as in Git</p>
<p>Here's how it works:</p>
<p>When you check out or create a commit with conflicts, JJ materializes the
conflicts as markers in your files (similar to Git's conflict markers)</p>
<p>You can resolve conflicts by editing the files to remove the markers, or by
using:</p>
<pre><code class="language-bash">jj resolve
</code></pre>
<hr />
<h2 id="revsets"><a class="header" href="#revsets">Revsets</a></h2>
<p><a href="https://jj-vcs.github.io/jj/latest/revsets/">Jujutsu Revsets</a></p>
<p>JJ includes a powerful query language for selecting commits. For example:</p>
<pre><code class="language-bash">jj log -r "author(alice) &amp; file(*.py)"
</code></pre>
<p>This command lists all commits by Alice that touch Python files.</p>
<h2 id="filesets"><a class="header" href="#filesets">Filesets</a></h2>
<p><a href="https://jj-vcs.github.io/jj/latest/filesets/">Jujutsu Filesets</a></p>
<p>Jujutsu supports a functional language for selecting a set of files. Expressions
in this language are called "filesets" (the idea comes from Mercurial). The
language consists of file patterns, operators, and functions. --JJ Docs</p>
<hr />
<h3 id="resources"><a class="header" href="#resources">Resources</a></h3>
<ul>
<li>
<p><a href="https://steveklabnik.github.io/jujutsu-tutorial/">steves_jj_tutorial</a></p>
</li>
<li>
<p><a href="https://github.com/jj-vcs/jj">jj_github</a></p>
</li>
<li>
<p><a href="https://jj-vcs.github.io/jj/latest/tutorial/">official_tutorial</a></p>
</li>
<li>
<p><a href="https://v5.chriskrycho.com/essays/jj-init/">jj_init</a></p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../vcs/git.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../installation/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../vcs/git.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../installation/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
