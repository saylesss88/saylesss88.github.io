<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>My-Nix-Blog</title>
    <!-- <link rel="stylesheet" href="https://saylesss88.github.io/style.css" /> -->
    <script>
      const baseUrl = "https://saylesss88.github.io";
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Welcome to My-Nix-Blog</h1>

      <button id="dark-mode-toggle">Toggle Dark Mode</button>

      <a href="https://saylesss88.github.io/rss.xml" id="rss-button" role="button">
        ðŸ“¡ Subscribe via RSS
      </a>

      <div role="search">
        <input
          type="text"
          id="search"
          placeholder="Search..."
          aria-label="Search"
        />
        <div class="search-results" aria-live="polite">
          <ul class="search-results__items"></ul>
        </div>
      </div>

      
  &lt;h1 id=&quot;intro-to-jujutsu-using-jj-in-an-existing-git-repo&quot;&gt;Intro to Jujutsu (Using jj in an existing Git Repo)&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;strong&gt;TOC&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;saylesss88.github.io&#x2F;blog&#x2F;intro-to-jujutsu-vcs&#x2F;#intro-to-jujutsu-using-jj-in-an-existing-git-repo&quot;&gt;Intro to Jujutsu (Using jj in an existing Git Repo)&lt;&#x2F;a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;saylesss88.github.io&#x2F;blog&#x2F;intro-to-jujutsu-vcs&#x2F;#jj-and-git-side-by-side&quot;&gt;JJ and Git Side by Side&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;saylesss88.github.io&#x2F;blog&#x2F;intro-to-jujutsu-vcs&#x2F;#resources&quot;&gt;Resources&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;jujutsu.png&quot; alt=&quot;Jujutsu Logo&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You can use jujutsu (jj) with existing Git repositories with one command.
&lt;code&gt;jj git init --colocate&lt;&#x2F;code&gt; or &lt;code&gt;jj git init --git-repo &#x2F;path&#x2F;to&#x2F;git_repository&lt;&#x2F;code&gt;.
The native repository format for jj is still a work in progress so people
typically use a &lt;code&gt;git&lt;&#x2F;code&gt; repository for backend.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Unlike &lt;code&gt;git&lt;&#x2F;code&gt;, &lt;code&gt;jj&lt;&#x2F;code&gt; has no index &quot;staging area&quot;. It treats the working copy
as an actual commit. When you make changes to files, these changes are
automatically recorded to the working commit. There&#x27;s no need to explicitly
stage changes because they are already part of the commit that represents
your current working state.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;This means that you don&#x27;t need to worry about making a change, running
&lt;code&gt;git add .&lt;&#x2F;code&gt;, running &lt;code&gt;git commit -m &quot;commit message&quot;&lt;&#x2F;code&gt; because it&#x27;s
already done for you. This is handy with flakes by preventing a
&quot;dirty working tree&quot; and can instantly be rebuilt after making a change.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;here-s-an-example&quot;&gt;Here&#x27;s an example&lt;&#x2F;h2&gt;
&lt;p&gt;Say I have my configuration flake in the &lt;code&gt;~&#x2F;flakes&#x2F;&lt;&#x2F;code&gt; directory that is an
existing Git repository. To use JJ as the front-end I could do something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#212733;color:#ccc9c2;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#f28779;&quot;&gt;cd &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5ccfe6;&quot;&gt;~&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;flakes
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; git init&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --colocate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; describe&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; -m &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bae67e;&quot;&gt;&amp;quot;first jj commit&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; commit
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;Or&lt;&#x2F;strong&gt; to do this in a directory that isn&#x27;t already a git repo you can do
something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#212733;color:#ccc9c2;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;cargo&lt;&#x2F;span&gt;&lt;span&gt; new hello-world&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --vcs&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f29e74;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span&gt;none
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f28779;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; hello-world
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; git init
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;Initialized&lt;&#x2F;span&gt;&lt;span&gt; repo in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bae67e;&quot;&gt;&amp;quot;.&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;jj-and-git-side-by-side&quot;&gt;JJ and Git Side by Side&lt;&#x2F;h3&gt;
&lt;p&gt;Or for example, with Git if you wanted to move to a different branch before
running &lt;code&gt;nix flake update&lt;&#x2F;code&gt; to see if it introduced errors before merging
with your main branch, you could do something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#212733;color:#ccc9c2;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; checkout&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; -b&lt;&#x2F;span&gt;&lt;span&gt; update-test
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;nix&lt;&#x2F;span&gt;&lt;span&gt; flake update
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nixos-rebuild test&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --flake&lt;&#x2F;span&gt;&lt;span&gt; .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you&#x27;re satisfied you can merge:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#212733;color:#ccc9c2;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; checkout main
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; add . &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5c6773;&quot;&gt;# Stage the change
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; commit&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; -m &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bae67e;&quot;&gt;&amp;quot;update&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; branch&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; -D&lt;&#x2F;span&gt;&lt;span&gt; update-test
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; merge update-test
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nixos-rebuild switch&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --flake&lt;&#x2F;span&gt;&lt;span&gt; .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With JJ a similar workflow could be:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#212733;color:#ccc9c2;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; new  &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5c6773;&quot;&gt;# Create a new child commit&#x2F;start working on a new change
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;nix&lt;&#x2F;span&gt;&lt;span&gt; flake update
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nixos-rebuild test&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --flake&lt;&#x2F;span&gt;&lt;span&gt; .
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; squash &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5c6773;&quot;&gt;#  equivalent to `git commit -a --amend`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; describe&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; -m &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bae67e;&quot;&gt;&amp;quot;update&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5c6773;&quot;&gt;# Similar to git commit -m
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;jj&lt;&#x2F;span&gt;&lt;span&gt; commit &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5c6773;&quot;&gt;# Only needed if finalizing an explicit commit
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffd580;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nixos-rebuild switch&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffcc66;&quot;&gt; --flake&lt;&#x2F;span&gt;&lt;span&gt; .
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;With &lt;code&gt;jj&lt;&#x2F;code&gt; you&#x27;re creating a new commit rather than a new branch.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Amending vs. Squashing: Git&#x27;s &lt;code&gt;git commit --amend&lt;&#x2F;code&gt; updates the last commit.
&lt;code&gt;jj squash&lt;&#x2F;code&gt; combines the current commit with its parent, effectively doing
the same thing in terms of history.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Merging: Git&#x27;s merge command is explicit. In &lt;code&gt;jj&lt;&#x2F;code&gt;, the concept is similar,
but since there&#x27;s no branch, you&#x27;re &quot;merging&quot; by moving your working commit
to include these changes. The &lt;code&gt;jj squash&lt;&#x2F;code&gt; here acts like merging the changes
into the main line of development.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;No need to delete branches: Since there are no branches in &lt;code&gt;jj&lt;&#x2F;code&gt;, there&#x27;s
no equivalent to &lt;code&gt;git branch -D&lt;&#x2F;code&gt; to clean up. Instead commits that are no
longer needed can be &quot;abandoned&quot; with &lt;code&gt;jj abandon&lt;&#x2F;code&gt; if you want to clean up
your commit graph.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;jj describe&lt;&#x2F;code&gt; without a flag just opens &lt;code&gt;$EDITOR&lt;&#x2F;code&gt; where you can write your
commit message save and exit.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;In &lt;code&gt;git&lt;&#x2F;code&gt;, we finish a set of changes to our code by committing, but in
&lt;code&gt;jj&lt;&#x2F;code&gt; we start new work by creating a change, and &lt;em&gt;then&lt;&#x2F;em&gt; make changes to
our code. It&#x27;s more useful to write an initial description of your intended
changes, and then refine it as you work, than it is creating a commit message
after the fact.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;I have heard that jj can struggle with big repositories such as Nixpkgs and
have noticed some issues here and there when using with NixOS.
I&#x27;m hoping that as the project matures,it gets better on this front.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;This is just the start of what is possible, here are some resources about
it if you&#x27;re interested:&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;resources&quot;&gt;Resources&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jj-vcs&#x2F;jj&quot;&gt;jj_github&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;jj-vcs.github.io&#x2F;jj&#x2F;latest&#x2F;tutorial&#x2F;&quot;&gt;official_tutorial&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;v5.chriskrycho.com&#x2F;essays&#x2F;jj-init&#x2F;&quot;&gt;jj_init&lt;&#x2F;a&gt; # very good article&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;steveklabnik.github.io&#x2F;jujutsu-tutorial&#x2F;&quot;&gt;steves_jj_tutorial&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;


    </div>

    <script defer src="https://saylesss88.github.io/elasticlunr.min.js"></script>
    <script defer>
      let index;

      fetch(`${baseUrl}/search_index.en.json`)
        .then((response) => response.json())
        .then((data) => {
          index = elasticlunr.Index.load(data);

          const searchInput = document.getElementById("search");
          const resultsContainer = document.querySelector(".search-results");
          const resultsList = document.querySelector(".search-results__items");

          searchInput.addEventListener("input", (e) => {
            const query = e.target.value.trim();

            if (!query || !index) {
              resultsContainer.style.display = "none";
              resultsList.innerHTML = "";
              return;
            }

            const results = index.search(query, { expand: true });

            if (results.length > 0) {
              resultsList.innerHTML = results
                .map((result) => {
                  const ref = index.documentStore.getDoc(result.ref);
                  return `<li><a href="${ref.permalink}">${ref.title}</a></li>`;
                })
                .join("");
              resultsContainer.style.display = "block";
            } else {
              resultsList.innerHTML = "<li>No results found.</li>";
              resultsContainer.style.display = "block";
            }
          });
        })
        .catch((err) => {
          console.error("Search index failed to load:", err);
        });
    </script>

    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
        const darkModeToggle = document.getElementById("dark-mode-toggle");
        const body = document.body;

        const savedTheme = localStorage.getItem("theme") || "light";

        // Apply the saved theme on load
        if (savedTheme === "dark") {
          body.classList.add("dark-mode");
        }

        darkModeToggle.addEventListener("click", () => {
          body.classList.toggle("dark-mode");
          const currentTheme = body.classList.contains("dark-mode")
            ? "dark"
            : "light";
          localStorage.setItem("theme", currentTheme);
        });
      });
    </script>
  </body>
</html>
