<!DOCTYPE HTML>
<html lang="en" class="coal sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GnuPG &amp; gpg-agent on NixOS - nix-book</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ca6ed5dd.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/extra-4e96a6d1.css">
        <link rel="stylesheet" href="../theme/rss-button-d84d8455.css">
        <link rel="stylesheet" href="../theme/css/catppuccin-mocha-code-21d34636.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "coal";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "../searchindex-1897efae.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-ed34199c.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">nix-book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/saylesss88/nix-book.git" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <script>window.CONTENT_COLLECTIONS = {"collections":{"blog":[{"author":"saylesss88","collection":"blog","date":"2026-01-17T00:00:00+00:00","description":null,"draft":false,"path":"nix/encrypted_zfs.md","preview_html":"<p>I tested this on the libvirt stack with KVM, this should work on bare metal with\na few omissions.</p><p>This saves a ton of typing‚Ä¶</p><p>Boot the minimal ISO</p>","tags":["Virtual Machines","KVM","Impermanence","Encryption"],"title":"ZFS with LUKS and Impermanence"},{"author":"saylesss88","collection":"blog","date":"2026-01-16T00:00:00+00:00","description":null,"draft":false,"path":"nix/zfs_impermanence.md","preview_html":"<p>Yet another blog post inspired by\n<a href=\"https://grahamc.com/blog/erase-your-darlings/\">erase your darlings</a></p><p>I only tested this within a VM although with a few small tweaks it should work\non bare metal. I used the libvirtd stack with KVM for this.</p><p>NOTE: This example doesn‚Äôt use encryption, it would be easy to add ZFS Native\nEncryption by changing the first <code>zpool</code> command. It‚Äôs good enough for most\npeople but does leak some metadata. I‚Äôll add a LUKS example eventually which\nis more involved.</p>","tags":["Virtual Machines","KVM","Impermanence"],"title":"ZFS Impermanence in a VM"},{"author":"saylesss88","collection":"blog","date":"2026-01-15T00:00:00+00:00","description":null,"draft":false,"path":"nix/gpg-agent.md","preview_html":"<p>‚ö†Ô∏è <strong>SECURITY WARNING</strong>: This guide involves sensitive cryptographic material.\n<strong>Never share your private key or passphrase</strong>. Backup your keys and handle\nthem with extreme care.</p><p><img src=\"../images/gnupg.png\" alt=\"GnuPG\" /></p><p>The <a href=\"https://gpg.fail\">gpg.fail</a> is a write-up of real-world weaknesses in\nGPG/OpenPGP implementations and edge cases in the OpenPGP ecosystem‚Äînot the\nunderlying math of modern cryptography. ‚Äã The core idea is that signature\nverification needs two things: correct cryptography and confidence that the data\nyou think was verified is actually the same data the verifier processed, which\ncan break down when formats are complex and tooling is permissive or ambiguous.</p>","tags":["Encryption","GnuPG","security"],"title":"GnuPG gpg-agent"},{"author":"saylesss88","collection":"blog","date":"2026-01-13T00:00:00+00:00","description":null,"draft":false,"path":"nix/hardening_NixOS.md","preview_html":"<p><img src=\"../images/guy_fawks.png\" alt=\"guy fawks hacker\" /></p><p>Securing your NixOS system begins with a philosophy of minimalism, explicit\nconfiguration, and proactive control. As desktop Linux attracts more novice\nusers, it has become an increasingly valuable target for attackers. This makes\nit crucial to adopt security best practices early to protect your desktop from\ncommon attack vectors and to avoid configuration mistakes that could expose\nvulnerabilities.</p><p>‚ö†Ô∏è Warning: I am not a security expert. This guide presents various options\nfor hardening NixOS, but it is your responsibility to evaluate whether each\nadjustment suits your specific needs and environment. Security hardening and\nprocess isolation can introduce stability challenges, compatibility issues, or\nunexpected be","tags":["security","privacy","hardening"],"title":"Hardening NixOS"},{"author":"saylesss88","collection":"blog","date":"2026-01-11T00:00:00+00:00","description":null,"draft":false,"path":"nixos_containers.md","preview_html":"<p><img src=\"images/boxes.cleaned.png\" alt=\"boxes\" /></p><p>NixOS containers are lightweight <code>systemd-nspawn</code> containers managed\ndeclaratively through your NixOS configuration. They allow you to run separate,\nminimal NixOS instances on the same machine, each with its own services,\npackages, and (optionally) network stack.</p><p>‚ùó NixOS‚Äô containers do not provide full security out of the box (just like\ndocker). They do give you a separate chroot, but a privileged user (root) in a\ncontainer can escape the container and become root on the host system.\n‚Äì<a href=\"https://blog.beardhatcode.be/2020/12/Declarative-Nixos-Containers.html\">beardhatcode Declarative-Nixos-Containers</a></p>","tags":["nixos","containers"],"title":"NixOS Containers"},{"author":"saylesss88","collection":"blog","date":"2025-12-31T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/rust_crate_to_nixpkgs.md","preview_html":"<p>NOTE: This example assumes you‚Äôre packaging a crate that‚Äôs already on\ncrates.io, or you‚Äôre packaging an existing Rust project for nixpkgs.</p><p>Nixpkgs is a big repository, so it helps to start with a focused workflow:\ncreate a branch, add a package under <code>pkgs/by-name/</code>, build it, then open a PR.</p><pre><code class=\"language-bash\">git clone git@github.com:your-user/nixpkgs.git\ncd nixpkgs\ngit remote add upstream git@github.com:NixOS/nixpkgs.git\n</code></pre>\n<p>(SSH avoids HTTPS helper issues)</p>","tags":["packaging","rust","nixpkgs"],"title":"Packaging a Rust crate for Nixpkgs"},{"author":"saylesss88","collection":"blog","date":"2025-12-25T00:00:00+00:00","description":null,"draft":false,"path":"nix/hardening_networking.md","preview_html":"<p>Since networks and systems vary, some adjustments may cause unexpected issues,\nespecially around critical components like DNS or firewalls. Always review and\ntest changes in a controlled environment before applying them broadly.</p><p>Understand the trade-offs and tailor the settings to your threat model and\nworkflow. Take what‚Äôs useful, adapt as needed, and seek expert guidance for\nmore advanced scenarios.</p><p>Every setup is unique, feel free to adapt or skip sections based on your needs.\nStart with the basics and build up as you gain confidence. The goal is\npractical, tested hardening tailored to you.</p>","tags":["hardening","networking","firewall"],"title":"Hardening Networking"},{"author":"saylesss88","collection":"blog","date":"2025-12-21T00:00:00+00:00","description":null,"draft":false,"path":"nix/browsing_security.md","preview_html":"<p>‚ÄúThe major problem with current systems is their inability to provide\neffective isolation between various programs running on one machine. E.g. if\nthe user‚Äôs Web browser gets compromised (due to a bug exploited by a malicious\nweb site), the OS is usually unable to protect other user‚Äôs applications and\ndata from also being compromised.‚Äù ‚ÄìQubes arch-spec</p><p>The web browser is the most complex, most exposed, and most vulnerable\napplication on a hardened Linux system. It is your primary interface with the\ninternet and, consequently, the primary vector for exploitation and tracking.</p><p>The <strong>Three Pillars of Web Defense</strong> To secure your browsing, you must balance\nthree often-conflicting goals:</p>","tags":["hardening","privacy","browsers"],"title":"Browsing Security"},{"author":"saylesss88","collection":"blog","date":"2025-12-08T00:00:00+00:00","description":"JJ Version Control","draft":false,"path":"vcs/jujutsu.md","preview_html":"<p><img src=\"../images/jujutsu.png\" alt=\"JJ Logo\" /></p><p>‚ö†Ô∏è <strong>Security Reminder</strong>: Never commit secrets (passwords, API keys, tokens,\netc.) in plain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like <code>sops-nix</code> or <code>agenix</code>\nto keep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>Jujutsu (jj) is a modern, Git-compatible version control system designed to\nsimplify and improve the developer experience. It offers a new approach to\ndistributed version control, focusing on a more intuitive workflow, powerful\nundo capabilities, and a branchless model that reduces common pitfalls of Git.</p>","tags":["vcs","jj"],"title":"JJ VCS"},{"author":"saylesss88","collection":"blog","date":"2025-12-06T00:00:00+00:00","description":null,"draft":false,"path":"nix/encrypted_impermanence.md","preview_html":"<p>‚ùó Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><pre><code class=\"language-nix\"># flake.nix\n{\n  description = \"NixOS configuration\";\n\n  inputs = {\n    nixpkgs.url = \"github:nixos/nixpkgs/nixos-unstable\";\n    disko.url = \"github:nix-community/disko/latest\";\n    disko.input","tags":["impermanence","security"],"title":"Encrypted Impermanence"},{"author":"saylesss88","collection":"blog","date":"2025-12-06T00:00:00+00:00","description":null,"draft":false,"path":"nix/kvm.md","preview_html":"<p><img src=\"/images/steampunk5.cleaned.png\" alt=\"sp5\" /></p><p><strong>Host</strong> <code>secureblue</code> = Fedora Atomic with <strong>SELinux enforcing</strong>, <strong>sVirt</strong>,\n<strong>Secure Boot</strong>, and hardened defaults.</p><p><strong>Guest</strong>: NixOS in a VM ‚Üí full declarative power, near zero risk to host.</p>","tags":["KVM","Virtual Machines","secureblue"],"title":"KVM"},{"author":"saylesss88","collection":"blog","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"flakes/helix_flake_4.4.md","preview_html":"<p><img src=\"../images/helix.png\" alt=\"Helix Logo\" />‚Äì<a href=\"https://helix-editor.com/\">helix-editor.com</a></p><p>As we‚Äôve seen from previous examples, the helix editor repository includes a few\n<code>.nix</code> files including a <code>flake.nix</code>. Their flake uses a lot of idiomatic Nix\ncode and advanced features. First I will break down their <code>flake.nix</code> and\n<code>default.nix</code> to understand why they do certain things. And finally, we will\nchange the build to ‚Äúdebug‚Äù mode demonstrating how easily you can modify the\nbehavior of a package defined within a Nix flake without changing the original\nsource code or the upstream flake directly.</p><pre><code class=\"language-bash\">git clone https://github.com/helix-editor/helix.git\ncd helix\n</code></pre>\n<p>When you enter ","tags":["nixos","flakes","helix"],"title":"Understanding the Helix Flake"},{"author":"saylesss88","collection":"blog","date":"2025-12-04T00:00:00+00:00","description":null,"draft":false,"path":"nix/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets‚Äîlike API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it‚Äôs also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":["secrets","sops-nix","hardening"],"title":"Sops-Nix"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"intro_to_nushell_on_NixOS.md","preview_html":"<p><img src=\"images/nu.png\" alt=\"Nu\" /></p><p><strong>TL;DR</strong>:I recently switched default shells from zsh to nushell, this post is\nabout some of the challenges and advantages of using nushell with NixOS.</p><p>While the average user might not immediately see significant advantages, those\nwho frequently work with structured data formats like JSON, YAML, and CSV ‚Äì\nsuch as developers interacting with APIs, system administrators managing\nconfigurations, and data professionals ‚Äì will likely find Nushell‚Äôs native\ndata handling and powerful pipeline capabilities a plus. Additionally, users\nwho value a more consistent and safer scripting experience might appreciate\nNushell‚Äôs language-first design and features like strong typing.</p>","tags":["nushell","shells"],"title":"Intro to Nushell"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"functions/functions_and_modules_2.2.md","preview_html":"<p>When you start exploring NixOS configurations or tools like Home Manager, you‚Äôll\nencounter a concept called Nix Modules. Modules are also functions, but they\nbehave differently regarding their arguments, which can be a source of\nconfusion.</p><p><strong>What are NixOS Modules</strong>?</p><p>Nix Modules are a powerful system built on top of basic Nix functions, primarily\nused for declarative system configurations (like NixOS, Home Manager, NixOps,\netc.). They allow you to define parts of your system configuration in separate\nfiles that are then composed together.</p>","tags":["nixos","functions"],"title":"Functions and NixOS Modules"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_outputs_4.2.md","preview_html":"<p>Flake outputs are what the flake produces when built. Flakes can have multiple\noutputs simultaneously such as:</p><p><strong>Packages</strong>: Self-contained bundles that are built using derivations and\nprovide either some kind of software or dependencies of software.</p><p><a href=\"https://saylesss88.github.io/NixOS_Modules_Explained_3.html\">NixOS modules</a></p>","tags":["nixos","flakes","outputs"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_inputs_4.1.md","preview_html":"<p>The attribute <code>inputs</code> specifies the dependencies of a flake, as an attrset\nmapping input names to flake references.</p><p>If a repository provides a <code>flake.nix</code> you can include it as an input in your\n<code>flake.nix</code>.</p><p>For example, I like yazi as my file explorer and have been using helix as my\neditor. To be able to get yazi to work with helix I needed the latest versions\nof both yazi and helix. One way to get the latest versions was to add their\nflakes as inputs to my flake:</p>","tags":["nixos","flakes"],"title":"Flake Inputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_examples_4.3.md","preview_html":"<p>This chapter provides practical examples to illustrate the concepts discussed in\n‚ÄúNix Flakes Explained.‚Äù</p><p>NixOS modules and configurations offer us a powerful and composable way to\ndefine and share system configurations. Imagine we have several independent\n‚Äúplayers,‚Äù each with their own unique set of configurations or modules. How do\nwe combine these individual contributions into a single, cohesive system without\ndirectly altering each player‚Äôs original flake?</p><p>This example demonstrates how flakes can extend and compose each other, allowing\nyou to layer configurations on top of existing ones. This is particularly useful\nwhen you want to:</p>","tags":["nixos","flakes"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-27T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Pull_Requests_11.md","preview_html":"<p><img src=\"images/gruv16.png\" alt=\"gruv16\" /></p><p><strong>Pull requests</strong> communicate changes to a branch in a repository. Once a pull\nrequest is opened, you can review changes with collaborators and add follow-up\ncommits.</p><p>A <strong>pull request</strong> is a proposal to merge a set of changes from one branch\ninto another. In a pull request, collaborators can review and discuss the\nproposed set of changes before they integrate the changes into the main\ncodebase.</p>","tags":["nixos","nixpkgs"],"title":"Nix Pull Requests"},{"author":"saylesss88","collection":"blog","date":"2025-11-24T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unenc_impermanence.md","preview_html":"<p>Figure 1: Impermanence Logo: Image of the Impermanence logo. Sourced from the</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p>This guide is for an unencrypted setup, there are a few links at the end for\nencrypted setups. This guide follows the previous\n<a href=\"https://saylesss88.github.io/installation/unencrypted_setups.html\">minimal install guide</a>\nbut you should be able to adjust it carefully to meet your needs.</p>","tags":["nixos","btrfs","impermanence"],"title":"Unencrypted BTRFS Impermanence with Flakes"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"functions/practical_functions_2.1.md","preview_html":"<p><img src=\"images/coding6.png\" alt=\"coding6\" /></p><p><a href=\"https://gitlab.com/api/v4/projects/4207231/packages/generic/graphviz-releases/2.49.3/graphviz-2.49.3.tar.gz\">graphviz</a></p><p><a href=\"https://ftp.gnu.org/gnu/hello/hello-2.12.1.tar.gz\">hello</a></p>","tags":["nixos","functions"],"title":"Practical Nix Functions"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"flakes/overlays_4.5.md","preview_html":"<p><img src=\"../images/pokego.png\" alt=\"Pokego Logo\" />‚Äì<a href=\"https://github.com/rubiin/pokego\">pokego repo</a></p><p>Overlays are Nix functions that accept two arguments, <code>final</code> and <code>prev</code> and\nreturn a set of packages. Overlays are similar to <code>packageOverrides</code> as a way to\ncustomize Nixpkgs, <code>packageOverrides</code> acts as an overlay with only the <code>prev</code>\nargument. Therefore, <code>packageOverrides</code> is appropriate for basic use, but\noverlays are more powerful and easier to distribute.</p><p>Example:</p>","tags":["nixos","overlays","outputs"],"title":"Overlays"}],"notes":[{"author":"saylesss88","collection":"notes","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"nix/cachix_devour.md","preview_html":"<p>Using devour-flake to Cache All Your Flake Outputs to Cachix</p><p>When working with Nix flakes, it‚Äôs common to have many outputs: packages, apps,\ndev shells, NixOS or Darwin configurations, and more. Efficiently building and\ncaching all these outputs can be challenging, especially in CI or when\ncollaborating. This is where devour-flake and Cachix shine.</p><p><strong>Why Use the devour-flake?</strong></p>","tags":["cache","flakes"],"title":"Cachix devour-flake"},{"author":"saylesss88","collection":"notes","date":"2025-12-04T00:00:00+00:00","description":null,"draft":false,"path":"nix/whonix_kvm.md","preview_html":"<p><img src=\"../images/swappy-20250901-101339.cleaned.png\" alt=\"Whonix Logo\" /></p><p>‚ö†Ô∏è WARNING: There is no general software that can guarantee absolute anonymity\nor security; perfect security is a myth. Security is a continuous process, not\na one-time product. It also depends on time and resources: if an adversary has\nenough of either, eventual compromise is probable. However, by layering\ndefenses and following best practices, we can make attacks costly and\ntime-consuming, deterring all but highly targeted adversaries.</p><p>It is highly recommended to harden your Host Machine as Type 2 hypervisors are\nonly as secure as their host. KVM is actually a type 1 hypervisor but relies on\nQEMU for emulation which is a Type 2 hypervisor. This actually makes it a sort\nof hybrid in between Type 1 ","tags":["Virtual Machines","KVM","Whonix"],"title":"Whonix KVM on NixOS"},{"author":"saylesss88","collection":"notes","date":"2025-11-30T00:00:00+00:00","description":"Git","draft":false,"path":"vcs/git.md","preview_html":"<p>‚ö†Ô∏è <strong>Important</strong>: Never commit secrets (passwords, API keys, tokens, etc.) in\nplain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like sops-nix or agenix to\nkeep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>It‚Äôs also important to understand that <strong>all files in the <code>/nix/store</code> are\nworld-readable by default</strong> This has important security implications for anyone\nmanaging sensitive data on a NixOS system.</p><p>What Does ‚ÄúWorld-Readable‚Äù Mean?</p>","tags":["vcs","git"],"title":"Git"},{"author":"saylesss88","collection":"notes","date":"2025-11-29T00:00:00+00:00","description":null,"draft":false,"path":"Intro_to_Nix_Derivations_7.md","preview_html":"<p><img src=\"images/gruv10.png\" alt=\"gruv10\" /></p><p>Nix‚Äôs build instructions, known as <strong>derivations</strong>, are defined using the Nix\nLanguage. These derivations can describe anything from individual software\npackages to complete system configurations. The Nix package manager then\ndeterministically ‚Äúrealizes‚Äù (builds) these derivations, ensuring consistency\nbecause they rely solely on a predefined set of inputs.</p><p>Most things in NixOS are built around derivations. Your NixOS system is\ndescribed by such a single system derivation. When you want to apply a new\nconfiguration, <code>nixos-rebuild</code> handles the process:</p>","tags":["notes","derivations"],"title":"Intro to Derivations"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/fork_clone_contribute.md","preview_html":"<p>In the <a href=\"https://github.com/NixOS/nixpkgs\">Nixpkgs</a> Repository.</p><p>Click Fork, then Create a new Fork.</p><p>Uncheck the box ‚ÄúOnly fork the <code>master</code> branch‚Äù, for development we will need\nmore branches.</p>","tags":["git","vcs","nixpkgs"],"title":"Fork, Clone, Contribute"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/impermanence.md","preview_html":"<p>Figure 1: <strong>Impermanence Logo</strong>: Image of the Impermanence logo. Sourced from\nthe</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p><img src=\"../images/Impermanence.png\" alt=\"Impermanence Logo\" /></p>","tags":["impermanence","security"],"title":"Unencrypted Impermanence"}],"posts":[{"author":null,"collection":null,"date":"2026-01-04T19:05:54.846247871+00:00","description":"\n","draft":false,"path":"index.md","preview_html":"","tags":[],"title":"index"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/overlay.md","preview_html":"<p>The following is done with a local clone of Nixpkgs located at <code>~/src/nixpkgs</code>.</p><p>In this example, we will create an overlay to override the version of\n<code>btrfs-progs</code>. In the root directory of our local clone of Nixpkgs\n(i.e.<code>~/src/nixpkgs</code>) we can run the following command to locate <code>btrfs-progs</code>\nwithin Nixpkgs:</p><pre><code class=\"language-bash\">fd 'btrfs-progs' .\n./pkgs/by-name/bt/btrfs-progs/\n</code></pre>\n<p>Open the <code>package.nix</code> in the above directory and copy the <code>src</code> block within\nthe <code>stdenv.mkDerivation</code> block like so:</p>","tags":[],"title":"Nixpkgs Overlays"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/local_package.md","preview_html":"<p>This chapter demonstrates the fundamental pattern for creating a package. Every\npackage recipe is a file that declares a function. This function takes the\npackages dependencies as argument.</p><p>In this example we‚Äôll make a simple package with <code>coreutils</code> and build it.\nDemonstrating the process of building and testing a local package.</p><p>This chapter will assume you have already have a cloned fork of Nixpkgs. I\nchoose to clone mine to the <code>~/src/</code> directory.</p>","tags":[],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nix_package_manager.md","preview_html":"<p>Nix is a <em>purely functional package manager</em>. This means that it treats packages\nlike values in purely functional programming languages ‚Äì they are built by\nfunctions that don‚Äôt have side-effects, and they never change after they have\nbeen built.</p><p>Nix stores packages in the <em>Nix store</em>, usually the directory <code>/nix/store</code>,\nwhere each package has its own unique subdirectory such as:</p><pre><code class=\"language-bash\">/nix/store/y53c0lamag5wpx7vsiv7wmnjdgq97yd6-yazi-25.5.14pre20250526_74a8ea9\n</code></pre>\n<p>You can use the Nix on most Linux distributions and Mac OS also has good support\nfor Nix. It should work on most platforms that support POSIX threads and have a\nC++11 compiler.</p>","tags":[],"title":"Nix Package Manager"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nix_language.md","preview_html":"<p>The Nix language is designed for conveniently creating and composing\n<em>derivations</em> precise descriptions of how contents of files are used to derive\nnew files. ‚Äì<a href=\"https://nix.dev/manual/nix/2.28/language/\">Nix Reference Manual</a></p><p>Nix is often described as ‚ÄúJSON with functions.‚Äù It‚Äôs a declarative language\nwhere you define outcomes, not step-by-step instructions. Instead of writing\nsequential code, you create expressions that describe data structures,\nfunctions, and dependencies. These expressions are evaluated lazily, meaning Nix\ncomputes values only when needed, making it efficient for managing large\nsystems.</p><p>You can plug most of the following into the <code>nix repl</code> I‚Äôm showing it in a\nsingle code block here for brevity:</p>","tags":[],"title":"Nix Lang"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nixLang/nix_paths.md","preview_html":"<p>The following examples are done with a local <code>nixpkgs</code> clone located at\n<code>~/src/nixpkgs</code></p><p>Paths in Nix always need a <code>/</code> in them and always expand to absolute paths\nrelative to your current directory.</p><pre><code class=\"language-bash\">nix repl\nnix-repl&gt; ./.\n/home/jr/src/nixpkgs\nnix-repl&gt; ./. + \"/lib\"\n/home/jr/src/nixpkgs/lib\n</code></pre>\n<p>Nix does <em>path normalization</em> every time you append strings, so if you just add\na slash <code>/</code> its not actually there:</p>","tags":[],"title":"Nix Paths"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/README.md","preview_html":"<p>üìå <strong>How to Use This Guide</strong></p><p><strong>Read warnings</strong>: Advanced hardening can break compatibility or cause data\nloss! Pause and research before enabling anything not listed above unless you\nunderstand the consequences.</p><p><strong>Hardening NixOS</strong>:</p>","tags":[],"title":"Readme1"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unencrypted_setups.md","preview_html":"<p>Figure 1: BTRFS Logo: Image of the BTRFS logo. Sourced from the BTRFS repo BTRFS\nlogo</p><p>Why I Chose BTRFS I chose BTRFS because I was already familiar with it from\nusing it with Arch Linux and I found it to be very easy to use. From what I‚Äôve\nread, there are licensing issues between the Linux Kernel and ZFS which means\nthat ZFS is not part of the Linux Kernel; it‚Äôs maintained by the OpenZFS project\nand available as a separate kernel module. This can cause issues and make you\nthink more about your filesystem than I personally want to at this point.</p><p>A <strong>Btrfs subvolume</strong> is essentially a distinct section within a Btrfs\nfilesystem that maintains its own set of files and directories, along with a\nseparate inode numbering system. Unlike block-level partitions (such as ","tags":[],"title":"Unencrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/encrypted_impermanence.md","preview_html":"<p>‚ùó Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><p>As a system operates, it gradually accumulates state on its root partition. This\nstate is stored in various directories such as <code>/etc</code> and <code>/var</code>, capturing all\nthe configuration changes, logs, and o","tags":[],"title":"Encrypted Impermanence"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets‚Äîlike API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it‚Äôs also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":[],"title":"Sops-Nix"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/lanzaboote.md","preview_html":"<p>‚ö†Ô∏è <strong>Warning: This can easily brick your system</strong> ‚ö†Ô∏è</p><p>We will mainly follow the lanzaboote\n<a href=\"https://github.com/nix-community/lanzaboote/blob/master/docs/QUICK_START.md\">Quick Start Guide</a></p><p>For Windows dual-booters and BitLocker users, you should export your BitLocker\nrecovery keys and confirm that they are correct. Refer to this\n<a href=\"https://support.microsoft.com/en-us/windows/find-your-bitlocker-recovery-key-6b71ad27-0b89-ea08-f143-056f5ab347d6\">Microsoft support article</a></p>","tags":[],"title":"Lanzaboote"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/enc_install.md","preview_html":"<p>NixOS supports file systems that are encrypted using LUKS (Linux Unified Key\nSetup). This guide walks you through an encrypted NixOS installation using Disko\nfor disk management and Btrfs for subvolumes. It is designed for users who want\nfull disk encryption and a modern filesystem layout. If you prefer an\nunencrypted setup, you can skip the LUKS and encryption steps, but this guide\nfocuses on security and flexibility.</p><p>If you choose to set up impermanence, ensure it matches your install. Encrypted\nSetup with Encrypted Impermanence and Unencrypted Setup with Unencrypted\nImpermanence.</p><p>‚ùó NOTE: This is a bit convoluted, there are a few paths you can follow. If\nyou choose to use the starter repo (<a href=\"https://github.com/saylesss88/my-flake\">https://github.com/saylesss88/my-fl","tags":[],"title":"Encrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/USB_keyfile.md","preview_html":"<p>This allows you to use a USB stick for your keyfile, with a backup in case you\nwant or need it. There is a setting <code>fallbackToPassword</code> that protects you in\ncase something fails with the USB key.</p><p>First, I‚Äôll show how to set up a dedicated USB stick for a keyfile. (i.e., one\nthat is only used for this). After that I will show the process of adding the\nkeyfile to a USB stick with existing data on it that you don‚Äôt want to lose.</p><p><strong>Generate the keyfile</strong></p>","tags":[],"title":"USB Keyfile"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/README.md","preview_html":"<p>This section provides detailed guides for installing NixOS. You‚Äôll choose\nbetween an <strong>unencrypted</strong> or <strong>encrypted</strong> base setup. After your core\ninstallation, you can explore adding optional features like <code>sops</code> for encrypted\nsecrets, <code>lanzaboote</code> for Secure Boot, or <code>impermanence</code> for a stateless system.</p><p><strong>Guide:</strong>\n<a href=\"https://saylesss88.github.io/installation/unenc/unencrypted_setups.html\">Minimal Btrfs-Subvol Install with Disko and Flakes</a></p><p><strong>Best for:</strong></p>","tags":[],"title":"My Chapter"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Working_with_Nixpkgs_Locally_10.md","preview_html":"<p><img src=\"images/server_rack.cleaned.png\" alt=\"server_rack\" /></p><p>Nixpkgs, the package repository for NixOS, is a powerful resource for building\nand customizing software.</p><p>Working with a local copy enhances development, debugging, and contribution\nworkflows.</p>","tags":[],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Debugging_and_Tracing_NixOS_Modules_9.md","preview_html":"<p>This chapter covers debugging NixOS modules, focusing on tracing module options\nand evaluating merges.</p><p><img src=\"images/coding4.png\" alt=\"404\" /></p><p><a href=\"https://saylesss88.github.io/posts/nix_modules_explained/\">nix-modules-explained</a></p>","tags":[],"title":"Debugging NixOS modules"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Comparing_Flakes_and_Traditional_Nix_8.md","preview_html":"<p>A key benefit of Nix Flakes is their <em>default</em> enforcement of <strong>pure\nevaluation</strong>.</p><p>In Nix, an <strong>impure operation</strong> depends on something <em>outside</em> its explicit\ninputs. Examples include:</p><p>Impurity leads to unpredictable builds that may differ across systems or time.</p>","tags":[],"title":"Comparing Flakes and Traditional Nix"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Top-Level_Attributes_5.md","preview_html":"<p>This explanation is based on insights from Infinisil, a prominent figure in the\nNix community, to help clarify the concept of top-level attributes within NixOS\nmodules.</p><p>In a NixOS system, everything is built from a single ‚Äúsystem derivation.‚Äù The\ncommand <code>nix-build '&lt;nixpkgs/nixos&gt;' -A system</code> initiates this build process.</p><p>The <code>-A system</code> part tells Nix to focus on the <code>system</code> attribute defined in the\n<code>'&lt;nixpkgs/nixos&gt;'</code> file (which is essentially <code>./default.nix</code> within the\nNixpkgs repository).</p>","tags":[],"title":"Top-Level Attributes"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Nix_Functions_2.md","preview_html":"<p><img src=\"images/trees2.cleaned.png\" alt=\"trees2\" /></p><p><strong>Functions</strong> are the building blocks of Nix, appearing everywhere in Nix\nexpressions and configurations. Mastering them is essential for writing\neffective Nix code and understanding tools like NixOS and Home Manager. This\nchapter explores how Nix functions work, focusing on their <strong>single-argument\nnature</strong>, <strong>currying</strong>, <strong>partial application</strong>, and their role in <strong>modules</strong>.</p><p>A <strong>Nix Function</strong> is a rule that takes an input (called an <strong>argument</strong>) and\nproduces an <strong>output</strong> based on that input. Unlike many programming languages,\nNix functions are designed to take exactly one argument at a time. This unique\napproach, co","tags":[],"title":"Understanding Nix Functions"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Package_Definitions_Explained_6.md","preview_html":"<p><img src=\"images/coding2.png\" alt=\"coding2\" /></p><p>In Nix, the concept of a <strong>package</strong> can refer to two things:</p><p>A collection of files and data that constitute a piece of software or an\nartifact.</p>","tags":[],"title":"Package Definitions Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Flakes_Explained_4.md","preview_html":"<p><img src=\"images/trees3.cleaned.png\" alt=\"trees3\" /></p><p>If you‚Äôre completely new, take a look at\n<a href=\"https://nixos.wiki/wiki/flakes#Installing_flakes\">this</a> to get flakes on your\nsystem.</p><p>For the Nix Flake man page type <code>man nix3 flake</code> and for a specific feature,\ntype something like <code>man nix3 flake-lock</code>.</p>","tags":[],"title":"Nix Flakes Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"NixOS_Modules_Explained_3.md","preview_html":"<p><img src=\"images/buildings1.png\" alt=\"buildings\" /></p><p><strong>TL;DR</strong>: In this chapter, we will break down the Nix module system used by\nboth NixOS and Home-Manager. We will discuss using home-manager as a module and\nthe flexibility that modules give us. We will touch on options and break down\nthe <code>vim</code> module from the Nixpkgs collection. Finally we will display how to\ntest modules with the repl.</p><p>Your <code>configuration.nix</code> is a module. For the Nixpkgs collection most modules\nare in <code>nixos/modules</code>.</p>","tags":[],"title":"Nix Module System Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Getting_Started_with_Nix_1.md","preview_html":"<p><img src=\"images/trees1.cleaned.png\" alt=\"trees\" /></p><p>Welcome to <em>nix-book</em>, an introductory book about Nix. This book leans more\ntowards using Flakes but will contrast traditional Nix where beneficial.\nOriginally, this content started as a blog. I‚Äôm refining its flow to make it\nmore cohesive.</p><p>In this chapter, I will touch on the different parts of the Nix ecosystem, give\na quick example of each and explain how they fit together.</p>","tags":[],"title":"Intro to Nix"}]},"entries":[{"author":"saylesss88","collection":"blog","date":"2026-01-17T00:00:00+00:00","description":null,"draft":false,"path":"nix/encrypted_zfs.md","preview_html":"<p>I tested this on the libvirt stack with KVM, this should work on bare metal with\na few omissions.</p><p>This saves a ton of typing‚Ä¶</p><p>Boot the minimal ISO</p>","tags":["Virtual Machines","KVM","Impermanence","Encryption"],"title":"ZFS with LUKS and Impermanence"},{"author":"saylesss88","collection":"blog","date":"2026-01-16T00:00:00+00:00","description":null,"draft":false,"path":"nix/zfs_impermanence.md","preview_html":"<p>Yet another blog post inspired by\n<a href=\"https://grahamc.com/blog/erase-your-darlings/\">erase your darlings</a></p><p>I only tested this within a VM although with a few small tweaks it should work\non bare metal. I used the libvirtd stack with KVM for this.</p><p>NOTE: This example doesn‚Äôt use encryption, it would be easy to add ZFS Native\nEncryption by changing the first <code>zpool</code> command. It‚Äôs good enough for most\npeople but does leak some metadata. I‚Äôll add a LUKS example eventually which\nis more involved.</p>","tags":["Virtual Machines","KVM","Impermanence"],"title":"ZFS Impermanence in a VM"},{"author":"saylesss88","collection":"blog","date":"2026-01-15T00:00:00+00:00","description":null,"draft":false,"path":"nix/gpg-agent.md","preview_html":"<p>‚ö†Ô∏è <strong>SECURITY WARNING</strong>: This guide involves sensitive cryptographic material.\n<strong>Never share your private key or passphrase</strong>. Backup your keys and handle\nthem with extreme care.</p><p><img src=\"../images/gnupg.png\" alt=\"GnuPG\" /></p><p>The <a href=\"https://gpg.fail\">gpg.fail</a> is a write-up of real-world weaknesses in\nGPG/OpenPGP implementations and edge cases in the OpenPGP ecosystem‚Äînot the\nunderlying math of modern cryptography. ‚Äã The core idea is that signature\nverification needs two things: correct cryptography and confidence that the data\nyou think was verified is actually the same data the verifier processed, which\ncan break down when formats are complex and tooling is permissive or ambiguous.</p>","tags":["Encryption","GnuPG","security"],"title":"GnuPG gpg-agent"},{"author":"saylesss88","collection":"blog","date":"2026-01-13T00:00:00+00:00","description":null,"draft":false,"path":"nix/hardening_NixOS.md","preview_html":"<p><img src=\"../images/guy_fawks.png\" alt=\"guy fawks hacker\" /></p><p>Securing your NixOS system begins with a philosophy of minimalism, explicit\nconfiguration, and proactive control. As desktop Linux attracts more novice\nusers, it has become an increasingly valuable target for attackers. This makes\nit crucial to adopt security best practices early to protect your desktop from\ncommon attack vectors and to avoid configuration mistakes that could expose\nvulnerabilities.</p><p>‚ö†Ô∏è Warning: I am not a security expert. This guide presents various options\nfor hardening NixOS, but it is your responsibility to evaluate whether each\nadjustment suits your specific needs and environment. Security hardening and\nprocess isolation can introduce stability challenges, compatibility issues, or\nunexpected be","tags":["security","privacy","hardening"],"title":"Hardening NixOS"},{"author":"saylesss88","collection":"blog","date":"2026-01-11T00:00:00+00:00","description":null,"draft":false,"path":"nixos_containers.md","preview_html":"<p><img src=\"images/boxes.cleaned.png\" alt=\"boxes\" /></p><p>NixOS containers are lightweight <code>systemd-nspawn</code> containers managed\ndeclaratively through your NixOS configuration. They allow you to run separate,\nminimal NixOS instances on the same machine, each with its own services,\npackages, and (optionally) network stack.</p><p>‚ùó NixOS‚Äô containers do not provide full security out of the box (just like\ndocker). They do give you a separate chroot, but a privileged user (root) in a\ncontainer can escape the container and become root on the host system.\n‚Äì<a href=\"https://blog.beardhatcode.be/2020/12/Declarative-Nixos-Containers.html\">beardhatcode Declarative-Nixos-Containers</a></p>","tags":["nixos","containers"],"title":"NixOS Containers"},{"author":null,"collection":null,"date":"2026-01-04T19:05:54.846247871+00:00","description":"\n","draft":false,"path":"index.md","preview_html":"","tags":[],"title":"index"},{"author":"saylesss88","collection":"blog","date":"2025-12-31T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/rust_crate_to_nixpkgs.md","preview_html":"<p>NOTE: This example assumes you‚Äôre packaging a crate that‚Äôs already on\ncrates.io, or you‚Äôre packaging an existing Rust project for nixpkgs.</p><p>Nixpkgs is a big repository, so it helps to start with a focused workflow:\ncreate a branch, add a package under <code>pkgs/by-name/</code>, build it, then open a PR.</p><pre><code class=\"language-bash\">git clone git@github.com:your-user/nixpkgs.git\ncd nixpkgs\ngit remote add upstream git@github.com:NixOS/nixpkgs.git\n</code></pre>\n<p>(SSH avoids HTTPS helper issues)</p>","tags":["packaging","rust","nixpkgs"],"title":"Packaging a Rust crate for Nixpkgs"},{"author":"saylesss88","collection":"blog","date":"2025-12-25T00:00:00+00:00","description":null,"draft":false,"path":"nix/hardening_networking.md","preview_html":"<p>Since networks and systems vary, some adjustments may cause unexpected issues,\nespecially around critical components like DNS or firewalls. Always review and\ntest changes in a controlled environment before applying them broadly.</p><p>Understand the trade-offs and tailor the settings to your threat model and\nworkflow. Take what‚Äôs useful, adapt as needed, and seek expert guidance for\nmore advanced scenarios.</p><p>Every setup is unique, feel free to adapt or skip sections based on your needs.\nStart with the basics and build up as you gain confidence. The goal is\npractical, tested hardening tailored to you.</p>","tags":["hardening","networking","firewall"],"title":"Hardening Networking"},{"author":"saylesss88","collection":"blog","date":"2025-12-21T00:00:00+00:00","description":null,"draft":false,"path":"nix/browsing_security.md","preview_html":"<p>‚ÄúThe major problem with current systems is their inability to provide\neffective isolation between various programs running on one machine. E.g. if\nthe user‚Äôs Web browser gets compromised (due to a bug exploited by a malicious\nweb site), the OS is usually unable to protect other user‚Äôs applications and\ndata from also being compromised.‚Äù ‚ÄìQubes arch-spec</p><p>The web browser is the most complex, most exposed, and most vulnerable\napplication on a hardened Linux system. It is your primary interface with the\ninternet and, consequently, the primary vector for exploitation and tracking.</p><p>The <strong>Three Pillars of Web Defense</strong> To secure your browsing, you must balance\nthree often-conflicting goals:</p>","tags":["hardening","privacy","browsers"],"title":"Browsing Security"},{"author":"saylesss88","collection":"blog","date":"2025-12-08T00:00:00+00:00","description":"JJ Version Control","draft":false,"path":"vcs/jujutsu.md","preview_html":"<p><img src=\"../images/jujutsu.png\" alt=\"JJ Logo\" /></p><p>‚ö†Ô∏è <strong>Security Reminder</strong>: Never commit secrets (passwords, API keys, tokens,\netc.) in plain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like <code>sops-nix</code> or <code>agenix</code>\nto keep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>Jujutsu (jj) is a modern, Git-compatible version control system designed to\nsimplify and improve the developer experience. It offers a new approach to\ndistributed version control, focusing on a more intuitive workflow, powerful\nundo capabilities, and a branchless model that reduces common pitfalls of Git.</p>","tags":["vcs","jj"],"title":"JJ VCS"},{"author":"saylesss88","collection":"blog","date":"2025-12-06T00:00:00+00:00","description":null,"draft":false,"path":"nix/encrypted_impermanence.md","preview_html":"<p>‚ùó Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><pre><code class=\"language-nix\"># flake.nix\n{\n  description = \"NixOS configuration\";\n\n  inputs = {\n    nixpkgs.url = \"github:nixos/nixpkgs/nixos-unstable\";\n    disko.url = \"github:nix-community/disko/latest\";\n    disko.input","tags":["impermanence","security"],"title":"Encrypted Impermanence"},{"author":"saylesss88","collection":"blog","date":"2025-12-06T00:00:00+00:00","description":null,"draft":false,"path":"nix/kvm.md","preview_html":"<p><img src=\"/images/steampunk5.cleaned.png\" alt=\"sp5\" /></p><p><strong>Host</strong> <code>secureblue</code> = Fedora Atomic with <strong>SELinux enforcing</strong>, <strong>sVirt</strong>,\n<strong>Secure Boot</strong>, and hardened defaults.</p><p><strong>Guest</strong>: NixOS in a VM ‚Üí full declarative power, near zero risk to host.</p>","tags":["KVM","Virtual Machines","secureblue"],"title":"KVM"},{"author":"saylesss88","collection":"notes","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"nix/cachix_devour.md","preview_html":"<p>Using devour-flake to Cache All Your Flake Outputs to Cachix</p><p>When working with Nix flakes, it‚Äôs common to have many outputs: packages, apps,\ndev shells, NixOS or Darwin configurations, and more. Efficiently building and\ncaching all these outputs can be challenging, especially in CI or when\ncollaborating. This is where devour-flake and Cachix shine.</p><p><strong>Why Use the devour-flake?</strong></p>","tags":["cache","flakes"],"title":"Cachix devour-flake"},{"author":"saylesss88","collection":"blog","date":"2025-12-05T00:00:00+00:00","description":null,"draft":false,"path":"flakes/helix_flake_4.4.md","preview_html":"<p><img src=\"../images/helix.png\" alt=\"Helix Logo\" />‚Äì<a href=\"https://helix-editor.com/\">helix-editor.com</a></p><p>As we‚Äôve seen from previous examples, the helix editor repository includes a few\n<code>.nix</code> files including a <code>flake.nix</code>. Their flake uses a lot of idiomatic Nix\ncode and advanced features. First I will break down their <code>flake.nix</code> and\n<code>default.nix</code> to understand why they do certain things. And finally, we will\nchange the build to ‚Äúdebug‚Äù mode demonstrating how easily you can modify the\nbehavior of a package defined within a Nix flake without changing the original\nsource code or the upstream flake directly.</p><pre><code class=\"language-bash\">git clone https://github.com/helix-editor/helix.git\ncd helix\n</code></pre>\n<p>When you enter ","tags":["nixos","flakes","helix"],"title":"Understanding the Helix Flake"},{"author":"saylesss88","collection":"notes","date":"2025-12-04T00:00:00+00:00","description":null,"draft":false,"path":"nix/whonix_kvm.md","preview_html":"<p><img src=\"../images/swappy-20250901-101339.cleaned.png\" alt=\"Whonix Logo\" /></p><p>‚ö†Ô∏è WARNING: There is no general software that can guarantee absolute anonymity\nor security; perfect security is a myth. Security is a continuous process, not\na one-time product. It also depends on time and resources: if an adversary has\nenough of either, eventual compromise is probable. However, by layering\ndefenses and following best practices, we can make attacks costly and\ntime-consuming, deterring all but highly targeted adversaries.</p><p>It is highly recommended to harden your Host Machine as Type 2 hypervisors are\nonly as secure as their host. KVM is actually a type 1 hypervisor but relies on\nQEMU for emulation which is a Type 2 hypervisor. This actually makes it a sort\nof hybrid in between Type 1 ","tags":["Virtual Machines","KVM","Whonix"],"title":"Whonix KVM on NixOS"},{"author":"saylesss88","collection":"blog","date":"2025-12-04T00:00:00+00:00","description":null,"draft":false,"path":"nix/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets‚Äîlike API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it‚Äôs also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":["secrets","sops-nix","hardening"],"title":"Sops-Nix"},{"author":"saylesss88","collection":"notes","date":"2025-11-30T00:00:00+00:00","description":"Git","draft":false,"path":"vcs/git.md","preview_html":"<p>‚ö†Ô∏è <strong>Important</strong>: Never commit secrets (passwords, API keys, tokens, etc.) in\nplain text to your Git repository. If you plan to publish your NixOS\nconfiguration, always use a secrets management tool like sops-nix or agenix to\nkeep sensitive data safe. See the\n<a href=\"https://saylesss88.github.io/installation/enc/sops-nix.html\">Sops-Nix Guide</a>\nfor details.</p><p>It‚Äôs also important to understand that <strong>all files in the <code>/nix/store</code> are\nworld-readable by default</strong> This has important security implications for anyone\nmanaging sensitive data on a NixOS system.</p><p>What Does ‚ÄúWorld-Readable‚Äù Mean?</p>","tags":["vcs","git"],"title":"Git"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"intro_to_nushell_on_NixOS.md","preview_html":"<p><img src=\"images/nu.png\" alt=\"Nu\" /></p><p><strong>TL;DR</strong>:I recently switched default shells from zsh to nushell, this post is\nabout some of the challenges and advantages of using nushell with NixOS.</p><p>While the average user might not immediately see significant advantages, those\nwho frequently work with structured data formats like JSON, YAML, and CSV ‚Äì\nsuch as developers interacting with APIs, system administrators managing\nconfigurations, and data professionals ‚Äì will likely find Nushell‚Äôs native\ndata handling and powerful pipeline capabilities a plus. Additionally, users\nwho value a more consistent and safer scripting experience might appreciate\nNushell‚Äôs language-first design and features like strong typing.</p>","tags":["nushell","shells"],"title":"Intro to Nushell"},{"author":"saylesss88","collection":"blog","date":"2025-11-30T00:00:00+00:00","description":null,"draft":false,"path":"functions/functions_and_modules_2.2.md","preview_html":"<p>When you start exploring NixOS configurations or tools like Home Manager, you‚Äôll\nencounter a concept called Nix Modules. Modules are also functions, but they\nbehave differently regarding their arguments, which can be a source of\nconfusion.</p><p><strong>What are NixOS Modules</strong>?</p><p>Nix Modules are a powerful system built on top of basic Nix functions, primarily\nused for declarative system configurations (like NixOS, Home Manager, NixOps,\netc.). They allow you to define parts of your system configuration in separate\nfiles that are then composed together.</p>","tags":["nixos","functions"],"title":"Functions and NixOS Modules"},{"author":"saylesss88","collection":"notes","date":"2025-11-29T00:00:00+00:00","description":null,"draft":false,"path":"Intro_to_Nix_Derivations_7.md","preview_html":"<p><img src=\"images/gruv10.png\" alt=\"gruv10\" /></p><p>Nix‚Äôs build instructions, known as <strong>derivations</strong>, are defined using the Nix\nLanguage. These derivations can describe anything from individual software\npackages to complete system configurations. The Nix package manager then\ndeterministically ‚Äúrealizes‚Äù (builds) these derivations, ensuring consistency\nbecause they rely solely on a predefined set of inputs.</p><p>Most things in NixOS are built around derivations. Your NixOS system is\ndescribed by such a single system derivation. When you want to apply a new\nconfiguration, <code>nixos-rebuild</code> handles the process:</p>","tags":["notes","derivations"],"title":"Intro to Derivations"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_outputs_4.2.md","preview_html":"<p>Flake outputs are what the flake produces when built. Flakes can have multiple\noutputs simultaneously such as:</p><p><strong>Packages</strong>: Self-contained bundles that are built using derivations and\nprovide either some kind of software or dependencies of software.</p><p><a href=\"https://saylesss88.github.io/NixOS_Modules_Explained_3.html\">NixOS modules</a></p>","tags":["nixos","flakes","outputs"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_inputs_4.1.md","preview_html":"<p>The attribute <code>inputs</code> specifies the dependencies of a flake, as an attrset\nmapping input names to flake references.</p><p>If a repository provides a <code>flake.nix</code> you can include it as an input in your\n<code>flake.nix</code>.</p><p>For example, I like yazi as my file explorer and have been using helix as my\neditor. To be able to get yazi to work with helix I needed the latest versions\nof both yazi and helix. One way to get the latest versions was to add their\nflakes as inputs to my flake:</p>","tags":["nixos","flakes"],"title":"Flake Inputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-28T00:00:00+00:00","description":null,"draft":false,"path":"flakes/flake_examples_4.3.md","preview_html":"<p>This chapter provides practical examples to illustrate the concepts discussed in\n‚ÄúNix Flakes Explained.‚Äù</p><p>NixOS modules and configurations offer us a powerful and composable way to\ndefine and share system configurations. Imagine we have several independent\n‚Äúplayers,‚Äù each with their own unique set of configurations or modules. How do\nwe combine these individual contributions into a single, cohesive system without\ndirectly altering each player‚Äôs original flake?</p><p>This example demonstrates how flakes can extend and compose each other, allowing\nyou to layer configurations on top of existing ones. This is particularly useful\nwhen you want to:</p>","tags":["nixos","flakes"],"title":"Flake outputs"},{"author":"saylesss88","collection":"blog","date":"2025-11-27T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Pull_Requests_11.md","preview_html":"<p><img src=\"images/gruv16.png\" alt=\"gruv16\" /></p><p><strong>Pull requests</strong> communicate changes to a branch in a repository. Once a pull\nrequest is opened, you can review changes with collaborators and add follow-up\ncommits.</p><p>A <strong>pull request</strong> is a proposal to merge a set of changes from one branch\ninto another. In a pull request, collaborators can review and discuss the\nproposed set of changes before they integrate the changes into the main\ncodebase.</p>","tags":["nixos","nixpkgs"],"title":"Nix Pull Requests"},{"author":"saylesss88","collection":"blog","date":"2025-11-24T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unenc_impermanence.md","preview_html":"<p>Figure 1: Impermanence Logo: Image of the Impermanence logo. Sourced from the</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p>This guide is for an unencrypted setup, there are a few links at the end for\nencrypted setups. This guide follows the previous\n<a href=\"https://saylesss88.github.io/installation/unencrypted_setups.html\">minimal install guide</a>\nbut you should be able to adjust it carefully to meet your needs.</p>","tags":["nixos","btrfs","impermanence"],"title":"Unencrypted BTRFS Impermanence with Flakes"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/overlay.md","preview_html":"<p>The following is done with a local clone of Nixpkgs located at <code>~/src/nixpkgs</code>.</p><p>In this example, we will create an overlay to override the version of\n<code>btrfs-progs</code>. In the root directory of our local clone of Nixpkgs\n(i.e.<code>~/src/nixpkgs</code>) we can run the following command to locate <code>btrfs-progs</code>\nwithin Nixpkgs:</p><pre><code class=\"language-bash\">fd 'btrfs-progs' .\n./pkgs/by-name/bt/btrfs-progs/\n</code></pre>\n<p>Open the <code>package.nix</code> in the above directory and copy the <code>src</code> block within\nthe <code>stdenv.mkDerivation</code> block like so:</p>","tags":[],"title":"Nixpkgs Overlays"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/local_package.md","preview_html":"<p>This chapter demonstrates the fundamental pattern for creating a package. Every\npackage recipe is a file that declares a function. This function takes the\npackages dependencies as argument.</p><p>In this example we‚Äôll make a simple package with <code>coreutils</code> and build it.\nDemonstrating the process of building and testing a local package.</p><p>This chapter will assume you have already have a cloned fork of Nixpkgs. I\nchoose to clone mine to the <code>~/src/</code> directory.</p>","tags":[],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nixpkgs/fork_clone_contribute.md","preview_html":"<p>In the <a href=\"https://github.com/NixOS/nixpkgs\">Nixpkgs</a> Repository.</p><p>Click Fork, then Create a new Fork.</p><p>Uncheck the box ‚ÄúOnly fork the <code>master</code> branch‚Äù, for development we will need\nmore branches.</p>","tags":["git","vcs","nixpkgs"],"title":"Fork, Clone, Contribute"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nix_package_manager.md","preview_html":"<p>Nix is a <em>purely functional package manager</em>. This means that it treats packages\nlike values in purely functional programming languages ‚Äì they are built by\nfunctions that don‚Äôt have side-effects, and they never change after they have\nbeen built.</p><p>Nix stores packages in the <em>Nix store</em>, usually the directory <code>/nix/store</code>,\nwhere each package has its own unique subdirectory such as:</p><pre><code class=\"language-bash\">/nix/store/y53c0lamag5wpx7vsiv7wmnjdgq97yd6-yazi-25.5.14pre20250526_74a8ea9\n</code></pre>\n<p>You can use the Nix on most Linux distributions and Mac OS also has good support\nfor Nix. It should work on most platforms that support POSIX threads and have a\nC++11 compiler.</p>","tags":[],"title":"Nix Package Manager"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nix_language.md","preview_html":"<p>The Nix language is designed for conveniently creating and composing\n<em>derivations</em> precise descriptions of how contents of files are used to derive\nnew files. ‚Äì<a href=\"https://nix.dev/manual/nix/2.28/language/\">Nix Reference Manual</a></p><p>Nix is often described as ‚ÄúJSON with functions.‚Äù It‚Äôs a declarative language\nwhere you define outcomes, not step-by-step instructions. Instead of writing\nsequential code, you create expressions that describe data structures,\nfunctions, and dependencies. These expressions are evaluated lazily, meaning Nix\ncomputes values only when needed, making it efficient for managing large\nsystems.</p><p>You can plug most of the following into the <code>nix repl</code> I‚Äôm showing it in a\nsingle code block here for brevity:</p>","tags":[],"title":"Nix Lang"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/nixLang/nix_paths.md","preview_html":"<p>The following examples are done with a local <code>nixpkgs</code> clone located at\n<code>~/src/nixpkgs</code></p><p>Paths in Nix always need a <code>/</code> in them and always expand to absolute paths\nrelative to your current directory.</p><pre><code class=\"language-bash\">nix repl\nnix-repl&gt; ./.\n/home/jr/src/nixpkgs\nnix-repl&gt; ./. + \"/lib\"\n/home/jr/src/nixpkgs/lib\n</code></pre>\n<p>Nix does <em>path normalization</em> every time you append strings, so if you just add\na slash <code>/</code> its not actually there:</p>","tags":[],"title":"Nix Paths"},{"author":"saylesss88","collection":"notes","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/impermanence.md","preview_html":"<p>Figure 1: <strong>Impermanence Logo</strong>: Image of the Impermanence logo. Sourced from\nthe</p><p><a href=\"https://github.com/nix-community/impermanence\">Impermanence repo</a></p><p><img src=\"../images/Impermanence.png\" alt=\"Impermanence Logo\" /></p>","tags":["impermanence","security"],"title":"Unencrypted Impermanence"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"nix/README.md","preview_html":"<p>üìå <strong>How to Use This Guide</strong></p><p><strong>Read warnings</strong>: Advanced hardening can break compatibility or cause data\nloss! Pause and research before enabling anything not listed above unless you\nunderstand the consequences.</p><p><strong>Hardening NixOS</strong>:</p>","tags":[],"title":"Readme1"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/unenc/unencrypted_setups.md","preview_html":"<p>Figure 1: BTRFS Logo: Image of the BTRFS logo. Sourced from the BTRFS repo BTRFS\nlogo</p><p>Why I Chose BTRFS I chose BTRFS because I was already familiar with it from\nusing it with Arch Linux and I found it to be very easy to use. From what I‚Äôve\nread, there are licensing issues between the Linux Kernel and ZFS which means\nthat ZFS is not part of the Linux Kernel; it‚Äôs maintained by the OpenZFS project\nand available as a separate kernel module. This can cause issues and make you\nthink more about your filesystem than I personally want to at this point.</p><p>A <strong>Btrfs subvolume</strong> is essentially a distinct section within a Btrfs\nfilesystem that maintains its own set of files and directories, along with a\nseparate inode numbering system. Unlike block-level partitions (such as ","tags":[],"title":"Unencrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/encrypted_impermanence.md","preview_html":"<p>‚ùó Important Note: This guide details a setup involving encrypted partitions\nand impermanent NixOS. While powerful, such configurations require careful\nattention to detail. Incorrect steps, especially concerning encryption keys or\npersistent data paths, can lead to <strong>permanent data loss</strong>. Please read all\ninstructions thoroughly before proceeding and consider backing up any critical\ndata beforehand. This has only been tested with the disk layout described in\n<a href=\"https://saylesss88.github.io/installation/encrypted_manual.html\">Encrypted Setups</a></p><p>As a system operates, it gradually accumulates state on its root partition. This\nstate is stored in various directories such as <code>/etc</code> and <code>/var</code>, capturing all\nthe configuration changes, logs, and o","tags":[],"title":"Encrypted Impermanence"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/sops-nix.md","preview_html":"<p><a href=\"https://github.com/getsops/sops?ref=blog.gitguardian.com\">SOPS</a>, short for\n<strong>S</strong>ecrets<strong>OP</strong>eration<strong>S</strong>, is an editor of encrypted files that supports\nquite a few BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault,\nage, and PGP.</p><p>Managing secrets‚Äîlike API keys, SSH deploy keys, and password hashes is a\ncritical part of system configuration, but it‚Äôs also one of the trickiest to do\nsecurely and reproducibly. Traditionally, secrets might be stored in ad hoc\nlocations, referenced by absolute paths, or managed manually outside of version\ncontrol. This approach makes it hard to share, rebuild, or audit your\nconfiguration, and increases the risk of accidental leaks or inconsistencies\nbetween systems.</p><p><code>sops-nix","tags":[],"title":"Sops-Nix"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/lanzaboote.md","preview_html":"<p>‚ö†Ô∏è <strong>Warning: This can easily brick your system</strong> ‚ö†Ô∏è</p><p>We will mainly follow the lanzaboote\n<a href=\"https://github.com/nix-community/lanzaboote/blob/master/docs/QUICK_START.md\">Quick Start Guide</a></p><p>For Windows dual-booters and BitLocker users, you should export your BitLocker\nrecovery keys and confirm that they are correct. Refer to this\n<a href=\"https://support.microsoft.com/en-us/windows/find-your-bitlocker-recovery-key-6b71ad27-0b89-ea08-f143-056f5ab347d6\">Microsoft support article</a></p>","tags":[],"title":"Lanzaboote"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/enc_install.md","preview_html":"<p>NixOS supports file systems that are encrypted using LUKS (Linux Unified Key\nSetup). This guide walks you through an encrypted NixOS installation using Disko\nfor disk management and Btrfs for subvolumes. It is designed for users who want\nfull disk encryption and a modern filesystem layout. If you prefer an\nunencrypted setup, you can skip the LUKS and encryption steps, but this guide\nfocuses on security and flexibility.</p><p>If you choose to set up impermanence, ensure it matches your install. Encrypted\nSetup with Encrypted Impermanence and Unencrypted Setup with Unencrypted\nImpermanence.</p><p>‚ùó NOTE: This is a bit convoluted, there are a few paths you can follow. If\nyou choose to use the starter repo (<a href=\"https://github.com/saylesss88/my-flake\">https://github.com/saylesss88/my-fl","tags":[],"title":"Encrypted Install"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/enc/USB_keyfile.md","preview_html":"<p>This allows you to use a USB stick for your keyfile, with a backup in case you\nwant or need it. There is a setting <code>fallbackToPassword</code> that protects you in\ncase something fails with the USB key.</p><p>First, I‚Äôll show how to set up a dedicated USB stick for a keyfile. (i.e., one\nthat is only used for this). After that I will show the process of adding the\nkeyfile to a USB stick with existing data on it that you don‚Äôt want to lose.</p><p><strong>Generate the keyfile</strong></p>","tags":[],"title":"USB Keyfile"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"installation/README.md","preview_html":"<p>This section provides detailed guides for installing NixOS. You‚Äôll choose\nbetween an <strong>unencrypted</strong> or <strong>encrypted</strong> base setup. After your core\ninstallation, you can explore adding optional features like <code>sops</code> for encrypted\nsecrets, <code>lanzaboote</code> for Secure Boot, or <code>impermanence</code> for a stateless system.</p><p><strong>Guide:</strong>\n<a href=\"https://saylesss88.github.io/installation/unenc/unencrypted_setups.html\">Minimal Btrfs-Subvol Install with Disko and Flakes</a></p><p><strong>Best for:</strong></p>","tags":[],"title":"My Chapter"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"functions/practical_functions_2.1.md","preview_html":"<p><img src=\"images/coding6.png\" alt=\"coding6\" /></p><p><a href=\"https://gitlab.com/api/v4/projects/4207231/packages/generic/graphviz-releases/2.49.3/graphviz-2.49.3.tar.gz\">graphviz</a></p><p><a href=\"https://ftp.gnu.org/gnu/hello/hello-2.12.1.tar.gz\">hello</a></p>","tags":["nixos","functions"],"title":"Practical Nix Functions"},{"author":"saylesss88","collection":"blog","date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"flakes/overlays_4.5.md","preview_html":"<p><img src=\"../images/pokego.png\" alt=\"Pokego Logo\" />‚Äì<a href=\"https://github.com/rubiin/pokego\">pokego repo</a></p><p>Overlays are Nix functions that accept two arguments, <code>final</code> and <code>prev</code> and\nreturn a set of packages. Overlays are similar to <code>packageOverrides</code> as a way to\ncustomize Nixpkgs, <code>packageOverrides</code> acts as an overlay with only the <code>prev</code>\nargument. Therefore, <code>packageOverrides</code> is appropriate for basic use, but\noverlays are more powerful and easier to distribute.</p><p>Example:</p>","tags":["nixos","overlays","outputs"],"title":"Overlays"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Working_with_Nixpkgs_Locally_10.md","preview_html":"<p><img src=\"images/server_rack.cleaned.png\" alt=\"server_rack\" /></p><p>Nixpkgs, the package repository for NixOS, is a powerful resource for building\nand customizing software.</p><p>Working with a local copy enhances development, debugging, and contribution\nworkflows.</p>","tags":[],"title":"Local Nixpkgs"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Debugging_and_Tracing_NixOS_Modules_9.md","preview_html":"<p>This chapter covers debugging NixOS modules, focusing on tracing module options\nand evaluating merges.</p><p><img src=\"images/coding4.png\" alt=\"404\" /></p><p><a href=\"https://saylesss88.github.io/posts/nix_modules_explained/\">nix-modules-explained</a></p>","tags":[],"title":"Debugging NixOS modules"},{"author":"saylesss88","collection":null,"date":"2025-11-22T00:00:00+00:00","description":null,"draft":false,"path":"Comparing_Flakes_and_Traditional_Nix_8.md","preview_html":"<p>A key benefit of Nix Flakes is their <em>default</em> enforcement of <strong>pure\nevaluation</strong>.</p><p>In Nix, an <strong>impure operation</strong> depends on something <em>outside</em> its explicit\ninputs. Examples include:</p><p>Impurity leads to unpredictable builds that may differ across systems or time.</p>","tags":[],"title":"Comparing Flakes and Traditional Nix"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Top-Level_Attributes_5.md","preview_html":"<p>This explanation is based on insights from Infinisil, a prominent figure in the\nNix community, to help clarify the concept of top-level attributes within NixOS\nmodules.</p><p>In a NixOS system, everything is built from a single ‚Äúsystem derivation.‚Äù The\ncommand <code>nix-build '&lt;nixpkgs/nixos&gt;' -A system</code> initiates this build process.</p><p>The <code>-A system</code> part tells Nix to focus on the <code>system</code> attribute defined in the\n<code>'&lt;nixpkgs/nixos&gt;'</code> file (which is essentially <code>./default.nix</code> within the\nNixpkgs repository).</p>","tags":[],"title":"Top-Level Attributes"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Understanding_Nix_Functions_2.md","preview_html":"<p><img src=\"images/trees2.cleaned.png\" alt=\"trees2\" /></p><p><strong>Functions</strong> are the building blocks of Nix, appearing everywhere in Nix\nexpressions and configurations. Mastering them is essential for writing\neffective Nix code and understanding tools like NixOS and Home Manager. This\nchapter explores how Nix functions work, focusing on their <strong>single-argument\nnature</strong>, <strong>currying</strong>, <strong>partial application</strong>, and their role in <strong>modules</strong>.</p><p>A <strong>Nix Function</strong> is a rule that takes an input (called an <strong>argument</strong>) and\nproduces an <strong>output</strong> based on that input. Unlike many programming languages,\nNix functions are designed to take exactly one argument at a time. This unique\napproach, co","tags":[],"title":"Understanding Nix Functions"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Package_Definitions_Explained_6.md","preview_html":"<p><img src=\"images/coding2.png\" alt=\"coding2\" /></p><p>In Nix, the concept of a <strong>package</strong> can refer to two things:</p><p>A collection of files and data that constitute a piece of software or an\nartifact.</p>","tags":[],"title":"Package Definitions Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Nix_Flakes_Explained_4.md","preview_html":"<p><img src=\"images/trees3.cleaned.png\" alt=\"trees3\" /></p><p>If you‚Äôre completely new, take a look at\n<a href=\"https://nixos.wiki/wiki/flakes#Installing_flakes\">this</a> to get flakes on your\nsystem.</p><p>For the Nix Flake man page type <code>man nix3 flake</code> and for a specific feature,\ntype something like <code>man nix3 flake-lock</code>.</p>","tags":[],"title":"Nix Flakes Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"NixOS_Modules_Explained_3.md","preview_html":"<p><img src=\"images/buildings1.png\" alt=\"buildings\" /></p><p><strong>TL;DR</strong>: In this chapter, we will break down the Nix module system used by\nboth NixOS and Home-Manager. We will discuss using home-manager as a module and\nthe flexibility that modules give us. We will touch on options and break down\nthe <code>vim</code> module from the Nixpkgs collection. Finally we will display how to\ntest modules with the repl.</p><p>Your <code>configuration.nix</code> is a module. For the Nixpkgs collection most modules\nare in <code>nixos/modules</code>.</p>","tags":[],"title":"Nix Module System Explained"},{"author":"saylesss88","collection":null,"date":"2025-11-21T00:00:00+00:00","description":null,"draft":false,"path":"Getting_Started_with_Nix_1.md","preview_html":"<p><img src=\"images/trees1.cleaned.png\" alt=\"trees\" /></p><p>Welcome to <em>nix-book</em>, an introductory book about Nix. This book leans more\ntowards using Flakes but will contrast traditional Nix where beneficial.\nOriginally, this content started as a blog. I‚Äôm refining its flow to make it\nmore cohesive.</p><p>In this chapter, I will touch on the different parts of the Nix ecosystem, give\na quick example of each and explain how they fit together.</p>","tags":[],"title":"Intro to Nix"}],"generated_at":"2026-01-18T19:05:26.481984179+00:00"};</script>
<h1 id="gnupg--gpg-agent-on-nixos"><a class="header" href="#gnupg--gpg-agent-on-nixos">GnuPG &amp; <code>gpg-agent</code> on NixOS</a></h1>
<details>
<summary> ‚úîÔ∏è Table of Contents</summary>
<ul>
<li><a href="#-gpgfail-practical-openpgp-vulnerabilities-added-on-2026-01-15">‚ö†Ô∏è gpg.fail (practical OpenPGP vulnerabilities) (Added on 2026-01-15)</a>
<ul>
<li><a href="#why-this-matters-even-with-good-key-hygiene">Why this matters even with good key hygiene</a></li>
<li><a href="#how-to-avoid-the-sharp-edges-actionable">How to avoid the sharp edges (actionable)</a></li>
<li><a href="#if-you-automate-verification-important">If you automate verification (important)</a></li>
<li><a href="#nixoshome-manager-hardening-can-break-gpg-common-failure-mode">NixOS/Home-Manager hardening can break GPG (common failure mode)</a></li>
</ul>
</li>
<li><a href="#-key-concepts">üîë Key Concepts</a>
<ul>
<li><a href="#asymmetric-encryption-public-key-cryptography">Asymmetric Encryption (Public-Key cryptography)</a></li>
<li><a href="#generate-a-revocation-certificate">Generate a Revocation Certificate</a></li>
<li><a href="#remove-and-store-your-primary-key-offline">Remove and Store your Primary Key offline</a></li>
</ul>
</li>
<li><a href="#add-your-gpg-key-to-github">Add your GPG Key to GitHub</a>
<ul>
<li><a href="#sign-your-commits-for-git">Sign your Commits for Git</a></li>
<li><a href="#backing-up-your-keys">Backing up Your Keys</a></li>
</ul>
</li>
<li><a href="#encrypt-a-file-with-pgp">Encrypt a File with PGP</a>
<ul>
<li><a href="#list-your-keys-and-get-the-key-id">List your keys and get the key ID</a></li>
<li><a href="#encrypt-a-file">Encrypt a file</a></li>
<li><a href="#sign-and-verify-signatures">Sign and Verify Signatures</a></li>
</ul>
</li>
<li><a href="#email-encryption">Email Encryption</a></li>
<li><a href="#make-your-public-key-highly-available">Make your Public Key Highly Available</a>
<ul>
<li><a href="#example-verifying-arch-linux-download">Example: Verifying Arch Linux Download</a></li>
<li><a href="#edit-your-trust-level-of-the-key">Edit your trust level of the key</a></li>
</ul>
</li>
</ul>
</details>
<blockquote>
<p>‚ö†Ô∏è <strong>SECURITY WARNING</strong>: This guide involves sensitive cryptographic material.
<strong>Never share your private key or passphrase</strong>. Backup your keys and handle
them with extreme care.</p>
</blockquote>
<p><img src="../images/gnupg.png" alt="GnuPG"></p>
<h2 id="-gpgfail-practical-openpgp-vulnerabilities-added-on-2026-01-15"><a class="header" href="#-gpgfail-practical-openpgp-vulnerabilities-added-on-2026-01-15">‚ö†Ô∏è gpg.fail (practical OpenPGP vulnerabilities) (Added on 2026-01-15)</a></h2>
<p>The <a href="https://gpg.fail">gpg.fail</a> is a write-up of real-world weaknesses in
GPG/OpenPGP implementations and edge cases in the OpenPGP ecosystem‚Äînot the
underlying math of modern cryptography. ‚Äã The core idea is that signature
verification needs two things: correct cryptography and confidence that the data
you think was verified is actually the same data the verifier processed, which
can break down when formats are complex and tooling is permissive or ambiguous.</p>
<h3 id="why-this-matters-even-with-good-key-hygiene"><a class="header" href="#why-this-matters-even-with-good-key-hygiene">Why this matters even with good key hygiene</a></h3>
<p>Most of the hardening in this guide (offline primary key, subkeys, strict
permissions, agent separation) is still worth doing because it protects your
private key material and reduces the blast radius if a workstation is
compromised.</p>
<p>But that kind of key hygiene doesn‚Äôt automatically protect you from OpenPGP
‚Äúsharp edges‚Äù like ambiguous parsing rules, weird message constructions, or
implementation bugs because those problems happen at the message/format/tooling
layer, not the key-storage layer.</p>
<h3 id="how-to-avoid-the-sharp-edges-actionable"><a class="header" href="#how-to-avoid-the-sharp-edges-actionable">How to avoid the sharp edges (actionable)</a></h3>
<ul>
<li>
<p>Don‚Äôt treat ‚ÄúGood signature‚Äù as the end of the story. Treat verification as
‚Äúverify + inspect what was verified,‚Äù especially if the output will be
consumed by other tools or humans who may misinterpret it. ‚Äã</p>
</li>
<li>
<p>Prefer OpenPGP for narrow, well-understood tasks (verifying release artifacts,
encrypting files) and be extra cautious when dealing with untrusted,
attacker-controlled OpenPGP inputs that flow through multiple tools (mail
clients, import pipelines, automation). ‚Äã</p>
</li>
<li>
<p>Keep GnuPG and related tooling updated; gpg.fail covers vulnerabilities that
include classic implementation issues and not just ‚Äúprotocol design‚Äù pitfalls.</p>
</li>
</ul>
<h3 id="if-you-automate-verification-important"><a class="header" href="#if-you-automate-verification-important">If you automate verification (important)</a></h3>
<p>If you‚Äôre writing automation around signature verification, ensure your pipeline
clearly distinguishes:</p>
<ol>
<li>
<p>‚Äúsignature cryptographically valid‚Äù from</p>
</li>
<li>
<p>‚Äúthe extracted/displayed message is exactly what was verified‚Äù. Some gpg.fail
items specifically call out cases where output does not make this distinction
obvious enough to prevent misuse.</p>
</li>
</ol>
<h3 id="nixoshome-manager-hardening-can-break-gpg-common-failure-mode"><a class="header" href="#nixoshome-manager-hardening-can-break-gpg-common-failure-mode">NixOS/Home-Manager hardening can break GPG (common failure mode)</a></h3>
<p>Some ‚Äúhardening‚Äù choices can cause GPG to fail in ways that look mysterious but
are just UI/agent integration problems (for example, <strong>No pinentry</strong> / ‚Äúgpg
failed to sign the data‚Äù when the agent can‚Äôt prompt). If GPG signing/encryption
suddenly stops working, first confirm pinentry is configured correctly (via your
<code>services.gpg-agent.pinentryPackage</code> or <code>gpg-agent.conf</code>) and restart the agent
with <code>gpgconf --kill gpg-agent</code> then <code>gpgconf --launch gpg-agent</code>.</p>
<h2 id="-key-concepts"><a class="header" href="#-key-concepts">üîë Key Concepts</a></h2>
<p><strong>GnuPG</strong> is a complete and free implementation of the OpenPGP standard. It
allows you to encrypt and sign your data and communications, has a versatile key
management system, and access modules for many kinds of public key directories.
GnuPG (GPG), is a command line tool for secure communication.</p>
<p><strong>PGP (Pretty Good Privacy)</strong> and <strong>GPG (GNU Privacy Guard)</strong>. While distinct,
they are deeply interconnected and, for the rest of this section, I‚Äôll use the
terms interchangeably.</p>
<p><strong>PGP</strong> was the original, groundbreaking software that brought robust public-key
cryptography to the masses. It set the standard for secure email communication.
However, PGP later became a commercial product.</p>
<p>To provide a free and open-source alternative that anyone could use and inspect,
<strong>GPG</strong> was created. Crucially, <strong>GPG</strong> is a complete implementation of the
OpenPGP standard. This open standard acts as a universal language for encryption
and digital signatures.</p>
<p>GnuPG uses a more complex scheme in which a user has a primary keypair and then
zero or more additional subordinate keypairs.</p>
<p>Signing public keys with the corresponding private key is called <em>self-signing</em>,
and a public key that has self-signed user IDs bound to it is called a
<em>certificate</em>.</p>
<p><strong>Web of Trust</strong>: Rather than validate every single key individually, you can
rely on other factors such as if it has been signed by a key that you fully
trust or if it has been signed by three marginally trusted keys to validate
keys.</p>
<p><code>gpg-agent</code> is a daemon to manage secret (private) keys independently from any
protocol. It is used as a backed for <code>gpg</code> and <code>gpgsm</code> as well as for a couple
of other utilities. ‚Äì<a href="https://man.cx/gpg-agent">man gpg-agent</a></p>
<p>There are numerous front-ends for gpg as well, i.e., GUI apps that simplify many
of the commands and processes. Two that I touch on in this overview are
<code>seahorse</code> and <code>kleopatra</code>.</p>
<h3 id="asymmetric-encryption-public-key-cryptography"><a class="header" href="#asymmetric-encryption-public-key-cryptography">Asymmetric Encryption (Public-Key cryptography)</a></h3>
<p>E2ee requires that every sender and recipient does a one time preparation, which
involves the generation of personal random numbers. Two such random numbers are
necessary, one will be called your secret key and another one will be called
your public key (together your <em>personal key</em>). These numbers are very big, they
consist of hundreds or thousands of digits.</p>
<p>A message can be encrypted using the recipients public key and can only be
decrypted with the matching private key. In other words, if you exchange
<strong>public keys</strong> with someone you both can encrypt messages that only the other
can decrypt with their own <strong>private key</strong>. <strong>You must never share the private
key or the private keys passphrase with anyone else</strong>.</p>
<p><strong>What‚Äôs safe to share?</strong></p>
<ul>
<li>
<p>Your public key (used to encrypt files and verify signatures)</p>
</li>
<li>
<p>Your key ID (identifies your key, useful for sharing public keys or configs)</p>
</li>
<li>
<p>Your keys fingerprint <code>gpg --fingerprint</code></p>
</li>
</ul>
<p><strong>What must never be shared?</strong></p>
<ul>
<li>
<p>Your private (secret) key, usually in your <code>~/.gnupg/private-keys-v1.d/</code>
directory. Usually called your <em>private keyring</em>. <strong>Your main goal should be
the protection of your private key</strong>.</p>
</li>
<li>
<p><strong>Your passphrase for your private key</strong>. Even if someone is able to somehow
get your private key, they need to break the passphrase to access it
unencrypted. <strong>Protect this passphrase</strong>!</p>
</li>
</ul>
<p><strong>Best Practices</strong></p>
<p>Don‚Äôt rely on the short KeyID, at least use long OpenPGP Key IDs (for example
0xA1E6148633874A3D), they are 64 bits long and harder to spoof. Even better, use
the fingerprint.This is accomplished in the configuration with
<code>keyid-format = "0xlong";</code>, and <code>with-fingerprint</code>.</p>
<p>Always sign your public keys before you publish them to prevent man in the
middle attacks and other modifications. When a subkey or userID is generated it
is self-signed automatically, which is why you need to enter your password.</p>
<p>Don‚Äôt blindly trust keys from keyservers. You should verify the full key
fingerprint with the owner over the phone if possible.</p>
<ul>
<li><a href="https://www.kicksecure.com/wiki/Verifying_Software_Signatures">Verifying software signatures</a></li>
</ul>
<p>Use a strong primary key, don‚Äôt use 1024-bit DSA, 1024-bit RSA, or SHA-1 for
signing they are no longer recommended.</p>
<p>Choose an expiration date less than 2 years, you can add time if needed.
Remember this date.</p>
<p>Rotate your subkeys.</p>
<p>Keep your primary key offline, this ensures that it can‚Äôt be stolen by an
attacker allowing him to create new identities. We accomplish this by creating
subkeys and only adding the subkeys keygrip and the subkeys <code>default-key</code> to our
configuration keeping the primary key out of it.</p>
<p>Since we will be removing our primary key, even we won‚Äôt be able to create
additional keys so it‚Äôs important to think ahead and make all the keys you‚Äôll
need. However, it is as easy as reimporting it to give yourself access again.</p>
<p>Many of these best practices come from the following guide:</p>
<ul>
<li><a href="https://riseup.net/ru/security/message-security/openpgp/gpg-best-practices">RiseUp gpg-best-practices</a></li>
</ul>
<hr>
<p>Home Manager module with <code>gpg-agent</code>, <code>gnupg</code>, and <code>pinentry-gnome3</code>:</p>
<pre><code class="language-nix"># gpg-agent.nix
{
  config,
  lib,
  pkgs,
  ...
}: {
  options = {
    custom.pgp = {
      enable = lib.mkEnableOption {
        description = "Enable PGP Gnupgp";
        default = false;
      };
    };
  };

  config = lib.mkIf config.custom.pgp.enable {
    services = {
      ## Enable gpg-agent with ssh support
      gpg-agent = {
        enable = true;
        enableSshSupport = true;
        enableZshIntegration = true;
        # pinentry is a collection of simple PIN or passphrase dialogs used for
        # password entry
        pinentryPackage = pkgs.pinentry-qt;
      };

      ## We will put our keygrip here
      gpg-agent.sshKeys = [];
    };
    home.packages = [pkgs.gnupg];
    programs = {
      gpg = {
        ## Enable GnuPG
        enable = true;

        # homedir = "/home/userName/.config/gnupg";
        settings = {
          # Default/trusted key ID (helpful with throw-keyids)
          # Example, you will put your own keyid here
          # Use `gpg --list-keys`
          # default-key = "0x37ACBCDA569C5C44788";
          # trusted-key = "0x37ACBCDA569C5C44788";
          # https://github.com/drduh/config/blob/master/gpg.conf
          # https://www.gnupg.org/documentation/manuals/gnupg/GPG-Configuration-Options.html
          # https://www.gnupg.org/documentation/manuals/gnupg/GPG-Esoteric-Options.html
          # Some Best Practices, stronger algos etc
          # Use AES256, 192, or 128 as cipher
          personal-cipher-preferences = "AES256 AES192 AES";
          # Use SHA512, 384, or 256 as digest
          personal-digest-preferences = "SHA512 SHA384 SHA256";
          # Use ZLIB, BZIP2, ZIP, or no compression
          personal-compress-preferences = "ZLIB BZIP2 ZIP Uncompressed";
          # Default preferences for new keys
          default-preference-list = "SHA512 SHA384 SHA256 AES256 AES192 AES ZLIB BZIP2 ZIP Uncompressed";
          # SHA512 as digest to sign keys
          cert-digest-algo = "SHA512";
          # SHA512 as digest for symmetric ops
          s2k-digest-algo = "SHA512";
          # AES256 as cipher for symmetric ops
          s2k-cipher-algo = "AES256";
          # UTF-8 support for compatibility
          charset = "utf-8";
          # Show Unix timestamps
          fixed-list-mode = "";
          # No comments in signature
          no-comments = "";
          # No version in signature
          no-emit-version = "";
          # Disable banner
          no-greeting = "";
          # Long hexidecimal key format
          keyid-format = "0xlong";
          # Display UID validity
          list-options = "show-uid-validity";
          verify-options = "show-uid-validity";
          # Display all keys and their fingerprints
          with-fingerprint = "";
          # Cross-certify subkeys are present and valid
          require-cross-certification = "";
          # Disable caching of passphrase for symmetrical ops
          no-symkey-cache = "";
          # Enable smartcard
          # use-agent = "";
        };
      };
    };
  };
}
</code></pre>
<blockquote>
<p>ü§î Fun Fact: Elliot Alderson mentions encrypting Evil Corps files with 256 bit
AES encryption ensuring that it‚Äôs impossible to break in <code>eps1.9_zer0.daY.avi</code>
of Mr. Robot.</p>
</blockquote>
<ul>
<li>
<p>The default path is <code>~/.gnupg</code>, if you prefer placing it in the <code>~/.config</code>
directory or elsewhere, uncomment the <code>homedir</code> line and change <code>userName</code> to
your username.</p>
</li>
<li>
<p>I use sway so <code>pinentry-qt</code> works for me, there is also the following options
for this attribute:</p>
</li>
<li>
<p><code>pinentry-tty</code></p>
</li>
<li>
<p><code>pinentry-gnome3</code></p>
</li>
<li>
<p><code>pinentry-gtk2</code></p>
</li>
</ul>
<p>And more, research what you need and use the correct one.</p>
<p><a href="https://search.nixos.org/packages?channel=unstable&amp;query=pinentry">search.nixos.org pinentry</a></p>
<p>Enable in your <code>home.nix</code> or equivalent:</p>
<pre><code class="language-nix"># home.nix
# ... snip ...
imports = [
    ./gpg-agent.nix
];
custom.pgp.enable = true;
# ... snip ...
</code></pre>
<p><code>gpg --full-generate-key</code> can be used to generate a basic keypair.</p>
<p><code>gpg --expert --full-generate-key</code> can be used for keys that require more
capabilities.</p>
<blockquote>
<p>‚ùó NOTE: We will first generate our GPG primary key that is required to
atleast have sign capabilities, we will then derive subkeys from said primary
key and use them for signing and encrypting. It is recommended to generate a
revoke certificate right after creating your primary key.</p>
</blockquote>
<p>To generate your gpg primary key you can do the following:</p>
<pre><code class="language-bash">gpg --full-generate-key
</code></pre>
<ul>
<li>
<p>Choose <code>(10) (sign only)</code></p>
</li>
<li>
<p>Give it a name and description</p>
</li>
<li>
<p>Give it an expiration date, 1y is common</p>
</li>
<li>
<p>Use a strong passphrase or password</p>
</li>
<li>
<p>Give it a comment, I typically add the date</p>
</li>
</ul>
<p>If you see a warning about incorrect permissions, you can run the following:</p>
<pre><code class="language-bash">chmod 700 ~/.gnupg
chmod 600 ~/.gnupg/*
</code></pre>
<p>Verify:</p>
<pre><code class="language-bash">ls -ld ~/.gnupg
# Should show: drwx------

ls -l ~/.gnupg
# Files should show: -rw-------
</code></pre>
<h3 id="generate-a-revocation-certificate"><a class="header" href="#generate-a-revocation-certificate">Generate a Revocation Certificate</a></h3>
<p><code>mykey</code> must be a key specifier, either the keyID of the primary keypair or any
part of the user ID that identifies the keypair:</p>
<p>Replace <code>mykeyID</code> with the keyID of your primary key and store the cert in a
safe place:</p>
<pre><code class="language-bash">gpg --output revoke.asc --gen-revoke mykeyID
Create a revocation certificate for this key? (y/N)
Please select the reason for the revocation:
  0 = No reason specified
  1 = Key has been compromised
  2 = Key is superseded
  3 = Key is no longer used
  Q = Cancel
(Probably you want to select 1 here)
Your decision?
</code></pre>
<p>The certificate will be output to a file <code>revoke.asc</code>. If the <code>--output</code> is
ommitted, the result will be placed on stdout.</p>
<p>Since it‚Äôs a short certificate, you can print a hardcopy and store it somewhere
safe. The cert shouldn‚Äôt be somewhere that others can access it since anyone
could publish the revoke cert and render the corresponding public key useless.</p>
<p>To apply the revoke cert, import it:</p>
<pre><code class="language-bash">gpg --import revoke.asc
# And optionally push the revoked key to public keyservers to notify others:
gpg --keyserver keyserver.ubuntu.com --send-keys YOUR_KEYID
</code></pre>
<hr>
<p>After fixing, run <code>gpg --list-keys --with-fingerprint</code>, which lists your public
keys:</p>
<pre><code class="language-bash"># Take note of your public key
gpg --list-keys --with-fingerprint
/home/jr/.gnupg/pubring.kbx
---------------------------
pub   ed25519/0x095782A1B124AF15 2025-08-23 [SCA] [expires: 2026-08-23]
Key fingerprint = 5908 9C5B FEC8 0D75 FCB0  E206 0958 82C1 A124 CF15
uid                   [ultimate] Jr (08-23-25) &lt;sayls8@proton.me&gt;
</code></pre>
<ul>
<li>Copy the KeyID, in this example it would be <code>0x095722B2A123CF15</code>. We will use
it for the command below.</li>
</ul>
<p>The warning should be gone.</p>
<p>Now we will generate 2 subkeys, 1 for encryption and 1 for authentication.</p>
<pre><code class="language-bash">gpg --expert --edit-key 0x095722B2A123CF15
</code></pre>
<p>Choose 11 (set your own capabilities) and add A (Authenticate) and type <code>save</code>
to save and exit. Repeat this again and choose ECC (encrypt only).</p>
<blockquote>
<p>‚ùó <code>gpg --edit-key</code> has many more capabilities, after launching type <code>help</code>.</p>
</blockquote>
<p><strong>Add Keygrip of Authenticate Subkey to <code>sshcontrol</code> for gpg-agent</strong></p>
<pre><code class="language-bash">gpg --list-secret-keys --with-keygrip --keyid-format LONG
</code></pre>
<p>Copy the keygrip of the subkey with Authenticate capabilities</p>
<p>Add the keygrip number to your <code>gpg-agent.sshKeys</code> and rebuild, this adds an SSH
key to <code>gpg-agent</code>. This is for the SSH key functionality of <code>gpg-agent</code>, while
the key ID (<code>default-key</code>) is for GPG-specific operations like signing commits:</p>
<pre><code class="language-nix"># gpg-agent.nix
gpg-agent.sshKeys = ["6BD11826F3845BC222127FE3D22C92C91BB3FB32"];
</code></pre>
<ul>
<li>By itself, a keygrip cannot be used to reconstruct your private key. It‚Äôs
derived from the public key material, not from the secret key itself so it‚Äôs
safe to version control. Don‚Äôt put your keygrip in a public repo if you don‚Äôt
want people to know you use that key for signing/authentication. It‚Äôs not a
security risk, but it leaks a tiny bit of metadata.</li>
</ul>
<p>The following article mentions the keygrip being computed from public elements
of the key:</p>
<ul>
<li><a href="https://gnupg-users.gnupg.narkive.com/q5JtahdV/gpg-agent-what-is-a-keygrip">gnupg-users what-is-a-keygrip</a></li>
</ul>
<p>Add the KeyId to your <code>gpg-agent.nix</code>, this declares your default-key to persist
through rebuilds:</p>
<p>Copy the public key of the same subkey with Authenticate capabilities you will
see something like <code>[SA]</code> next to it for Sign and Authenticate:</p>
<pre><code class="language-nix"># gpg-agent.nix
gpg.settings = {
    # Replace with your own Subkeys KeyID `gpg --list-keys --keyid-format LONG`
    default-key = "Ox37ACA569C5C44787";
    trusted-key = "Ox37ACA569C5C44787";
};
</code></pre>
<p>This key should be signed automatically, ensure that it is:</p>
<pre><code class="language-bash">gpg --sign-key Ox37ACA569C5C44787
</code></pre>
<p>Rebuild, and check that everything is correct with:</p>
<pre><code class="language-bash">ssh-add -L
# you should see something like:
ssh-ed25519 AABCC3NzaC1lZDI1NTE5ABBAIHyujgyCjjBTqIuFM3EMUSo6RGklmOXQW3uWRhWdJ1Mm (none)
</code></pre>
<ul>
<li>Never version-control your private key files or <code>.gnupg</code> contents.</li>
</ul>
<p>Add the following to your shell config:</p>
<pre><code class="language-bash"># zsh.nix
# ... snip ...
initContent = ''
    export GPG_TTY=$(tty)
    export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)
    gpgconf --launch gpg-agent
'';
# ... snip ...
</code></pre>
<p>Rebuild and then restart <code>gpg-agent</code> if necessary:</p>
<pre><code class="language-bash">gpgconf --kill gpg-agent
gpgconf --launch gpg-agent
</code></pre>
<p>Test, these should match:</p>
<pre><code class="language-bash">echo "$SSH_AUTH_SOCK"
# output
/run/user/1000/gnupg/d.wft5hcsny4qqq3g31c76534j/S.gpg-agent.ssh

gpgconf --list-dirs agent-ssh-socket
# output
/run/user/1000/gnupg/d.wft5hcsny4qqq3g31c76834j/S.gpg-agent.ssh
</code></pre>
<pre><code class="language-bash">ssh-add -L
# Copy the entire following line:
ssh-ed25519 AABBC3NzaC1lZDI1NTE5AAAAIGXwhVokJ6cKgodYT+0+0ZrU0sBqMPPRDPJqFxqRtM+I (none)
</code></pre>
<ul>
<li>Mine shows <code>(none)</code> because I left the comment field blank when creating the
key and doesn‚Äôt affect functionality.</li>
</ul>
<p>Then, in your server‚Äôs NixOS configuration (e.g., <code>configuration.nix</code>): Change
<code>yourUser</code> to your username. This is how you grant access to a remote machine,
and the public key from the GPG subkey is what‚Äôs added here, the output of
<code>ssh-add -L</code>:</p>
<pre><code class="language-nix">users.users.yourUser = {
openssh = {
  authorizedKeys.keys = [
    # Replace with the output of `ssh-add -L`
    "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGXwhVokJ6cKgodYT+0+0ZrU0sBqMPPRDPJqFxqRtM+I (none)"
  ];
};
};
</code></pre>
<blockquote>
<p>‚ùó NOTE: Only the <strong>public</strong> key goes here, it‚Äôs safe to commit to version
control. If you prefer not to hardcode it in the config, you can reference it
from a <code>.pub</code> file in your repo and read it with
<code>builtins.readFile ./mykey.pub</code></p>
</blockquote>
<p>Rebuild your system and test an SSH connection into the server:</p>
<pre><code class="language-bash">ssh -p &lt;your-port&gt; user@hostname
</code></pre>
<ul>
<li><code>&lt;your-port&gt;</code> is often <code>22</code> so it would be something like:</li>
</ul>
<pre><code class="language-bash">ssh -p 22 bill@xps
</code></pre>
<p>Once you successfully sign in to SSH, it will ask you if you‚Äôre sure you trust
the remote server‚Äôs SSH host key. Once you type <code>yes</code>, it will automatically be
used for tasks such as file decryption.</p>
<h3 id="remove-and-store-your-primary-key-offline"><a class="header" href="#remove-and-store-your-primary-key-offline">Remove and Store your Primary Key offline</a></h3>
<blockquote>
<p>‚ùó NOTE: After you remove your primary key, you will no longer be able to
derive subkeys from it or sign keys unless you re-import it.</p>
</blockquote>
<pre><code class="language-bash"># extract the primary key
gpg -a --export-secret-key sayls8@proton.me &gt; secret_key
# extract the subkeys, which we will reimport later
gpg -a --export-secret-subkeys sayls8@proton.me &gt; secret_subkeys.gpg
# delete the secret keys from the keyring, so only subkeys are left
gpg --delete-secret-keys sayls8@proton.me
Delete this key from the keyring? (y/N) y
This is a secret key! - really delete? (y/N) y
# reimport the subkeys
gpg --import secret_subkeys.gpg
# verify everything is in order
gpg --list-secret-keys
# remove the subkeys from disk
rm secret_subkeys.gpg
</code></pre>
<p>I recommend also keeping a <code>.gpg</code> version to make it easy to re-import your
primary key: <code>gpg --export-secret-keys --armor --output private-key-bak.gpg</code></p>
<p>Then store <code>secret_key</code> on an encrypted USB drive or somewhere offline. If you
want to protect it for now, you can just use the encryption subkey that we
created to encrypt <code>secret_key</code> with a passphrase:</p>
<pre><code class="language-bash">gpg --list-keys --keyid-format LONG
</code></pre>
<p>Copy the KeyID of the subkey with encrypt capabilities for the following
command:</p>
<pre><code class="language-bash"># Encrypting your secret key for yourself
gpg --encrypt --recipient Ox37ACA569C5C44787 secret_key
</code></pre>
<p>You can check that the secret key material is missing with
<code>gpg --list-secret-keys</code>, you should see <code>sec#</code> instead of <code>sec</code>.</p>
<pre><code class="language-bash">gpg --list-secret-keys
# Output:
sec#  ed25519/0x
# ...snip...
</code></pre>
<p>The above set of commands are from the
<a href="https://riseup.net/ru/security/message-security/openpgp/gpg-best-practices#keep-your-primary-key-entirely-offline">RiseUp Keep your primary key offline</a></p>
<h2 id="add-your-gpg-key-to-github"><a class="header" href="#add-your-gpg-key-to-github">Add your GPG Key to GitHub</a></h2>
<p>Plug your own public key from <code>gpg --list-keys</code> in the following command:</p>
<pre><code class="language-bash">gpg --armor --export &lt;Public-Key&gt;
</code></pre>
<p>Copy the entire block from <code>-----BEGIN PGP PUBLIC KEY BLOCK-----</code> to
<code>-----END PGP PUBLIC KEY BLOCK-----</code></p>
<blockquote>
<p>‚ùó You can also paste the above block into a public keyserver such as
<code>keys.openpgp.org</code>. This allows others to find and use your key to encrypt
messages or verify your signatures. Many tools and users rely on public key
servers to fetch keys automatically. You can also publish your revocation
certificates, which help others know if your key is compromised or revoked.
This can be a privacy concern as key servers publish (and keep) associated
user IDs and metadata linked to your key, such as your email.</p>
</blockquote>
<p>It‚Äôs the same process as adding an SSH key, Go to Settings, SSH and GPG keys,
<code>New GPG key</code> and your all set.</p>
<h3 id="sign-your-commits-for-git"><a class="header" href="#sign-your-commits-for-git">Sign your Commits for Git</a></h3>
<pre><code class="language-nix"># git.nix
{...}: {
    programs.git = {
        enable = true;
      extraConfig = {
          commit.gpgsign = true;
          user.signingkey = "0x0666C1A265F156"
      };
    };
}
</code></pre>
<p>After this, you will be prompted for your Private Keys password on every commit.</p>
<p>If you look at your commits on GitHub, after adding the GPG key and the above
settings to your git setup it will show your commits are <code>Verified</code>.</p>
<h3 id="backing-up-your-keys"><a class="header" href="#backing-up-your-keys">Backing up Your Keys</a></h3>
<pre><code class="language-bash">gpg --export-secret-keys --armor --output my-private-key-backup.gpg
</code></pre>
<p>Your private keys will be encrypted with a passphrase into a .gpg file. Store
this backup in a secure location line an encrypted USB drive. This can prevent
you from losing access to your keys in the case of disk failure or accidents.</p>
<p>You can export your public keys and publish them publicly if you choose:</p>
<pre><code class="language-bash">gpg --export --armor --output my-public-keys.gpg
</code></pre>
<p>Now if your keys ever get lost or corrupted, you can import these backups.</p>
<h2 id="encrypt-a-file-with-pgp"><a class="header" href="#encrypt-a-file-with-pgp">Encrypt a File with PGP</a></h2>
<p>The easy way to do this is with an app like Kleopatra, available as
<code>pkgs.kdePackages.kleopatra</code>. Kleopatra will automatically recognize your gpg
keys and enable you to easily encrypt messages by clicking the Notepad, typing
your message and clicking <code>Sign/Encrypt Notepad</code>. You can also choose to encrypt
the message with a password, where anyone that has the password can read the
message.</p>
<p>Using the above and below methods enable you to encrypt any message for
basically any service and just copy past the encrypted text into the service for
added privacy.</p>
<p>Encrypting a whole directory is a bit more involved and requires using
compression.</p>
<h3 id="list-your-keys-and-get-the-key-id"><a class="header" href="#list-your-keys-and-get-the-key-id">List your keys and get the key ID</a></h3>
<pre><code class="language-bash">gpg --list-keys --keyid-format LONG
</code></pre>
<p>Example output, don‚Äôt use RSA keys:</p>
<pre><code class="language-bash">pub   rsa4096/ABCDEF1234567890 2024-01-01 [SC]
uid           [ultimate] Your Name &lt;you@example.com&gt;
sub   rsa4096/1234567890ABCDEF 2024-01-01 [E]
</code></pre>
<ul>
<li>
<p>Notice the <code>sub</code> and the <code>[E]</code> for the subkey with encrypt capabilities.</p>
</li>
<li>
<p>The part after the slash on the <code>pub</code> line is your key ID (<code>ABCDEF1234567890</code>
in the example)</p>
</li>
<li>
<p>You can also use your email or name to refer to the key in most commands.</p>
</li>
</ul>
<h3 id="encrypt-a-file"><a class="header" href="#encrypt-a-file">Encrypt a file</a></h3>
<p>In order to encrypt a document you must have the public keys of the intended
recipients.</p>
<pre><code class="language-bash">echo "This file will be encrypted" &gt; file.txt
</code></pre>
<p>Encrypting for yourself (using a key ID as recipient):</p>
<pre><code class="language-bash">gpg --encrypt --recipient ABCDEF1234567890 file.txt
</code></pre>
<pre><code class="language-bash">ls
‚îÇ  7 ‚îÇ file.txt            ‚îÇ file ‚îÇ     28 B ‚îÇ now           ‚îÇ
‚îÇ  8 ‚îÇ file.txt.gpg        ‚îÇ file ‚îÇ    191 B ‚îÇ now           ‚îÇ
</code></pre>
<p>Encrypting for someone else with their email (public key identifier):</p>
<pre><code class="language-bash">gpg --output file.gpg --encrypt --recipient jake@proton.me file.txt
</code></pre>
<pre><code class="language-bash">ls
file.txt
file.gpg
</code></pre>
<p><code>gpg --encrypt</code> doesn‚Äôt modify the original file. It creates a new encrypted
file by default with <code>gpg</code> amended to the filename.</p>
<pre><code class="language-bash">gpg --decrypt file.txt.gpg
gpg: encrypted with cv25519 key, ID 0x4AC131B80CEC833E, created 2025-07-31
      "GPG Key &lt;sayls8@proton.me&gt;"
This file will be encrypted
</code></pre>
<p>Or, to save the decrypted text to a file:</p>
<pre><code class="language-bash">gpg --output decrypted_file.txt --decrypt file.txt.gpg
cat decrypted_file.txt
# Output
File: decrypted.txt
This file will be encrypted
</code></pre>
<ul>
<li>You will be asked for the passphrase you used when creating the key in order
to decrypt the file.</li>
</ul>
<h3 id="sign-and-verify-signatures"><a class="header" href="#sign-and-verify-signatures">Sign and Verify Signatures</a></h3>
<p>When you sign a document it is certified and timestamped. If after the doc is
signed, if the doc is further modified in any way the verification of the
signature will fail.</p>
<p>A signature is created using the private key of the signer, and verified with
the corresponding public key. For example, to verify Jakes signature you would
use Jake‚Äôs public key to see that the work indeed came from him and hasn‚Äôt been
modified since.</p>
<p>To sign the above <code>file.txt</code>:</p>
<pre><code class="language-bash">gpg output doc.sig --sign file.txt
# To clearsign use:
gpg --clearsign file.txt
# For a detached signature use:
gpg --output doc.sig --detach-sig file.txt
</code></pre>
<p>You will be prompted for your passphrase.</p>
<p>You can either check the signature or check the signature and recover the
original document.</p>
<pre><code class="language-bash"># To only check:
gpg --output doc --verify doc.sig
# To verify and extract the document
gpg --output doc --decrypt doc.sig
</code></pre>
<h2 id="email-encryption"><a class="header" href="#email-encryption">Email Encryption</a></h2>
<p>Email is inherently insecure, and email-based attacks remain one of the top
vectors for data breaches. Encrypting your email protects your privacy by
ensuring that only the intended recipient can read it. Encrypting your emails
with PGP provides valuable security benefits but also has inherent limitations
that prevent it from being considered truly ‚Äúsecure communication‚Äù by modern
standards.</p>
<ul>
<li><a href="https://emailselfdefense.fsf.org/en/">Email Self-Defense</a></li>
</ul>
<p>What its Good for:</p>
<ul>
<li>
<p>Confidentiality, it prevents unauthorized third parties (like email providers
or network eavesdroppers) from reading your email content.</p>
</li>
<li>
<p>Integrity and authenticity: Digital signatures verify that the email genuinely
came from the claimed sender and hasn‚Äôt been altered in transit.</p>
</li>
<li>
<p>Long-term confidentiality: Encrypted emails stored on servers or devices
remain protected even if the storage is later compromised. With companies like
Gmail giving you a ‚Äúfree‚Äù account, that usually means that you are the product
and you should tread lightly.</p>
</li>
</ul>
<p><strong>To securely communicate with someone never use email, use a dedicated service
such as Threema, Signal or Brair.</strong> It‚Äôs hard to recommend any messaging service
at the moment, always do your own research and stay informed on the companies
policies. Signal has taken some heat for the way it has implemented it‚Äôs
MobileCoin. The biggest issue I‚Äôve faced is getting other people to care or use
the same e2ee app.</p>
<p>With Thunderbird you can go to settings, Privacy and Security, and scroll to the
bottom where it says ‚ÄúEnd to End Encryption‚Äù, Click the Settings tab there,
finally click End-To-End Encryption on the left.</p>
<p>From there, you can click <code>+ Add Key</code> next to your email address and either
generate a new key through Thunderbird. If you use this, choose the Curve
protocol or whatever isn‚Äôt RSA.</p>
<p>Or import your own key which is definitely more secure since you‚Äôre not trusting
someone else with your private key:</p>
<pre><code class="language-bash">gpg --export --armor sayls8@gmail.com &gt; publickey.asc
</code></pre>
<p>Then select <code>+ Add Key</code> and choose import your own, this didn‚Äôt work for me.
What did work was to start composing an email and click on the <code>OpenPGP</code> button,
Go to <code>Key Manager</code>, <code>File</code>, <code>Import Public Key from a File</code> and choose your
<code>publickey.asc</code>. This way, only you have access to your private key.</p>
<ul>
<li><a href="https://support.mozilla.org/en-US/kb/introduction-to-e2e-encryption#w_how-e2ee-with-openpgp-works-in-general">How e2ee with OpenPGP works in general</a></li>
</ul>
<p><strong>Import your recipient‚Äôs public key</strong></p>
<p>When you start composing an email, you‚Äôll see that you need to resolve key
issues if you don‚Äôt already have the recipients public key. Click <code>Resolve</code>, and
either Discover Public Keys Online‚Ä¶ or Import Public Keys From File‚Ä¶</p>
<p>Thunderbird has the option to use the OpenPGP Key Manager to view or manage
public keys of your correspondents.</p>
<p>If you‚Äôre sending encrypted emails to someone you‚Äôll need their public key,
there are a few methods of doing this just ensure you verify the Fingerprint
with the person your talking to.</p>
<p>Exporting your public key means creating a copy of the public part of your
cryptographic key pair that you can share with others.</p>
<p>For example, say that Jake wants to send you his public key. First he has to
export his key:</p>
<pre><code class="language-bash">gpg --output jake.gpg --export jake@proton.me
</code></pre>
<p>The key is exported in binary format, to export in ASCII-armored format use:</p>
<pre><code class="language-bash">gpg --armor --export jake@proton.me
</code></pre>
<p>Now, once he sends this to you, you‚Äôll need to import and validate it:</p>
<pre><code class="language-bash">gpg --import jake.gpg
</code></pre>
<p>Once the key is imported it should be validated. If you need to validate a key
manually, it is done by verifying the key‚Äôs fingerprint and then signing the key
to certify it as a valid key.</p>
<p>Check that it exists in your keychain:</p>
<pre><code class="language-bash">gpg --list-keys
</code></pre>
<p>You should see Jakes key in the above list.</p>
<p>To certify the key you need to edit it:</p>
<pre><code class="language-bash">gpg --edit-key jake@proton.me
# List the fingerprint
gpg&gt; fpr
# once the fingerprint is verified with the owner, sign it
gpg&gt; sign
# once signed, you can check the key to list signatures on it
gpg&gt; check
</code></pre>
<blockquote>
<p>‚ùó NOTE: You can use PGP to encrypt any message and paste it into <strong>any</strong>
software and send it. As long as only you and your recipient are the only
people to have the private keys, you will be the only people able to decrypt
the messages. Implementing this correctly is a good way to stop government
mass surveillance.</p>
</blockquote>
<h2 id="make-your-public-key-highly-available"><a class="header" href="#make-your-public-key-highly-available">Make your Public Key Highly Available</a></h2>
<p>You should always make sure that you sign your public key before you publish it.
When you distribute your public key, you‚Äôre distributing the public components
of your master and subkeys as well as the user IDs. If unsigned, this is a
security risk because it‚Äôs possible for an attacker to tamper with it. The
public key can be modified by adding or substituting keys, or changing user IDs.</p>
<p>Signing the keys provides a web of trust, only the corresponding public key can
be used to verify the signature and ensure it hasn‚Äôt been modified. Since we are
already only using subkeys for public keys, they are automatically self-signed.</p>
<pre><code class="language-bash">gpg --output ~/mygpg.key --armor --export your_email@address.com
</code></pre>
<p>You can then send this file to the other party.</p>
<p>You can also use the GPG interface to upload your key to a key server:</p>
<pre><code class="language-bash">gpg --list-keys your_email@address.com
</code></pre>
<p>Copy the key ID for the following command, remember its on the <code>pub</code> line after
the <code>/</code>.</p>
<pre><code class="language-bash">gpg --send-keys --keyserver pgp.mit.edu key_id
</code></pre>
<p>The key will be uploaded to the server and likely be distributed to other key
servers around the world. This is why expiration dates are important, if your
key is lost or stolen, the damage window is limited to the expiration period.
Also remember, you can add more time even after the key has expired.</p>
<h3 id="example-verifying-arch-linux-download"><a class="header" href="#example-verifying-arch-linux-download">Example: Verifying Arch Linux Download</a></h3>
<details>
<summary>
<p>‚úîÔ∏è Click to Expand Example of verifying and signing the archlinux public key</p>
</summary>
<p>First, download both the arch <code>.iso</code> and <code>.sig</code> files.</p>
<p>I tried a few different methods from <a href="https://archlinux.org/download/#checksums">https://archlinux.org/download/#checksums</a>
and the easiest by far was using Sequoia available in Nixpkgs as
<code>pkgs.sequoia-sq</code>:</p>
<p>Download the archlinux public key:</p>
<pre><code class="language-bash">sq network wkd search pierre@archlinux.org --output release-key.pgp

Found 2¬†certificates related to the query:

 - 3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C
   - Pierre Schmitz &lt;pierre@archlinux.org&gt; (UNAUTHENTICATED)
   - created 2022-10-31 09:11:51 UTC
   - found via: WKD

 - 4AA4767BBC9C4B1D18AE28B77F2D434B9741E8AC
   - Pierre Schmitz &lt;pierre@archlinux.de&gt; (UNAUTHENTICATED)
   - created 2011-04-10 09:35:33 UTC
   - found via: WKD

Hint: To extract a particular certificate from release-key.pgp, use any of:

  $ sq cert export --keyring=release-key.pgp --cert=3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C

  $ sq cert export --keyring=release-key.pgp --cert=4AA4767BBC9C4B1D18AE28B77F2D434B9741E8AC
</code></pre>
<p>Export the chosen key to a <code>.pgp</code> file:</p>
<pre><code class="language-bash">sq cert export --keyring=release-key.pgp --cert=3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C &gt; pierre-archlinux.pgp
</code></pre>
<p>Import into your keychain:</p>
<pre><code class="language-bash"> gpg --import pierre-archlinux.pgp
gpg: key 0x76A5EF9054449A5C: 9 signatures not checked due to missing keys
gpg: key 0x76A5EF9054449A5C: public key "Pierre Schmitz &lt;pierre@archlinux.org&gt;" imported
gpg: Total number processed: 1
gpg:               imported: 1
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   3  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: next trustdb check due at 2026-08-23
</code></pre>
<p>Now, you should see <code>&lt;pierre@archlinux.org&gt;</code> and his keys when you run
<code>gpg --list-keys</code></p>
<p>Finally, verify the signature:</p>
<pre><code class="language-bash">sq verify --signer-file release-key.pgp --signature-file archlinux-2025.08.01-x86_64.iso.sig archlinux-2025.08.01-x86_64.iso
Authenticated signature made by 3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C (Pierre Schmitz &lt;pierre@archlinux.org&gt;)

1¬†authenticated signature.
</code></pre>
<p>This shows that the signature was made by the key with the ID
<code>3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C</code> (Pierre Schmitz).</p>
<p>GPG authenticated that the signature is valid and that the key used to sign is
trusted in our keyring.</p>
<p>1 authenticated signature confirms the files integrity and authenticity.</p>
<p>We have successfully verified that the file was signed by Pierr‚Äôs official Arch
Linux key and has not been tampered with.</p>
<p>Since the key has been verified we can now sign it. We will have to import our
primary key to do so since we are keeping it offline for safety.</p>
<pre><code class="language-bash">gpg --import backup.gpg
</code></pre>
<p>List your keys to get the arch keyID:</p>
<pre><code class="language-bash">gpg --list-keys
# ... snip ...
pub   ed25519/0x76A5EF9054449A5C 2022-10-31 [SC] [expires: 2037-10-27]
      Key fingerprint = 3E80 CA1A 8B89 F69C BA57  D98A 76A5 EF90 5444 9A5C
uid                   [  full  ] Pierre Schmitz &lt;pierre@archlinux.org&gt;
uid                   [  full  ] Pierre Schmitz &lt;pierre@archlinux.de&gt;
sub   ed25519/0xD6D13C45BFCFBAFD 2022-10-31 [A] [expires: 2037-10-27]
sub   cv25519/0x7F56ADE50CA3D899 2022-10-31 [E] [expires: 2037-10-27]
</code></pre>
<p>Sign the key:</p>
<pre><code class="language-bash">gpg --sign-key 0x76A5EF9054449A5C
</code></pre>
<p>Now you can Export and publish the new public key and send it to a keyserver:</p>
<pre><code class="language-bash">gpg --export --armor 0x76A5EF9054449A5C &gt; archlinux-signed.asc
gpg --send-keys 0x76A5EF9054449A5C
</code></pre>
<p>The more people that verify, sign, and re-export and publish their keys the
better for the web of trust that gpg uses making the network more secure for
everyone.</p>
<h3 id="edit-your-trust-level-of-the-key"><a class="header" href="#edit-your-trust-level-of-the-key">Edit your trust level of the key</a></h3>
<pre><code class="language-bash">gpg --edit-key pierre@archlinux.org
gpg&gt; trust
Please decide how far you trust this user to correctly verify other users' keys
(by looking at passports, checking fingerprints from different sources, etc.)

  1 = I don't know or won't say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 3
# Output:
pub  ed25519/0x76A5EF9054449A5C
     created: 2022-10-31  expires: 2037-10-27  usage: SC
     trust: marginal      validity: full
</code></pre>
<p>You can see that the trust is <code>marginal</code> and validity is <code>full</code>.</p>
</details>
<footer id="kanagawa-support-footer" style="text-align:center; margin-top: 3rem; font-size: 0.85em; opacity: 0.75;">
  
<p><a href="https://github.com/saylesss88/mdbook-kanagawa-theme">Made with mdbook-kanagawa-theme</a></p>

</footer>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../nix/hardening_NixOS.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../nix/hardening_networking.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../nix/hardening_NixOS.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../nix/hardening_networking.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/extra-7c6a362d.js"></script>
        <script src="../theme/rss-button-131cc4a8.js"></script>
        <script src="../theme/nix_http-971fb95c.js"></script>



    </div>
    
<!-- mdbook-nix-repl config -->
<script>
  window.NIX_REPL_ENDPOINT = "http://127.0.0.1:8080/";
  window.NIX_REPL_TOKEN = "9deb7efadb74b9e962e7911bb5dcf3b1fef278a1d915b526";
</script>

</body>
</html>
